<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="title-page.html">Getting Things Done in Next.js</a></li><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="acknowledgments.html">Acknowledgments</a></li><li class="chapter-item expanded "><a href="chapter1/index.html"><strong aria-hidden="true">1.</strong> A Brief Introduction to JavaScript</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter1/01-hello-world.html"><strong aria-hidden="true">1.1.</strong> Hello World</a></li><li class="chapter-item expanded "><a href="chapter1/02-primitive-data-types.html"><strong aria-hidden="true">1.2.</strong> Primitive Data Types</a></li><li class="chapter-item expanded "><a href="chapter1/03-arrays-and-objects.html"><strong aria-hidden="true">1.3.</strong> Arrays and Objects</a></li><li class="chapter-item expanded "><a href="chapter1/04-control-flow.html"><strong aria-hidden="true">1.4.</strong> Control Flow</a></li><li class="chapter-item expanded "><a href="chapter1/05-functions.html"><strong aria-hidden="true">1.5.</strong> Functions</a></li><li class="chapter-item expanded "><a href="chapter1/06-error-handling.html"><strong aria-hidden="true">1.6.</strong> Error Handling</a></li><li class="chapter-item expanded "><a href="chapter1/07-basic-datastructures.html"><strong aria-hidden="true">1.7.</strong> Basic Data Structures</a></li><li class="chapter-item expanded "><a href="chapter1/08-functional-thinking.html"><strong aria-hidden="true">1.8.</strong> Functional Thinking</a></li><li class="chapter-item expanded "><a href="chapter1/09-asynchronous-programming.html"><strong aria-hidden="true">1.9.</strong> Asynchronous Programming</a></li><li class="chapter-item expanded "><a href="chapter1/10-modules.html"><strong aria-hidden="true">1.10.</strong> Modules</a></li><li class="chapter-item expanded "><a href="chapter1/11-writing-decent-code.html"><strong aria-hidden="true">1.11.</strong> Writing Decent Code</a></li></ol></li><li class="chapter-item expanded "><a href="chapter2/index.html"><strong aria-hidden="true">2.</strong> Leveling Up with TypeScript</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter2/01-why-typescript.html"><strong aria-hidden="true">2.1.</strong> Why TypeScript?</a></li><li class="chapter-item expanded "><a href="chapter2/02-basic-types.html"><strong aria-hidden="true">2.2.</strong> Basic Types</a></li><li class="chapter-item expanded "><a href="chapter2/03-annotating-functions.html"><strong aria-hidden="true">2.3.</strong> Annotating Functions</a></li><li class="chapter-item expanded "><a href="chapter2/04-union-types.html"><strong aria-hidden="true">2.4.</strong> Union Types</a></li><li class="chapter-item expanded "><a href="chapter2/05-generics.html"><strong aria-hidden="true">2.5.</strong> Generics</a></li><li class="chapter-item expanded "><a href="chapter2/06-the-keyof-and-typeof-operators.html"><strong aria-hidden="true">2.6.</strong> The keyof and typeof Type Operators</a></li></ol></li><li class="chapter-item expanded "><a href="chapter3/index.html"><strong aria-hidden="true">3.</strong> A Vanilla Client</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter3/01-hypertext-markup-language.html"><strong aria-hidden="true">3.1.</strong> Hypertext Markup Language</a></li><li class="chapter-item expanded "><a href="chapter3/02-marking-up-text.html"><strong aria-hidden="true">3.2.</strong> Marking Up Text</a></li><li class="chapter-item expanded "><a href="chapter3/03-hyperlinks-and-images.html"><strong aria-hidden="true">3.3.</strong> Hyperlinks and Images</a></li><li class="chapter-item expanded "><a href="chapter3/04-the-document-object-model.html"><strong aria-hidden="true">3.4.</strong> The Document Object Model</a></li><li class="chapter-item expanded "><a href="chapter3/05-web-forms.html"><strong aria-hidden="true">3.5.</strong> Web Forms</a></li><li class="chapter-item expanded "><a href="chapter3/06-a-simple-client.html"><strong aria-hidden="true">3.6.</strong> A Simple Client</a></li></ol></li><li class="chapter-item expanded "><a href="chapter4/index.html"><strong aria-hidden="true">4.</strong> Adding Spice with React</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter4/01-first-steps-in-react.html"><strong aria-hidden="true">4.1.</strong> First Steps in React</a></li><li class="chapter-item expanded "><a href="chapter4/02-introducing-jsx.html"><strong aria-hidden="true">4.2.</strong> Introducing JSX</a></li><li class="chapter-item expanded "><a href="chapter4/03-react-components.html"><strong aria-hidden="true">4.3.</strong> React Components</a></li><li class="chapter-item expanded "><a href="chapter4/04-structuring-a-react-project.html"><strong aria-hidden="true">4.4.</strong> Structuring a React Project</a></li><li class="chapter-item expanded "><a href="chapter4/05-react-state.html"><strong aria-hidden="true">4.5.</strong> React State</a></li><li class="chapter-item expanded "><a href="chapter4/06-react-effects.html"><strong aria-hidden="true">4.6.</strong> React Effects</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="getting-things-done-in-nextjs"><a class="header" href="#getting-things-done-in-nextjs">Getting Things Done In Next.js</a></h1>
<p><em>by Mikhail Berkov</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<div style="text-align: right"> <i>No one reads introductions anyway.<br> — Sun Tzu</i></div>
<p>Long gone are the times when JavaScript was just a scripting language to add simple interactive behaviour to websites. The ECMAScript 2015 standard significantly improved the usability of the language. Excellent UI libraries like React allow you to write straightforward declarative code which massively simplifies building user interfaces. Thanks to Node.js you can write JavaScript on the server. Next.js empowers you to write complex APIs very quickly and PostgreSQL provides a relational database that fits right in with the other tools. The Next.js stack therefore allows you to quickly develop complex applications using just one language - JavaScript (with optional type hints via TypeScript).</p>
<p>This book serves as an introduction to the Next.js stack. However you don't learn software development by <em>just</em> reading books, you learn it by creating projects. We will therefore not bombard you with useless language trivia for hundreds of pages. If you care about that, go read the standard - it's <em>pretty comprehensive</em>. Instead we will create a real software project - an application for managing tasks called <strong>easy-opus</strong> (get it?). We will begin with nothing more than an empty project directory and the <em>will to learn</em>. We will end with a useful piece of software that allows us to create tasks, assign tasks to different users, update their statuses and much more.</p>
<p>This book is therefore <em>inherently practical</em> - unlike some other literature we will not dwell much on theoretical considerations. On the other hand, purely practical concerns are first-class citizens here (for example there is an entire chapter devoted to hosting your application). This doesn't mean that <em>theory bad, practice good</em>. It simply means that the approach for <em>this particular book</em> is heavily geared towards completing a real software project.</p>
<p>This book is therefore also <em>not</em> about becoming <em>yet another JavaScript guru</em>™ (there are already too many of them). It's about writing a useful product. It is fundamentally about <strong>getting things done</strong>. The Next.js stack is really just a tool we use to get things done.</p>
<p>This book is suitable for both beginners who want to pick up their first tech stack as well as for seasoned software developers looking to expand their knowledge.</p>
<p>This book is intended to be a standalone resource. While there are resources for further reading in each section, these are merely pointers if you want to dive deeper into a certain topic. You <em>don't have</em> to read them and you should be able to understand everything without reading them. In fact, if you are hard stuck in a certain place, this probably represents a failure on our part. Maybe we didn't explain an important concept well enough (or at all!). Don't hesitate to write an email to <code>uhasker@protonmail.com</code> or to create an issue at <code>https://github.com/uhasker/getting-things-done-in-next-js</code> explaining your problem.</p>
<p><em>Happy hacking</em></p>
<p><em>Mikhail Berkov</em></p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="acknowledgments"><a class="header" href="#acknowledgments">Acknowledgments</a></h2>
<p>I sincerely thank the following people for <strong>major</strong> contributions to this book:</p>
<ul>
<li>Jannis Morgenstern</li>
<li>Alexander Berkov</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-1-a-brief-introduction-to-javascript"><a class="header" href="#chapter-1-a-brief-introduction-to-javascript">Chapter 1: A Brief Introduction to JavaScript</a></h1>
<div style="text-align: right"> <i> JavaScript has beauty, but not everyone sees it. <br> - Confucius </i> </div>
<p>First we will need to go through the basics of the JavaScript language that we will use pretty much everywhere throughout this book. After all the Next.js stack is built on top of it.</p>
<p>You will setup your runtime, learn about variables, data types, operators and control flow. You will also learn how to write functions and how to think <em>functionally</em>. Thinking <em>functionally</em> will make you a better software developer and a better person. Isn't that great?</p>
<p>Let's dive right in!</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="hello-world"><a class="header" href="#hello-world">Hello World</a></h2>
<div style="text-align: right"> <i> A journey of a thousand miles begins with a single "Hello, world!" program. <br> — Ancient Chinese proverb </i> </div>
<h3 id="runtime-environments"><a class="header" href="#runtime-environments">Runtime Environments</a></h3>
<p>Contrary to popular belief, code sadly doesn't run on pixie dust, magic spells, and unicorn tears.
Instead, it runs on something called a <strong>runtime environment</strong> (also referred to as <em>runtime system</em> or just <em>runtime</em>).
Put simply, a runtime is a program capable of executing code written in some programming language.
It <em>provides the environment in which programs can run</em>.
In order to execute all the <em>awesome</em> JavaScript code we are about to write, we therefore need a runtime first.</p>
<p>There are two runtimes capable of executing JavaScript code, which are relevant to this book - the browser and Node.js.
The browser as well as the Node.js console have <strong>REPL</strong> (read-eval-print-loop) capabilities.
This means you can directly type some code into the console and execute it.
REPLs are very nice, because they allow you to quickly test what you just learned.
Additionally, both runtimes can execute a file containing JavaScript code.
This is how we will usually utilize the runtimes - we write a <strong>script</strong> (a file containing JavaScript code) and tell our runtime to execute it.</p>
<blockquote>
<p>As projects grow larger, we will usually be dealing with multiple files at the same time.
We will talk about this in the &quot;Modules&quot; section of this chapter.</p>
</blockquote>
<p>Every runtime environment comes with a <strong>console</strong>.
This isn't a retro gaming console; rather, it's a special part of the runtime where you can input commands and see the results of your code in real-time.
Think of it as a conversation between you and the program - you tell it what to do (input commands) and it responds by executing those commands and showing you what happened (output).</p>
<p>In this section we will set up the browser and Node.js runtimes.
Then we will print &quot;Hello, world!&quot; to both the browser console and the Node.js console to test that our setup functions as anticipated.</p>
<h3 id="the-browser-environment"><a class="header" href="#the-browser-environment">The Browser Environment</a></h3>
<p>Open a browser, and open its console.
How you do this will depend on the browser.</p>
<p>If you are using <em>Firefox</em> the shortcut for opening the console is <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>K</kbd> on Ubuntu/Debian and <kbd>Cmd</kbd> + <kbd>Option</kbd> + <kbd>K</kbd> on a Mac.
If you are using <em>Chrome</em> or <em>Microsoft Edge</em> the shortcut is <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>J</kbd> on Ubuntu/Debian and <kbd>Cmd</kbd> + <kbd>Option</kbd> + <kbd>J</kbd> on a Mac.
If you are using <em>Safari</em> on a Mac, you will need to enable the develop menu first by going to <code>Settings &gt; Advanced</code> and ticking the box <code>Show Develop menu in menu bar</code>. Then you can open the console using <kbd>Cmd</kbd> + <kbd>Option</kbd> + <kbd>K</kbd>.</p>
<blockquote>
<p>If you are using Internet Explorer, please navigate to <code>google.com</code> and search for &quot;Firefox&quot; to install a <em>real</em> browser.
This line was originally intended to be a funny joke, but on June 15, 2022 Microsoft ended support for Internet Explorer, so it's not even a joke anymore.
We personally recommend Firefox, but Chrome, Microsoft Edge or Safari are also fine choices.</p>
</blockquote>
<p>This is approximately how the browser console will look on Firefox:</p>
<p><img src="chapter1/images/browser-console.png" alt="" /></p>
<blockquote>
<p>Note that if you see a bunch of scary error or warning messages upon opening the console, <em>don't panic</em> (this is also good life advice in general).
Most of these will probably come from various extensions you might have installed or the web page you are currently viewing.
You can simply delete these messages, as we don't care about them.</p>
</blockquote>
<p>Let us print something using the <code>console.log</code> method. Type the following into the browser console:</p>
<pre><code class="language-js">console.log('Hello, world!');
</code></pre>
<p>Now hit <kbd>Return</kbd> (you may also know this as <kbd>Enter</kbd> or simply <kbd>⏎</kbd>).
You will see the output &quot;Hello, world!&quot; in the console:</p>
<p><img src="chapter1/images/browser-console-log.png" alt="" /></p>
<blockquote>
<p>Ignore the &quot;undefined&quot; for now.</p>
</blockquote>
<p>Hooray, we printed something to the browser console!
This is the point at which you go tell everyone that you are now a <em>programmer</em>™.</p>
<h3 id="executing-javascript-from-an-html-file"><a class="header" href="#executing-javascript-from-an-html-file">Executing JavaScript from an HTML File</a></h3>
<p>As we already mentioned, instead of executing JavaScript in the browser console directly, we can (and often will) execute it from a JavaScript file.
Since we're on the browser, we will need to create two files - an HTML file and a JavaScript file.</p>
<p>HTML is short for <em>HyperText Markup Language</em> and is the standard markup language for documents that should be displayed in a browser.
We will cover HTML in chapter 2, for now we just want to get a quick glimpse at it.</p>
<p>Create a new HTML file.
We will call it <em>hello.html</em>; however you can name it whatever you want.
The filename should have an <em>html</em> extension though.</p>
<p>Open the HTML file in any text editor (we recommend you use <a href="https://code.visualstudio.com">Visual Studio Code</a>) and add the following text to the file:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html&gt;
  &lt;head&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;script src=&quot;hello.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Don't forget to save the file!</p>
<p>Now create another file called <em>hello.js</em> in the same directory as <em>hello.html</em> with the following content:</p>
<pre><code class="language-js">console.log('Hello, world');
</code></pre>
<blockquote>
<p>Note the semicolon after the <code>console.log</code>.
It terminates the <code>console.log</code> statement.
The semicolon is not technically required here.
Indeed there are many JavaScript programmers who don't write semicolons.
However, to avoid a bunch of pitfalls, we will use semicolons throughout this book and therefore we want you to get used to them as soon as possible.</p>
</blockquote>
<p>Now open this file in your browser by simply double-clicking the file.
After opening this file in your browser, open the console again. You should see <code>Hello, world!</code> printed there.</p>
<p>Congratulations, you wrote your first script!</p>
<h3 id="working-with-a-command-line"><a class="header" href="#working-with-a-command-line">Working With a Command Line</a></h3>
<p>Now that we know how to use the browser runtime, we will move on to Node.js.
However, before we can do that, we will need to learn how to interact with the <strong>command-line interface</strong> (also called command line, command prompt or CLI).
A command line allows you to execute various tasks called commands.</p>
<p>If you're on Ubuntu, you can open the command line by pressing <kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>T</kbd>.</p>
<p>On a Mac, you can open the command line by pressing <kbd>Cmd</kbd> + <kbd>Space</kbd> to open <em>search</em>, typing <em>terminal</em> and then hitting <kbd>Return</kbd>.</p>
<p>Now that you've opened a CLI, you can type a command and hit <kbd>Return</kbd> to execute it.
Try executing this command for starters:</p>
<pre><code class="language-sh">echo 'Hello, world!'
</code></pre>
<blockquote>
<p>Generally whenever we tell you to execute a command you need to type it in the CLI and hit <kbd>Return</kbd>.</p>
</blockquote>
<h3 id="the-nodejs-runtime"><a class="header" href="#the-nodejs-runtime">The Node.js Runtime</a></h3>
<p>For a long time, JavaScript was mostly used inside the browser runtime environment by programmers.
However in 2009 Node.js came along and changed that by allowing programmers to easily run JavaScript outside the browser.</p>
<p>Node.js will probably not be installed on your machine, so let's fix that.
First, we will install the <strong>Fast Node Manager</strong> (<strong>fnm</strong> for short) which will allow us to manage Node.js versions in a simple and straightforward manner.</p>
<p>On Ubuntu/Debian you will need to run the following:</p>
<pre><code class="language-sh">curl -fsSL https://fnm.vercel.app/install | bash
source ~/.bashrc
</code></pre>
<p>On Mac you will need to run the following:</p>
<pre><code class="language-sh">curl -fsSL https://fnm.vercel.app/install | zsh
source ~/.zshrc
</code></pre>
<p>Check that <code>fnm</code> was successfully installed:</p>
<pre><code class="language-sh">fnm --version
</code></pre>
<p>Finally we will install Node.js (version 18):</p>
<pre><code class="language-sh">fnm install 18
</code></pre>
<p>And again verify that Node.js was successfully installed:</p>
<pre><code class="language-sh">node --version
</code></pre>
<p>The installation script also automatically installed the <strong>node package manager</strong> (<em>npm</em> for short) which will later become necessary for managing dependencies in our projects.
Verify that npm was installed as well:</p>
<pre><code class="language-sh">npm --version
</code></pre>
<p>Now that Node.js is installed, you can open a Node.js console by typing node in the command line.
Now let's again print &quot;Hello, world!&quot; using the <code>console.log</code> method.
Type the following into the Node.js console and hit <kbd>Return</kbd>:</p>
<pre><code class="language-js">console.log('Hello, world!');
</code></pre>
<p>You should see <code>&quot;Hello, world!&quot;</code> printed to the console.</p>
<h3 id="executing-a-file"><a class="header" href="#executing-a-file">Executing a File</a></h3>
<p>Before moving on, let's execute a JavaScript file in Node.js as well.
Create a file named <code>hello.js</code>.
Open the file in any text editor and add the following content to the file:</p>
<pre><code class="language-js">console.log('Hello, world!');
</code></pre>
<p>Again open a command line and <em>change the current directory location to the directory containing the JavaScript file</em>.
You can do so using the <em>cd</em> command. For example if <code>hello.js</code> is located at <code>/home/users/user</code> you would execute the following:</p>
<pre><code class="language-sh">cd /home/users/user
</code></pre>
<p>Now execute the JavaScript file by running:</p>
<pre><code class="language-sh">node hello.js
</code></pre>
<p>This should again print <code>&quot;Hello, world!&quot;</code>.</p>
<p>Note that for the remainder of chapter 1 you should follow along using the Node.js console as we will be discussing the language itself.
Nevertheless, as we begin writing the project in chapter 2, we will have to write JavaScript for the browser runtime environment on a regular basis.</p>
<h3 id="the-browser-vs-nodejs"><a class="header" href="#the-browser-vs-nodejs">The Browser vs Node.js</a></h3>
<p>We now managed to execute some JavaScript on the browser and some JavaScript in Node.js.
Right now, these two runtime environment don't look to different because we only logged something to the console.
However, in later section you will learn that it is in fact extremely important which runtime you're on.</p>
<p>For example in Node.js you cannot access your browser window (which makes sense since there is no browser window).
On the other hand, if you are in the browser you cannot write files to the computer (to protect users from malicious websites).
Often people say that JavaScript code can be run <em>on the client</em> (in the browser) or <em>on the server</em> (usually using Node.js).</p>
<p>Remember this point, since it will become extremely important later.</p>
<h3 id="statements-and-expressions"><a class="header" href="#statements-and-expressions">Statements And Expressions</a></h3>
<p>Before we dive into JavaScript, you should know that programs are made of statements and expressions.</p>
<p>A <strong>statement</strong> is a syntactic unit responsible for executing some action.
A <strong>program</strong> is then essentially a sequence of statements which should be executed when running the program.
For example <code>console.log('Hello, world!')</code> is a statement which executes the action of printing &quot;Hello, world!&quot; to the console.</p>
<p>An <strong>expression</strong> is a syntactic unit that may be evaluated to get its value.
For example <code>2 + 2</code> would be an expression which would evaluate to <code>4</code>.
Note that since any expression also executes some action, any expression is therefore a statement.</p>
<p>You could put it this way: Statements in general are executed to make something happen, while expressions in specific are evaluated to produce a value.</p>
<blockquote>
<p>Note that other authors might define statements and expressions in a slightly different manner.
However we will stick to these definitions throughout the book.</p>
</blockquote>
<h3 id="comments"><a class="header" href="#comments">Comments</a></h3>
<p>Everything that is after a double slash on a line in JavaScript is a <strong>comment</strong>.
Comments are ignored by the runtime and therefore have no effect for the execution of your program:</p>
<pre><code class="language-js">// This is just a comment
// Comments have no effect
console.log('Hello, world!');
// Therefore this program is equivalent to the
// program from the previous chapter
</code></pre>
<p>We will heavily utilize comments throughout this book inside the code blocks to highlight important ideas.</p>
<blockquote>
<p>There is a lot of discussion on how much you should comment your programs.
We will return to this when discussing functions.
However one rule is that if your code is so terrible that it requires <em>extensive commentary</em> to explain its behavior or purpose, you should fix the code.
Just like a work of art, your code should stand on it's own merits.
Imagine <em>commenting</em> a work of art (oh, wait)...
However it is better to have terrible code and comments than have terrible code and no comments.</p>
</blockquote>
<p>We will also adopt the convention that if a comment is next to a line with a <code>console.log</code> statement, that comment shows the output that would be logged to the console if the code was run. For example:</p>
<pre><code class="language-js">console.log('Hello, world!'); // Hello, world!
</code></pre>
<p>This is the point where we tell you that while you are reading this book you should <em>absolutely follow along in some runtime</em> (probably Node.js, but a browser is fine too).
This is <em>very important</em>.
Go ahead and open a Node.js console <em>now</em>.</p>
<p>Come on, we'll wait...</p>
<p>...</p>
<p>...</p>
<p>...</p>
<p><em>Finally</em>.
Let's move on.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="primitive-data-types"><a class="header" href="#primitive-data-types">Primitive Data Types</a></h2>
<div style="text-align: right"> <i> == is the equality operator <br> === is the one and true equality operator <br> ==== is the equality operator which transcends time and space <br> ===== is the equality operator which transcends all other equality operators <br> ====== is the equality operator which summons the UNSPEAKABLE DOOM h̷̳͓͝ě̵̞͂ ̵̮͍͊͋i̴͎͂s̵̗͒ ̷̘̤̓̅h̸͜͝ḙ̵̀r̶͈̆ȇ̶̗̱̍ ̸͕̾h̴̲̗̾̅e̷̟̋ả̶̬v̶̯́̐͜ẽ̸̛͔n̶̩̒͊ ̴̢̯̍ḣ̵̳̻e̴̙̒̓l̵͇̟̃p̶̘̑ ̷̠͛͝ŭ̴͇̯̕s̶̮͕̒ <br> — from "The Book of the Equality Operators and their Virtue" by Laozi </i> </div>
<h3 id="variables"><a class="header" href="#variables">Variables</a></h3>
<p>Whenever we write programs, we need to manipulate data.
This data needs to be stored somewhere and we need to be able to access it somehow.
We also need to deal with the fact that when we execute a program, the values we deal with are not predictable in advance.
For example we don't know which tasks a user might create (that is kind of the point of writing our application).
Nevertheless, we must be able to access created tasks through a predictable name like <code>tasks</code> or <code>createdTasks</code>.</p>
<p>Therefore we need a way to put an <em>unpredictable</em> value in a &quot;box&quot; somewhere and refer to it using a <em>predictable</em> name.
In programming, this box is referred to as <em>storage</em> and the predictable name as a <em>symbolic name</em>.</p>
<p>A <strong>variable</strong> is just that - a storage location containing a value which is referred to by a symbolic name.
This <em>sounds</em> really fancy, but it just means that there is a value somewhere in your storage and you can refer to that value using a symbolic name that doesn't change (even if the value itself changes).</p>
<p>For example you could have a variable <code>age</code> which has the value <code>20</code> (we say that <code>age</code> is equal to <code>20</code>):</p>
<p><img src="chapter1/images/variable.png" alt="" /></p>
<p>Now even if the value of <code>age</code> changes (e.g. to <code>21</code> because a birthday happened), the variable name doesn't change, only the value does.
The variable name will still be <code>age</code>, however now <code>age</code> will have the value <code>21</code> (i.e. <code>age</code> will be equal to <code>21</code>):</p>
<p><img src="chapter1/images/variable-changed.png" alt="" /></p>
<p>JavaScript lets you declare variables with the <code>let</code> keyword.
You can assign values to variables using the <strong>assignment operator</strong> (<code>=</code>):</p>
<pre><code class="language-js">// Declare a variable
let x;

// Assign a value to a variable
x = 10;
</code></pre>
<p>You can print the value of the variable using the <code>console.log</code> method:</p>
<pre><code class="language-js">console.log(x); // 10
</code></pre>
<blockquote>
<p>If you follow along in the Node.js (or browser) console, you don't actually need to use the <code>console.log</code> method to print the value of a variable.
Instead you can simply type the variable (or any expression for that matter) and the console will display its value.</p>
</blockquote>
<p>You can also have a declaration and an assignment on a single line. In fact, this is usually the way to go:</p>
<pre><code class="language-js">let y = 10;
</code></pre>
<p>The value of a variable may change over the course of a program:</p>
<pre><code class="language-js">let y = 10;
console.log(y); // 10

// Assign a new value to the variable
y = 20;
console.log(y); // 20
</code></pre>
<p>This will log <code>10</code> and then <code>20</code> to the console.</p>
<p>If you want to declare a predictable name for a value that never changes, you can declare a <strong>constant</strong>.
This is done using the <code>const</code> keyword:</p>
<pre><code class="language-js">const ten = 10;
</code></pre>
<p>If you try to reassign a value to a constant, you get an error. For example if you do</p>
<pre><code class="language-js">const ten = 10;
ten = 20;
</code></pre>
<p>you get</p>
<pre><code>Uncaught TypeError: Assignment to constant variable.
</code></pre>
<p>You will almost exclusively see us using <code>const</code> instead of <code>let</code> from now on.
Reassignment is not nearly as necessary as you might think right now.</p>
<blockquote>
<p>You can also declare variables using the <code>var</code> keyword.
We will not cover it here and you essentially only need to know one thing about <code>var</code> - you should <em>basically never use it</em>.
It's mostly a historical artifact of the language at this point.</p>
</blockquote>
<p>Any variable has a <strong>data type</strong> which denotes the range of values it can take and which operations can be performed on the variable.
You can use the <code>typeof</code> operator to obtain the data type of a variable.</p>
<p>We begin with a few particularly important <strong>primitive data types</strong>.
Let's talk about numbers, booleans, strings and <code>undefined</code>.</p>
<h3 id="numbers"><a class="header" href="#numbers">Numbers</a></h3>
<p>You've already encountered the <code>Number</code> data type:</p>
<pre><code class="language-js">const age = 20;
console.log(typeof age); // number
</code></pre>
<p>Any integer or real number is a <code>Number</code>:</p>
<pre><code class="language-js">console.log(typeof 42); // number
console.log(typeof -20); // number
console.log(typeof 3.4); // number
console.log(typeof -1.7); // number
</code></pre>
<p>You can perform arithmetic on numbers using the usual arithmetic operators <code>+</code>, <code>-</code>, <code>*</code> and <code>/</code>.
There is also the <code>%</code> (modulo) operator which returns the remainder of a division.
Finally, there is the <code>**</code> operator which does exponentiation:</p>
<pre><code class="language-js">const a = 3;
const b = 4;
console.log(a + b); // 7
console.log(a - b); // -1
console.log(a * b); // 12
console.log(a / b); // 0.75
console.log(a % b); // 3
console.log(a ** b); // 81
</code></pre>
<p>You can also use the <strong>shorthand assignment operators</strong> to combine asssignment and arithmetic operators:</p>
<pre><code class="language-js">let a = 3;
a += 4;
console.log(a); // 7
a -= 2;
console.log(a); // 5
a *= 3;
console.log(a); // 15
a /= 3;
console.log(a); // 5
a %= 3;
console.log(a); // 2
a **= 5;
console.log(a); // 32
</code></pre>
<p>You also use the <strong>postfix increment</strong> and the <strong>postfix decrement</strong> operators to increment or decrement a value by 1:</p>
<pre><code class="language-js">let a = 4;
a++;
console.log(a); // 5
a--;
console.log(a); // 4
</code></pre>
<p>So far, so obvious.
However there are also some other things which have type <code>Number</code> like <code>Infinity</code>.
<code>Infinity</code> is a special value that represents mathematical infinity:</p>
<pre><code class="language-js">console.log(typeof Infinity); // number
</code></pre>
<p>Additionally there is a special value called <code>NaN</code> (short for &quot;not a number&quot;).
For example the result of <code>0 / 0</code> is <code>NaN</code>:</p>
<pre><code class="language-js">console.log(0 / 0); // NaN
</code></pre>
<p>Hilariously enough, <code>NaN</code> itself is a number.
This is despite the fact that its name literally says that it isn't:</p>
<pre><code class="language-js">console.log(typeof NaN); // number
</code></pre>
<p>Don't let that confuse you.</p>
<p>Another important thing about numbers is that you need to be careful when you are trying to perform operations with real numbers.
For example if you add <code>0.1</code> and <code>0.2</code> you get a weird result:</p>
<pre><code class="language-js">console.log(0.1 + 0.2); // 0.30000000000000004
</code></pre>
<p>This is not the fault of JavaScript, but instead has to do with the limitations of trying to represent real numbers in binary on a finite hardware.</p>
<blockquote>
<p>We will not go into great detail in this book about this problem.
If you're interested in more details we encourage you to have a look at the IEEE754 standard.</p>
</blockquote>
<h3 id="booleans"><a class="header" href="#booleans">Booleans</a></h3>
<p>Another primitive type is the <code>Boolean</code> type.
This allows you to represent values which are either <code>true</code> or <code>false</code>:</p>
<pre><code class="language-js">const thisBookIsAwesome = true;
const thisBookSucks = false;
console.log(typeof thisBookIsAwesome); // boolean
console.log(typeof thisBookSucks); // boolean
</code></pre>
<p>You can do simple logic using the logical operators <code>&amp;&amp;</code> (which denotes <strong>and</strong>), <code>||</code> (which denotes <strong>or</strong>) and <code>!</code> (which denotes <strong>not</strong>).</p>
<p>The <code>&amp;&amp;</code> (<em>and</em>) operator takes two values and evaluates to <code>true</code> only if both values are <code>true</code> and to <code>false</code> otherwise:</p>
<pre><code class="language-js">console.log(true &amp;&amp; true); // true
console.log(false &amp;&amp; true); // false
console.log(true &amp;&amp; false); // false
console.log(false &amp;&amp; false); // false
</code></pre>
<p>The <code>||</code> (<em>or</em>) operator takes two values and evaluates to <code>true</code> if <em>at least one</em> of the values is <code>true</code> (and to <code>false</code> otherwise):</p>
<pre><code class="language-js">console.log(true || true); // true
console.log(false || true); // true
console.log(true || false); // true
console.log(false || false); // false
</code></pre>
<p>The <code>!</code> (<em>not</em>) operator takes a single value and simply negates it, i.e. &quot;switches&quot; a value to it's opposite:</p>
<pre><code class="language-js">console.log(!true); // false
console.log(!false); // true
</code></pre>
<p>Here is an example with all the operators together:</p>
<pre><code class="language-js">const b1 = true;
const b2 = false;
console.log(b1 &amp;&amp; b2); // false
console.log(b1 || b2); // true
console.log(!b1); // false
</code></pre>
<blockquote>
<p>Note that technically all the logical operators can take <em>any</em> value (not just boolean values).
The result of the logical operator application is then dependent on whether the values are <em>truthy</em> or <em>falsy</em>.
We will discuss this a bit later.</p>
</blockquote>
<p>A slightly less well known operator is the nullish coalescing operator <code>??</code>.
This operator takes two values and check if the left-hand side is <code>undefined</code> (or <code>null</code> - a value that will be discussed later).
If the left value is <code>undefined</code> or <code>null</code> it returns the right-hand side, otherwise it returns the left-hand side:</p>
<pre><code class="language-js">console.log(undefined ?? 1); // 1
console.log(0 ?? 1); // 0
</code></pre>
<p>The <code>??</code> operator is commonly used to provide useful default values.</p>
<p>A boolean variable usually occurs as the result of an expression.
Often it is the result of an expression containing the <strong>strict equality operator</strong> (<code>===</code>) which allows us to compare the values of variables:</p>
<pre><code class="language-js">const x1 = 5;
const x2 = 10;
const x3 = 5;
console.log(x1 === x1); // true
console.log(x1 === x2); // false
console.log(x1 === x3); // true
</code></pre>
<blockquote>
<p>There is also another equality operator (<code>==</code>) which performs various type coercions before doing the equality comparison.
This operator can be best described as an April Fools' joke that somehow made it into the language.
<em>Never use it</em>.</p>
</blockquote>
<p>If you want to write <em>not equals</em> you can use <code>!==</code>:</p>
<pre><code class="language-js">console.log(5 !== 10); // true
console.log(5 !== 5); // false
</code></pre>
<p>Additionally you can also check if one value is less than or greater than another value.
This is most commonly done with numbers:</p>
<pre><code class="language-js">console.log(2 &lt; 3); // true
console.log(2 &lt;= 3); // true
console.log(2 &gt; 3); // false
console.log(2 &gt;= 3); // false
</code></pre>
<h3 id="strings"><a class="header" href="#strings">Strings</a></h3>
<p>Another primitive data type is the <code>String</code> type.
A string is simply a sequence of characters and is used to represent text.
Strings are usually written using single quotes in JavaScript:</p>
<pre><code class="language-js">const s = 'Some text';
console.log(typeof s); // string
</code></pre>
<blockquote>
<p>Note that it's also possible to write strings using double quotes, however in most projects strings are written using single quotes.
We will stick to this convention.</p>
</blockquote>
<p>The <code>+</code> operator works on strings and does concatenation:</p>
<pre><code class="language-js">const s1 = 'MERN ';
const s2 = 'book';
console.log(s1 + s2); // MERN book
</code></pre>
<p>Note that instead of doing concatenation all the time you can also use <strong>template strings</strong> (also called template literals).
This allows writing JavaScript expressions directly inside strings.
Consider the following example:</p>
<pre><code class="language-js">const s = 'world';
const greeting = `Hello ${s}!`;
console.log(greeting); // Hello world!
</code></pre>
<p>Template strings are written using backticks (<em>not</em> single quotes).
They may contain so called <em>placeholders</em> which are expressions embedded inside <code>${...}</code>.
These expressions can be any valid JavaScript expression that evaluates to a value implicitly convertible to a string.
JavaScript will then try to convert any value inside the placeholder to a string:</p>
<pre><code class="language-js">console.log(`2 + 2 = ${2 + 2}`); // 2 + 2 = 4
</code></pre>
<p>You can get the length (i.e. the number of characters) of a string like this:</p>
<pre><code class="language-js">const s = 'MERN book';
console.log(s.length); // 9
</code></pre>
<blockquote>
<p>Note that JavaScript does not have a special &quot;character&quot; data type (unlike Java for example).
Instead, characters are simply strings of length 1.</p>
</blockquote>
<p>There is much more to strings and we will revise them in a later section.</p>
<h3 id="undefined"><a class="header" href="#undefined">Undefined</a></h3>
<p>Finally there is one more primitive type that is of interest to us, namely <code>undefined</code>.
There is only one value of this type: <code>undefined</code>.
If a variable has the value <code>undefined</code> this (quite logically) means that it hasn't been defined.
For example, whenever you have a variable that has been initialized, but not assigned to, it will automatically have the value and therefore the type <code>undefined</code>.</p>
<pre><code class="language-js">let someVariable;
console.log(someVariable); // undefined
console.log(typeof someVariable); // undefined
</code></pre>
<blockquote>
<p>Note that <code>string</code>, <code>number</code>, <code>boolean</code> and <code>undefined</code> are not the only primitive data types.
Two other primitive data types are <code>symbol</code> and <code>bigint</code>.
And there is one more primitive data type that we will encounter soon.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="arrays-and-objects"><a class="header" href="#arrays-and-objects">Arrays and Objects</a></h2>
<div style="text-align: right"> <i> The object of the superior programmer is truthy. <br> — Confucius </i> </div>
<h3 id="arrays"><a class="header" href="#arrays">Arrays</a></h3>
<p>Let's say you are writing a task application (<em>just how did I come up with that example?</em>) and you need to store a bunch of tasks.
You could of course declare a separate variable for every task like this:</p>
<pre><code class="language-js">const task1 = 'First task';
const task2 = 'Second task';
const task3 = 'Third task';
</code></pre>
<p>However this would quickly become very <em>tedious</em>.
In addition you may want to add or delete tasks.
Adding and deleting variables will become even more <em>tedious</em>.
It would become almost as <em>tedious</em> as repeating the word <em>tedious</em> over and over.
Did we mention that this is really <em>tedious</em>?
As you can see, we need a way to store multiple values in a single variable.</p>
<p>A JavaScript <strong>array</strong> is an ordered collection of multiple values.
You can declare an array using an <strong>array literal</strong> (also called an <em>array initializer</em> in this context):</p>
<pre><code class="language-js">const tasks = ['First task', 'Second task', 'Third task'];
</code></pre>
<p>Note that an array is no longer a primitive type, instead arrays have the type <code>object</code>:</p>
<pre><code class="language-js">console.log(typeof tasks); // object
</code></pre>
<p>You can access individual elements of an array using the index notation.
This works by writing the name of the array, followed by the position of the element you want to retrieve inside square brackets.
Note that when we count the indices (positions), we start at <code>0</code>, <em>not</em> at <code>1</code>:</p>
<pre><code class="language-js">console.log(tasks[0]); // First task
console.log(tasks[1]); // Second taskhttps://uhasker.github.io/getting-things-done-in-next-js/chapter1/03-arrays-and-objects.html

If the array index is too big, trying to access the element at that index will return `undefined`:

```js
console.log(tasks[3]); // undefined
</code></pre>
<p>You can get the length of an array by using <code>.length</code>:</p>
<pre><code class="language-js">console.log(tasks.length); // 3https://uhasker.github.io/getting-things-done-in-next-js/chapter1/03-arrays-and-objects.html

&gt; Note that even despite the fact the `tasks` array is declared as a constant here, you can still change the _contents_ of the array.
&gt; However you can't _reassign_ `tasks` to something else, i.e. you can't write something like `tasks = [1]`.

JavaScript has some elegant syntax for working with arrays. If you want to assign variables based on values of an array, you would normally have to do something like this:

```js
const firstTask = tasks[0];
const secondTask = tasks[1];
const thirdTask = tasks[2];
</code></pre>
<p>This is (you guessed it) <em>tedious</em>.
Instead you can use the <strong>array destructuring assignment</strong>:</p>
<pre><code class="language-js">const [firstTask, secondTask, thirdTask] = tasks;
</code></pre>
<p>If you only care about some of the elements, you can use the <strong>spread</strong> (<code>...</code>) syntax:</p>
<pre><code class="language-js">const [firstTask, ...otherTasks] = tasks;
</code></pre>
<p>Something that commonly trips up beginners is trying to <em>copy</em> an array. Let's say you have an array of numbers called <code>arr</code> and you want to create a copy called <code>arr2</code>.
You would probably try something like</p>
<pre><code class="language-js">const arr = [1, 2, 3, 4];
const arr2 = arr;
</code></pre>
<p>This is <em>wrong</em>. Let's try changing the first element of <code>arr</code> and look at <code>arr[0]</code> and <code>arr2[0]</code>:</p>
<pre><code class="language-js">arr[0] = 5;
console.log(arr[0]); // 5
console.log(arr2[0]); // 5
</code></pre>
<p>Uh-oh!
That's probably not what we want.
The reason for this behaviour is that <code>arr</code> and <code>arr2</code> both point to the same array.
Remember how we were careful to introduce a variable <em>as a storage location together with a symbolic name</em>?
Well, it turns out that <em>different symbolic names</em> may refer to the <em>exact same storage location</em>.
You can visualize it like this:</p>
<p><img src="chapter1/images/array-copy-incorrect.png" alt="" /></p>
<p>Here we have a storage location containing the values <code>1</code>, <code>2</code>, <code>3</code> and <code>4</code> somewhere.
We also have two symbolic names <code>arr</code> and <code>arr2</code>.
While the symbolic names are different, they point to the same storage location.
Therefore if we change the storage location, we will observe a change via both symbolic names.</p>
<p>In order to actually copy the values, we can in fact use the spread syntax as this will <em>copy</em> the values:</p>
<pre><code class="language-js">const copied = [...arr];
</code></pre>
<p>Let's check that this indeed an actual copy:</p>
<pre><code class="language-js">arr[0] = 5;
console.log(arr[0]); // 5
console.log(copied[0]); // 1
</code></pre>
<p>This looks good.
Here is the mental picture you should have in your head for copying an array:</p>
<p><img src="chapter1/images/array-copy-correct.png" alt="" /></p>
<blockquote>
<p>If you only briefly skimmed the section on array destructuring and the spread syntax, go right back and read it carefully.
These two concepts will come up <em>a lot</em> in the following chapters (much more often than you think right now).</p>
</blockquote>
<h3 id="objects"><a class="header" href="#objects">Objects</a></h3>
<p>Let's return to our (yet) imaginary task application.
A task will probably be something more than just a string.
For example it might contain an ID, a summary and a description.
We could again store these in constants:</p>
<pre><code class="language-js">const taskId = 1;
const taskSummary = 'Read the Next.js book';
const taskDescription = 'Read and understand the Next.js book.';
</code></pre>
<p>As you can probably guess, this will quickly become <em>tedious</em> (oh no, not this again).
<strong>Objects</strong> to the rescue!
These allow us to store name-value pairs inside a single variable.
Here is how we might create a <code>task</code> object that contains all the information we want to know about a task:</p>
<pre><code class="language-js">const task = {
  id: 1,
  summary: 'Read the Next.js book',
  description: 'Read and understand the Next.js book.',
};
</code></pre>
<p>Every such value is called a <strong>property</strong>.
We can access properties using the dot notation or the square bracket notation.
For example to access the <code>summary</code> property of the <code>task</code> object, you would write <code>task.summary</code> or <code>task['summary']</code>.
Try it out:</p>
<pre><code class="language-js">console.log(task.id); // 1
console.log(task.summary); // Read the Next.js book
console.log(task.description); // Read and understand the Next.js book.
console.log(task['id']); // 1
console.log(task['summary']); // Read the Next.js book
console.log(task['description']); // Read and understand the Next.js book.
</code></pre>
<blockquote>
<p>Note that we will practically always use the dot notation.</p>
</blockquote>
<p>Properties don't have to be primitive values.
They can also be other objects.
Generally speaking, you can arbitrarily nest objects and arrays.
For example, here is how you can nest an object inside an object:</p>
<pre><code class="language-js">const person = {
  name: 'John Doe',
  task: {
    id: 1,
    summary: 'Read the Next.js book',
    description: 'Read and understand the Next.js book.',
  },
};
</code></pre>
<p>flowe <code>person.task.summary</code>:</p>
<pre><code class="language-js">console.log(person.task.summary); // Read the Next.js book
</code></pre>
<p>If you try to access a property that doesn't exist, the result will be <code>undefined</code> (there it is again):</p>
<pre><code class="language-js">console.log(task.date); // undefined
</code></pre>
<p>Sometimes you want to explicitly indicate that a property may be absent.
For example a person may not have a task assigned to them.
You could do something like this:</p>
<pre><code class="language-js">const person = {
  name: 'John Doe',
  task: undefined,
};
</code></pre>
<p>This has the <em>potential</em> problem that someone referring to <code>person.task</code> will have no idea whether it is <code>undefined</code> because the property is not supposhttps://uhasker.github.io/getting-things-done-in-next-js/chapter1/03-arrays-and-objects.html
There is nothing that prevents you from using <code>undefined</code> to denote absence all the time and in fact we will do so in this very book.
Just keep in mind that <code>null</code> exists and that some developers use it to indicate absence (and that it's totally fine to do so).</p>
<p>Remember how we said that there is one more primitive data type left?
Well - there it is.
The final primitive data type is <code>null</code>.
This is something a lot of people are really confused about, because <code>typeof null</code> returns <code>object</code> (and not e.g. <code>null</code>).
However this is primarily a technical detail.
Despite the fact that <code>null</code> is a separate data type it doesn't hurt to think of it as an object (namely an absent one).</p>
<p>Just as with arrays, you can use <strong>destructuring assignment</strong> when working with objects:</p>
<pre><code class="language-js">const task = {
  id: 1,
  summary: 'Read the Next.js book',
  description: 'Read and understand the Next.js book.',
};
const { id, summary, description } = task;
</code></pre>
<p>And just like with arrays, you can use the spread syntax:</p>
<pre><code class="language-js">const taskWithAssignee = {
  assignee: 'Max',
  ...task,
};
console.log(taskWithAssignee);
</code></pre>
<p>This will print:</p>
<pre><code class="language-json">{
  &quot;assignee&quot;: &quot;Max&quot;,
  &quot;id&quot;: 1,
  &quot;summary&quot;: &quot;Read the Next.js book&quot;,
  &quot;description&quot;: &quot;Read and understand the Next.js book.&quot;
}
</code></pre>
<blockquote>
<p>Note that objects are more than just containers for values.
We will talk about this in the section on functions.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="control-flow"><a class="header" href="#control-flow">Control Flow</a></h2>
<div style="text-align: right"> <i> Don't push the for loop, it flows by itself. <br> — Ancient Chinese proverb </i> </div>
<h3 id="if-statements"><a class="header" href="#if-statements">If Statements</a></h3>
<p>Quite often, we need to make <em>decisions</em> in our programs.
Let's say we want to display a fancy message when a bunch of tasks are completed.
This is a decision: <em>If</em> all the tasks are completed, <em>then</em> we want to display a message.
Put generally: <em>If</em> a condition holds (is true), <em>then</em> we want to do something.</p>
<p>Conveniently, the language keyword that allows us to accomplish this is called <code>if</code>:</p>
<pre><code class="language-js">const completed = true;
if (completed) {
  console.log('Hooray, you completed all your tasks!');
}
</code></pre>
<p>This would print:</p>
<pre><code>Hooray, you completed all your tasks!
</code></pre>
<p>The general form of an <code>if</code> statement looks like this:</p>
<pre><code class="language-js">if (condition) {
  statements;
}
</code></pre>
<p>If <code>condition</code> is true, then the <code>statements</code> inside the curly braces will be executed.
If <code>condition</code> is false, nothing will happen.</p>
<blockquote>
<p>Note that technically it suffices if the condition is <em>truthy</em> or <em>falsy</em>. We will ignore this detail for now and return to it in a second.</p>
</blockquote>
<p>The simplest condition is a boolean variable.
However, nothing prevents us from writing more complex conditions.
For example, let's say we have a list of uncompleted tasks (conveniently) named <code>tasks</code>.
Then we could check that all tasks have been completed by checking whether <code>tasks</code> is empty (i.e. the length of <code>tasks</code> is zero):</p>
<pre><code class="language-js">if (tasks.length === 0) {
  console.log('Hooray, you completed all your tasks!');
}
</code></pre>
<p>Sometimes you need to do something in one case and something else in another case.
The (also conveniently named) <code>else</code> keyword allows you to accomplish exactly that.
Let's say that if all the tasks haven't been completed yet, we want to display a different message:</p>
<pre><code class="language-js">if (tasks.length === 0) {
  console.log('Hooray, you completed all your tasks!');
} else {
  console.log('You still have some tasks to complete.');
}
</code></pre>
<p>The general form of an <code>if...else</code> statement looks like this:</p>
<pre><code class="language-js">if (condition) {
  block1;
} else {
  block2;
}
</code></pre>
<p>If <code>condition</code> is true, the statements corresponding to <code>block1</code> will be executed (i.e. the statements inside the curly braces after the <code>if</code>).
If <code>condition</code> is false, the statements corresponding to <code>block2</code> will be executed (i.e. the statements inside the curly braces after the <code>else</code>).</p>
<p>Note that there may be multiple statements between the curly braces.
This is totally valid:</p>
<pre><code class="language-js">if (tasks.length === 0) {
  console.log('Hooray, you completed all your tasks!');
  console.log('Congratulations!');
  console.log('No really, you are amazing!');
} else {
  console.log('You still have some tasks to complete.');
  console.log('Do not despair!');
}
</code></pre>
<p>Assuming <code>tasks</code> has a <code>length</code> of <code>0</code> this will print:</p>
<pre><code>Hooray, you completed all your tasks!
Congratulations!
No really, you are amazing!
</code></pre>
<p>Sometimes you need to handle more than two cases.
Since JavaScript was fresh out of keywords at this point, they allowed you to do so using <code>else if</code>:</p>
<pre><code class="language-js">if (tasks.length === 0) {
  console.log('Hooray, you completed all your tasks!');
} else if (tasks.length === 1) {
  console.log('Only one task left! Go! Go! Go!');
} else {
  console.log('You still have some tasks to complete.');
}
</code></pre>
<p>The general form of an <code>if...else if...else</code> statement looks like this:</p>
<pre><code class="language-js">if (condition1) {
  block1;
} else if (condition2) {
  block2;
} /*possibly more else ifs*/ else if (conditionN) {
  blockN;
} else {
  blockElse;
}
</code></pre>
<p>Here all the conditions will be checked one after another.
As soon as a condition is true, the corresponding statements will be executed.
If no condition matches, the statements corresponding to <code>statementsElse</code> will be executed.</p>
<p>You can have any number of <code>else if</code> statements.
For example, this is valid:</p>
<pre><code class="language-js">if (tasks.length === 0) {
  console.log('Hooray, you completed all your tasks!');
} else if (tasks.length === 1) {
  console.log('Only one task left! Go! Go! Go!');
} else if (tasks.length === 2) {
  console.log('You have two tasks to do.');
} else if (tasks.length === 3) {
  console.log('There are three tasks left.');
} else {
  console.log('You still have some tasks to complete.');
}
</code></pre>
<p>Note that the <code>else</code> block is not required.
If it's missing and none of the conditions are true, nothing will happen.</p>
<h3 id="truthiness-and-falsiness"><a class="header" href="#truthiness-and-falsiness">Truthiness and falsiness</a></h3>
<p>Note that the condition does not necessary have to be boolean as JavaScript will automatically evaluate non-boolean values as &quot;truthy&quot; or &quot;falsy&quot; in boolean contexts.
For example you could write something like this:</p>
<pre><code class="language-js">if (1) {
  console.log('1 is truthy.');
} else {
  console.log('1 is falsy.');
}
</code></pre>
<p>This will print &quot;1 is truthy.&quot; because JavaScript will consider <code>1</code> to be <code>true</code> in this context since <code>1</code> is a <em>truthy</em> value.</p>
<p>Generally speaking, a <strong>truthy</strong> value is considered to be true when encountered in a boolean context (like a condition).
A <strong>falsy</strong> value is considered to be false when encountered in a boolean context.
The most important falsy values are <code>false</code>, <code>0</code>, <code>''</code> (empty string), <code>null</code> and <code>undefined</code>.
Most other values (like <code>1</code>, <code>[]</code> (empty array), <code>[3]</code>, <code>{ example: 'hello' }</code> etc) are truthy.</p>
<p>Try to <em>avoid using non-boolean values in boolean contexts</em> as it can lead to surprising behaviour.
Nevertheless it's still useful to know about truthiness and falsiness, as it will otherwise trip you up in certain cases.</p>
<h3 id="ternary-operator"><a class="header" href="#ternary-operator">Ternary operator</a></h3>
<p>The <strong>ternary operator</strong> takes a <em>condition</em>, an <em>expression to execute if the condition is truthy</em> and an <em>expression to execute if the condition is falsy</em>.
It looks like this:</p>
<pre><code class="language-js">const doneMsg = 'All tasks are done';
const notDoneMsg = 'There are tasks left';
const msg = done ? doneMsg : notDoneMsg;
</code></pre>
<p>The general form is:</p>
<pre><code class="language-js">condition ? expression1 : expression2;
</code></pre>
<p>You can think of the ternary operator as a short, compact way to write an <code>if ... else</code> statement.
It evaluates a condition, and if that condition is <code>true</code> (truthy), the result will have the value of the first expression.
If the condition is <code>false</code> (falsy), the result will have the value of the second expression.</p>
<p>There is a very common thing beginning programmers do with ternary operators which looks like this:</p>
<pre><code class="language-js">const finished = tasks.length === 0 ? true : false;
</code></pre>
<p>You should stop for a second and think about why this is unnecessary.</p>
<p><em>Thought</em> about it?
That's right - the expression <code>tasks.length === 0</code> already evaluates to a boolean value.
You can just write</p>
<pre><code class="language-js">const finished = tasks.length === 0;
</code></pre>
<h3 id="optional-chaining"><a class="header" href="#optional-chaining">Optional chaining</a></h3>
<p>Consider the following task object:</p>
<pre><code class="language-js">const nextTask = {
  summary: 'Read the Next.js book',
  description: 'Read and understand the Next.js book',
  date: {
    day: 8,
    month: 6,
    year: 2022,
  },
};
</code></pre>
<p>Let's say we want to access the day of the task.
We can do this by using <code>nextTask.date.day</code>.
But what if the day does not have to be present, i.e. is <em>optional</em>?
This could happen, for example, because the user didn't enter a task.</p>
<p>The object could look like this:</p>
<pre><code class="language-js">const nextTask = {
  summary: 'Read the Next.js book',
  description: 'Read and understand the Next.js book',
};

// or like this if you were to use `null`
const nextTask = {
  summary: 'Read the Next.js book',
  description: 'Read and understand the Next.js book',
  date: null,
};
</code></pre>
<p>Then <code>nextTask.date.day</code> will fail with</p>
<pre><code>Uncaught TypeError: Cannot read properties of undefined (reading 'day')
</code></pre>
<p>This makes sense since <code>nextTask.date</code> will result in <code>undefined</code> and you can't access a property on <code>undefined</code>.
But let's say we would like to access the day and set it to <code>undefined</code> if the <code>date</code> property is not present.
Then we would need to do something like the following:</p>
<pre><code class="language-js">const day = nextTask.date !== undefined ? nextTask.date.day : undefined;
</code></pre>
<p>Here is what this line does:
If <code>nextTask.date</code> is defined, then <code>nextTask.date.day</code> is assigned to <code>day</code>.
If <code>nextTask.date</code> is not defined, the <code>undefined</code> is assigned to <code>day</code>.</p>
<p>Alternatively we could make use of <code>&amp;&amp;</code> and write:</p>
<pre><code class="language-js">const day = nextTask.date &amp;&amp; nextTask.date.day;
</code></pre>
<blockquote>
<p>This is correct because of the way the <code>&amp;&amp;</code> works.
If the first expression is <code>false</code> (or falsy) then <code>&amp;&amp;</code> doesn't look at the second expression and immediately returns the value of the first expression.
If the first expression is <code>true</code> (or truthy) then <code>&amp;&amp;</code> returns the second expression.</p>
</blockquote>
<p>Generally consider an object that has a bunch of values that may be absent (i.e. <code>null</code> or <code>undefined</code>).
Working with such values will be annoying and only grow more cumbersome with deeper nesting.
To avoid all this JavaScript allows you to do <strong>optional chaining</strong>.
This works by writing <code>?.</code> instead of <code>.</code> when trying to work on something that may be <code>undefined</code>.
The above line would then become:</p>
<pre><code class="language-js">const day = nextTask.date?.day;
</code></pre>
<p>Now the result will be <code>undefined</code> instead of giving you a TypeError.</p>
<h3 id="the-switch-statement"><a class="header" href="#the-switch-statement">The <code>switch</code> Statement</a></h3>
<p>The <code>switch</code> statement evaluates and expression and then attempts to match the result against a number of <code>case</code> clauses.
As soon as <code>case</code> clause is matched all following statements are executed until a <code>break</code> statement is encountered.
If no case matches and a <code>default</code> statement is present, execution will jump to the code after the <code>default</code> statement:</p>
<pre><code class="language-js">switch (tasks.length) {
  case 0:
    console.log('Hooray, you completed all your tasks!');
    break;
  case 1:
    console.log('Only one task left! Go! Go! Go!');
    break;
  case 2:
    console.log('You have two tasks to do.');
    break;
  case 3:
    console.log('There are three tasks left.');
    break;
  default:
    console.log('You still have some tasks to complete.');
}
</code></pre>
<p>Don't forget the <code>break</code> statements, otherwise <em>all the code after the matched case</em> will be executed, which is rarely what you want.</p>
<h3 id="while-loops"><a class="header" href="#while-loops">While Loops</a></h3>
<p>You can use <strong>loops</strong> to repeat an action multiple times (usually depending on some condition).</p>
<p>The <code>while</code> loop allows you to execute a statement as long as a certain condition is true:</p>
<pre><code class="language-js">let counter = 0;

while (counter &lt; 3) {
  console.log(counter);
  counter += 1;
}
</code></pre>
<p>This will log the following lines to the console:</p>
<pre><code>0
1
2
</code></pre>
<p>The <code>do...while</code> loop is similar to the <code>while</code> loop with one subtle difference.
The <code>while</code> loop evaluates the condition <em>before</em> executing the statement.
The <code>do...while</code> loop on the other hand evaluates the condition <em>after</em> executing the statement.</p>
<p>Consider this example:</p>
<pre><code class="language-js">let counter = 0;

do {
  console.log(counter);
  counter++;
} while (counter &lt; 3);
</code></pre>
<p>This will log the following lines to the console:</p>
<pre><code>0
1
2
3
</code></pre>
<p>Because of the way the <code>do...while</code> loop works the statement(s) inside the loop body will always be executed at least once.
The following example will log <code>Hello</code> to the console once despite the condition being <code>false</code>:</p>
<pre><code class="language-js">do {
  console.log('Hello');
} while (false);
</code></pre>
<h3 id="for-loops"><a class="header" href="#for-loops">For Loops</a></h3>
<p>The regular <code>for</code> loop consists of three expressions.</p>
<p>The first expression is the <em>initialization expression</em> and typically initializes some kind of counter.
The second expression is the <em>condition expression</em> and typically checks for some condition.
If the condition is true the statement(s) in the loop body execute, otherwise the loop terminates.
Finally the third expression (sometimes called <em>afterthough expression</em>) is evaluated at the end of each loop iteration and typically advances the counter.</p>
<p>Since a code sample says more than a thousand words here is an example:</p>
<pre><code class="language-js">for (let i = 0; i &lt; 3; i++) {
  console.log(i);
}
</code></pre>
<p>This will log the following lines to the console:</p>
<pre><code>0
1
2
</code></pre>
<p>You can use regular <code>for</code> loops to iterate over arrays:</p>
<pre><code class="language-js">const tasks = ['Task 1', 'Task 2', 'Task 3'];

for (let i = 0; i &lt; tasks.length; i++) {
  console.log(tasks[i]);
}
</code></pre>
<p>This will log the following lines to the console:</p>
<pre><code>Task 1
Task 2
Task 3
</code></pre>
<p>However we will soon learn better ways to perform array iteration.</p>
<h3 id="the-break-and-continue-statements"><a class="header" href="#the-break-and-continue-statements">The <code>break</code> and <code>continue</code> Statements</a></h3>
<p>The <code>break</code> statement gives you a tool to prematurely terminate a loop:</p>
<pre><code class="language-js">let counter = 0;

while (counter &lt; 4) {
  console.log(counter);
  counter += 1;

  if (counter === 2) {
    break;
  }
}
</code></pre>
<p>This will log the following lines to the console:</p>
<pre><code>0
1
</code></pre>
<p>The <code>continue</code> statement terminates the rest of the current iteration and continues with the next iteration:</p>
<pre><code class="language-js">let counter = 0;

while (counter &lt; 4) {
  counter += 1;
  if (counter === 2) {
    continue;
  }

  console.log(counter);
}
</code></pre>
<p>This will log the following lines to the console:</p>
<pre><code>1
3
4
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<div style="text-align: right"> <i> A function with no purpose is like a dragon with no fire. <br> — Ancient Chinese proverb </i> </div>
<h3 id="declaring-and-calling-functions"><a class="header" href="#declaring-and-calling-functions">Declaring and Calling Functions</a></h3>
<p>When programming we often have to perform some common actions over and over again.
For example we might want to get the list of tasks assigned to a user at multiple parts within our software.
Instead of writing code that (essentially) does the same thing multiple times we could use a <strong>function</strong>.</p>
<p>Within the <strong>function definition</strong> we would specify what statements should be executed.
Then we can write a <strong>function call</strong> (also called <strong>function invocation</strong>).
This would then actually execute the statements specified in the definition.
We can simply group common actions into a function and then just call the function whenever we need to execute those actions.</p>
<p>Here is a very simple function definition:</p>
<pre><code class="language-js">function printGreeting() {
  console.log('Hello world!');
}
</code></pre>
<p>Function definitions begin with the <code>function</code> keyword followed by the function name (in this case <code>printGreeting</code>).
We will cover the meaning of the parentheses in a second, but the curly braces contain the <em>body</em> of the function.
These are all the statements that will be executed when the function is called.
In this case we have one statement, which will simply print <code>Hello world!</code> to the console.</p>
<p>You can call / invoke the <code>printGreeting</code> function by writing <code>printGreeting()</code>:</p>
<pre><code class="language-js">printGreeting(); // Hello world!
</code></pre>
<p>You can of course have as many statements as you want inside the function body:</p>
<pre><code class="language-js">function printGreetings() {
  console.log('Hello world!');
  console.log('Hello again!');
}
</code></pre>
<p>These functions are not particularly interesting since they do the exact same thing for every function call.
In this case, we print the exact same greeting(s) every time.
But what if we wanted to print a different greeting depending on the user (containing e.g. the user name)?</p>
<p>We can solve this by defining <strong>function parameters</strong>.
This allows us to pass values into the function, so that the function can adjust its behaviour.
The function parameters go between the parentheses:</p>
<pre><code class="language-js">function printGreeting(user) {
  console.log(`Hello ${user}!`);
}

printGreeting('Jane'); // Hello Jane!
</code></pre>
<p>In this example we have a single parameter called <code>user</code>.
The function prints the greeting with the appropriate user.
Within the function call we then pass the user (in this case <code>Jane</code>) as an <strong>argument</strong> to the function.</p>
<p>We can also <strong>return</strong> values from functions using the <code>return</code> keyword.
This keyword is used to specify the result that the function should produce, which can then be used in other parts of your code.</p>
<p>Here is a function that takes a number and returns the square of it:</p>
<pre><code class="language-js">function square(num) {
  return num * num;
}
</code></pre>
<p>We can now use the function as follows:</p>
<pre><code class="language-js">const squaredNum = square(3);
console.log(squaredNum); // 9
</code></pre>
<h3 id="default-parameters"><a class="header" href="#default-parameters">Default Parameters</a></h3>
<p>You can use <strong>default parameters</strong> to initialize parameters with default values if no values or <code>undefined</code> is passed:</p>
<pre><code class="language-js">function add(x, y = 1) {
  return x + y;
}

console.log(add(1)); // 2
console.log(add(1, undefined)); // 2
</code></pre>
<h3 id="rest-parameters"><a class="header" href="#rest-parameters">Rest Parameters</a></h3>
<p>Sometimes it can be useful to pass an arbitrary number of arguments to a function.
This can be done via <strong>rest parameters</strong>:</p>
<pre><code class="language-js">function sum(...args) {
  let result = 0;
  for (let i = 0; i &lt; args.length; i++) {
    result += args[i];
  }
  return result;
}

console.log(sum()); // 0
console.log(sum(1)); // 1
console.log(sum(1, 2)); // 3
console.log(sum(1, 2, 3)); // 6
</code></pre>
<h3 id="functions-are-objects"><a class="header" href="#functions-are-objects">Functions are Objects</a></h3>
<p>Despite the fact that you get &quot;function&quot; when you use <code>typeof</code> with a function, functions are really just objects.</p>
<p>This means that we can assign functions as variables, pass them to other functions as arguments and do all the other neat things we can do with primitives and objects.
For example we could assign the <code>square</code> function to a variable:</p>
<pre><code class="language-js">const square = function square(num) {
  return num * num;
};
</code></pre>
<p>We could then call this like a regular function by doing e.g. <code>square(3)</code>.</p>
<p>This is called a <strong>function expression</strong>.
Note that the function may be <strong>anonymous</strong> here (i.e. it doesn't have a name).
We could write this:</p>
<pre><code class="language-js">const square = function (num) {
  return num * num;
};
</code></pre>
<p>The syntax for calling such a function is still the same, e.g. we could write <code>square(3)</code>.</p>
<h3 id="arrow-functions"><a class="header" href="#arrow-functions">Arrow Functions</a></h3>
<p>There is a shorthand notation available in JavaScript called the <strong>arrow function</strong> notation.
This notation allows you to omit certain keywords in certain situations.
For example here is how you could rewrite the <code>square</code> function using the arrow function notation:</p>
<pre><code class="language-js">const square = (num) =&gt; num * num;
</code></pre>
<p>This is much shorter and less <em>tedious</em> (haha) indeed.</p>
<p>For an arrow function you only have to specify the parameter(s), followed by an arrow, followed by the returned value.
If you have multiple parameters, you need to put them inside parentheses:</p>
<pre><code class="language-js">const add = (x, y) =&gt; x + y;
</code></pre>
<p>You can also have multiple statements in the function body, but then you have to specify the <code>return</code> keyword and surround the statements with curly braces:</p>
<pre><code class="language-js">const printAndGreet = (user) =&gt; {
  const greeting = `Hello ${user}`;
  console.log(greeting);
  return greeting;
};
</code></pre>
<p>As you can see this is not too different from a regular function declaration or expression (unlike the <code>square</code> function, where the arrow notation was much shorter).
It is therefore common practice to only use arrow functions for short functions like <code>square</code>.
However this is again just convention.</p>
<p>One thing you might have noticed, is that we only showed you <strong>arrow function expressions</strong>.
This is not an oversight but stems from the fact that there is no way to write a <strong>function declaration</strong> with the <strong>arrow function notation</strong>.</p>
<h3 id="instance-methods"><a class="header" href="#instance-methods">Instance Methods</a></h3>
<p>An <strong>instance method</strong> (sometimes methods for short) is a function which is a property of an object.</p>
<pre><code class="language-js">const greeter = {
  greet: function () {
    console.log('Hello, world!');
  },
};
</code></pre>
<p>You can call a method like this:</p>
<pre><code class="language-js">greeter.greet(); // Hello, world!
</code></pre>
<p>Methods can refer to the properties of an object using the <code>this</code> keyword which is simply a reference to the current object:</p>
<pre><code class="language-js">const task = {
  id: 1,
  summary: 'Read the MERN book',
  description: 'Read and understand the MERN book.',
  longDescription: function () {
    return `${this.summary}(ID = ${this.id}): ${this.description}`;
  },
};
</code></pre>
<p>You can call the method by doing <code>task.longDescription()</code>.
This would print:</p>
<pre><code>Read the MERN book(ID = 1): Read and understand the MERN book.
</code></pre>
<p>Methods can also change properties of objects.</p>
<p>We will not dwell on methods for too long, since we will not use them all that often as this would lead to a <em>ghastly</em> thing called <em>Object-Oriented Programming</em> (OOP for short).
Instead we want you to think <em>functionally</em>, which is what the next section will be about.</p>
<blockquote>
<p>Inevitable disclaimer for <em>certain</em> Java/C#/... people:
The sentence about OOP was a joke and used correctly, OOP has its merits.
We just wanted to be funny.
We're very sorry about that and will now perform the appropriate penance procedure.</p>
</blockquote>
<h3 id="static-methods"><a class="header" href="#static-methods">Static Methods</a></h3>
<p>Static methods are methods that are like regular functions which need to be prefixed with a name.
For example you can use <code>Number.parseInt</code> to parse a string argument:</p>
<pre><code class="language-js">console.log(Number.parseInt('123')); // 123
</code></pre>
<p>Static methods will become important in a few sections, when we introduce a few useful static methods that deal with arrays and objects.</p>
<blockquote>
<p>Our definition of static methods is a bit ugly because the technically correct definition would require the concept of a class, which we don't have yet.</p>
</blockquote>
<h3 id="scope"><a class="header" href="#scope">Scope</a></h3>
<p>The <strong>scope</strong> of a variable is the part of the program in which it can be referenced.
There are three scopes that are important right now - the <strong>global scope</strong>, the <strong>function scope</strong> and the <strong>block scope</strong>.</p>
<blockquote>
<p>Later we will also learn about the module scope.</p>
</blockquote>
<p>Consider the following script:</p>
<pre><code class="language-js">let inGlobalScope = 0;

function f() {
  let inFunctionScope = 1;

  if (true) {
    let inBlockScope = 2;
  }
}
</code></pre>
<p>The variable <code>inGlobalScope</code> is in global scope and can be accessed by the entire script.
For example all of these <code>console.log</code> calls will correctly print the value of the variable:</p>
<pre><code class="language-js">let inGlobalScope = 0;

function f() {
  let inFunctionScope = 1;

  if (true) {
    let inBlockScope = 2;

    console.log(inGlobalScope);
  }

  console.log(inGlobalScope);
}

f();
console.log(inGlobalScope);
</code></pre>
<p>This will log:</p>
<pre><code>0
0
0
</code></pre>
<p>The variable <code>inFunctionScope</code> is accessible only from within the function <code>f</code>:</p>
<pre><code class="language-js">let inGlobalScope = 0;

function f() {
  let inFunctionScope = 1;

  if (true) {
    let inBlockScope = 2;

    console.log(inFunctionScope);
  }

  console.log(inFunctionScope);
}

f();
console.log(inFunctionScope); // This will result in an error!
</code></pre>
<p>This will log:</p>
<pre><code>1
1
file.js:16
console.log(inFunctionScope);
            ^

ReferenceError: inFunctionScope is not defined
</code></pre>
<p>Finally the variable <code>inBlockScope</code> is in block scope and is available only in the block of the <code>if</code> statement:</p>
<pre><code class="language-js">let inGlobalScope = 0;

function f() {
  let inFunctionScope = 1;

  if (true) {
    let inBlockScope = 2;

    console.log(inBlockScope);
  }

  console.log(inBlockScope); // This will result in an error!
}

f();
</code></pre>
<p>This will log:</p>
<pre><code>2
file.js:12
  console.log(inBlockScope); // This will result in an error!
              ^

ReferenceError: inBlockScope is not defined
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h2>
<div style="text-align: right"> <i> A wise coder once said, 'An error ignored is like an ancestor forgotten – it will return with a vengeance.' <br> — Ancient Chinese proverb </i> </div>
<h3 id="the-throw-statement"><a class="header" href="#the-throw-statement">The <code>throw</code> Statement</a></h3>
<p>The <code>throw</code> statement allows you to throw an exception:</p>
<pre><code class="language-js">throw 'Something bad happened';
</code></pre>
<p>Usually error objects are thrown:</p>
<pre><code class="language-js">throw new Error('Something bad happened');
</code></pre>
<blockquote>
<p>The <code>new</code> operator creates a new object (of some class).
We will revisit this operator in more detail later.</p>
</blockquote>
<h3 id="the-trycatch-statement"><a class="header" href="#the-trycatch-statement">The <code>try...catch</code> Statement</a></h3>
<p>The <code>try...catch</code> statement specifies a block of statements to execute &quot;normally&quot; and a block to execute if the &quot;normal&quot; block throws an exception.
The normal block is contained in a <code>try</code> block while the &quot;exception&quot; block is contained in a <code>catch</code> block.
If any statement in the <code>try</code> throws an exception, code execution jumps to the <code>catch</code> block immediately - the rest of the <code>try</code> block is ignored:</p>
<pre><code class="language-js">function divide(x, y) {
  if (y === 0) {
    throw new Error('Division by 0 is a bad idea');
  }
}

try {
  console.log('try block');
  divide(3, 0);
} catch (e) {
  console.log('catch block');
}
</code></pre>
<p>This will log:</p>
<pre><code>try block
catch block
</code></pre>
<h3 id="error-objects"><a class="header" href="#error-objects">Error Objects</a></h3>
<p>Error objects have a <code>name</code> and a <code>message</code> property which can be used to gather information when an error is thrown:</p>
<pre><code class="language-js">function divide(x, y) {
  if (y === 0) {
    throw new Error('Division by 0 is a bad idea');
  }
}

try {
  console.log('try block');
  divide(3, 0);
} catch (e) {
  console.log('catch block');
  console.log(e.name);
  console.log(e.message);
}
</code></pre>
<p>This will log:</p>
<pre><code>try block
catch block
Error
Division by 0 is a bad idea
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="basic-data-structures"><a class="header" href="#basic-data-structures">Basic Data Structures</a></h2>
<div style="text-align: right"> <i> A set is like a wise emperor's court: it welcomes many, but never the same face twice. <br> — Ancient Chinese proverb </i> </div>
<h3 id="more-on-strings"><a class="header" href="#more-on-strings">More on Strings</a></h3>
<p>We already learned about strings (which represent sequences of characters).
We also learned that they can be concatenated using the <code>+</code> operator and that you can get their length using the <code>length</code> property.
However this is rarely enough to efficiently work with strings.
Luckily, strings offer a wide range of additional functionality for pretty much every use case you will ever need - in this subsection we will briefly look at some of it.</p>
<p>First, you can access individual characters using the <code>charAt</code> functionm or array brackets:</p>
<pre><code class="language-js">const str = 'Hello';
console.log(str[1]); // e
console.log(str.charAt(1)); // e
</code></pre>
<p>Remember that there is no special character data type in JavaScript, i.e. <code>typeof str[1]</code> is simply <code>'string'</code>.</p>
<p>Strings also offer a wide range of methods, most of which are self-explanatory:</p>
<pre><code class="language-js">const str = 'Hello';
console.log(str.concat(' world')); // Hello world
console.log(str.includes('el')); // true
console.log(str.startsWith('He')); // true
console.log(str.endsWith('llo')); // true
console.log(str.indexOf('l')); // 2
console.log(str.lastIndexOf('l')); // 3
console.log(str.substring(1, 3)); // el
console.log(str.toLowerCase()); // hello
console.log(str.toUpperCase()); // HELLO
</code></pre>
<p>The <code>trim</code> method allows you to remove whitespace from the start and the end of a string.
This is especially useful when processing user input where usually accidental whitespace at the start and the end of a string is irrelevant:</p>
<pre><code class="language-js">console.log(' Hello '.trim()); // Hello
</code></pre>
<p>The <code>split</code> method splits the string into substring by a delimiter.
For example here is how you might split a comma-separated list into its items:</p>
<pre><code class="language-js">console.log('Task 1, Task 2, Task 3, Task 4'.split(','));
</code></pre>
<p>This will result in the following array:</p>
<pre><code>[ 'Task 1', ' Task 2', ' Task 3', ' Task 4' ]
</code></pre>
<p>Note that the whitespace is not removed by the <code>split</code> method, you would need to iterate over the resulting array and use the <code>trim</code> method on each string to accomplish that.</p>
<h3 id="more-on-arrays"><a class="header" href="#more-on-arrays">More on Arrays</a></h3>
<p>We already learned how to construct arrays and how to work with individual array elements.
However just like strings, arrays have a few additional methods that will often come in handy.</p>
<p>You can check if an object is an array using the <code>Array.isArray</code> method:</p>
<pre><code class="language-js">console.log(Array.isArray([1, 2, 3])); // true
console.log(Array.isArray('123')); // false
</code></pre>
<p>You can create an array from an object that is convertible to an array by using <code>Array.from</code>:</p>
<pre><code class="language-js">console.log(Array.from('123')); // [ '1', '2', '3' ]
</code></pre>
<p>You can create an array from a variable number of arguments by using <code>Array.of</code>:</p>
<pre><code class="language-js">console.log(Array.of(1, 2, 3)); // [ 1, 2, 3 ]
</code></pre>
<p>Just like strings, arrays have a <code>concat</code>, <code>includes</code>, <code>indexOf</code> and <code>lastIndexOf</code> method:</p>
<pre><code class="language-js">console.log([1, 2, 3].concat([4, 5, 6])); // [ 1, 2, 3, 4, 5, 6 ]
console.log([1, 2, 3].includes(2)); // true
console.log(['a', 'b', 'b', 'c'].indexOf('b')); // 1
console.log(['a', 'b', 'b', 'c'].lastIndexOf('b')); // 2
</code></pre>
<p>The <code>join</code> method allows you to concatenate all elements in an array to a string, where the elements are separated by a delimiter:</p>
<pre><code class="language-js">console.log(['H', 'e', 'l', 'l', 'o'].join('')); // Hello
console.log(['H', 'e', 'l', 'l', 'o'].join(',')); // H,e,l,l,o
</code></pre>
<p>You can use the <code>push</code> method to add a new element to the end of an array:</p>
<pre><code class="language-js">const arr = [1, 2, 3];
arr.push(4);
console.log(arr); // [ 1, 2, 3, 4 ]
</code></pre>
<p>The <code>pop</code> element removes the last element of an array:</p>
<pre><code class="language-js">const arr = [1, 2, 3];
arr.pop();
console.log(arr); // [ 1, 2 ]
</code></pre>
<p>The <code>reverse</code> method allows you to reverse the element of an array:</p>
<pre><code class="language-js">const arr = [1, 2, 3];
arr.reverse();
console.log(arr); // [ 3, 2, 1 ]
</code></pre>
<p>Arrays can be nested, resulting in multidimensional arrays.
Accessing an element of such a nested array results in an array (of a lower dimension).
Nested arrays can be flattened with the <code>flat</code> method:</p>
<pre><code class="language-js">const nestedArray = [
  [1, 2, 3],
  [4, 5, 6],
  [7, 8, 9],
];
console.log(nestedArray[1]); // [ 4, 5, 6 ]
console.log(nestedArray[1][2]); // 6
console.log(nestedArray.flat()); // [ [ 1, 2, 3 ], [ 4, 5, 6 ], [ 7, 8, 9 ] ]
</code></pre>
<h3 id="the-forof-loop"><a class="header" href="#the-forof-loop">The <code>for...of</code> Loop</a></h3>
<p><code>For..of</code> loops allow you to <em>iterate over arrays and strings</em> (and some other things that we will cover later on) and perform a task for each element / character.
Let's say you want to print all tasks from a list named <code>tasks</code>.
You could do it like this:</p>
<pre><code class="language-js">const tasks = ['Task 1', 'Task 2', 'Task 3'];
for (let task of tasks) {
  console.log(task);
}
</code></pre>
<p>This would print</p>
<pre><code>Task 1
Task 2
Task 3
</code></pre>
<p>As we already mentioned, you can use a <code>for..of</code> loop to iterate over a string:</p>
<pre><code class="language-js">const str = 'Task';
for (let char of str) {
  console.log(char);
}
</code></pre>
<p>This would print each character of the string, i.e.:</p>
<pre><code>T
a
s
k
</code></pre>
<p>The general syntax of a <code>for..of</code> loop is</p>
<pre><code class="language-js">for (let variable of arrayOrString) {
  statements;
}
</code></pre>
<p>It should be noted that if you don't change the variable inside the loop, you can and should also declare it as <code>const</code>.
Our first example could therefore be rewritten to</p>
<pre><code class="language-js">const tasks = ['Task 1', 'Task 2', 'Task 3'];
for (const task of tasks) {
  console.log(task);
}
</code></pre>
<h3 id="more-on-objects"><a class="header" href="#more-on-objects">More on Objects</a></h3>
<p>Objects have methods to retrieve their keys and their values:</p>
<pre><code class="language-js">const task = {
  id: 1,
  summary: 'Read the Next.js book',
  description: 'Read and understand the Next.js book.',
};

console.log(Object.keys(task)); // [ 'id', 'summary', 'description' ]
console.log(Object.values(task)); // [ 1, 'Read the Next.js book', 'Read and understand the Next.js book.' ]
</code></pre>
<p>You can also use the <code>entries</code> method to retrieve the key-value pairs:</p>
<pre><code class="language-js">const task = {
  id: 1,
  summary: 'Read the Next.js book',
  description: 'Read and understand the Next.js book.',
};

console.log(Object.entries(task));
</code></pre>
<p>This will log:</p>
<pre><code>[
  [ 'id', 1 ],
  [ 'summary', 'Read the Next.js book' ],
  [ 'description', 'Read and understand the Next.js book.' ]
]
</code></pre>
<h3 id="the-forin-loop"><a class="header" href="#the-forin-loop">The <code>for...in</code> Loop</a></h3>
<p>The <code>for...in</code> loop allows you to iterate over the properties of an object:</p>
<pre><code class="language-js">const task = {
  id: 1,
  summary: 'Read the Next.js book',
  description: 'Read and understand the Next.js book.',
};

for (const prop in task) {
  console.log(prop);
}
</code></pre>
<p>This will log:</p>
<pre><code>id
summary
description
</code></pre>
<h3 id="maps"><a class="header" href="#maps">Maps</a></h3>
<p>A <code>Map</code> object is a collection of a key-value pairs:</p>
<pre><code class="language-js">const capitals = new Map([
  ['Germany', 'Berlin'],
  ['France', 'Paris'],
]);
capitals.set('Spain', 'Madrid');
console.log(capitals.get('France')); // Paris
console.log(capitals.size); // 3
capitals.delete('France');
console.log(capitals.has('France')); // false
</code></pre>
<p>At first glance maps appear to be very similar to objects, however there are a few imporant differences.
First, it is very easy to get the size of a map (using the <code>size</code> property), whereas with objects you would need to keep track of the size manually.
Second, the keys of an object are usually strings, whereas with maps they can have any data type.</p>
<p>It is usually recommended to use maps if the key-value pairs are unknown until run time (for example because they are determined by user input), all keys have the same type and all values have the same type.</p>
<h3 id="sets"><a class="header" href="#sets">Sets</a></h3>
<p>A <code>Set</code> object is a collection of unique values:</p>
<pre><code class="language-js">const values = new Set([1, 2, 3]);
values.add(4);
console.log(values.has(2)); // true
console.log(values.size); // 4
values.delete(3);
</code></pre>
<p>Note that all values in a set must be unique, i.e. duplicates are not allowed:</p>
<pre><code class="language-js">const values = new Set([1, 2, 3]);
values.add(2);
console.log(values); // Set(3) { 1, 2, 3 }
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="functional-thinking"><a class="header" href="#functional-thinking">Functional Thinking</a></h2>
<div style="text-align: right"> <i> Gold can't be pure, but functions can. <br> — Ancient Chinese proverb </i> </div>
<h3 id="pure-functions"><a class="header" href="#pure-functions">Pure Functions</a></h3>
<p>A function is called <strong>pure</strong> if its outputs (the returned values) depend only on its inputs and if the function does not have any <em>side effects</em> (i.e. it doesn't change program state and doesn't write anything to an external data source).</p>
<p>Here is an example of a pure function:</p>
<pre><code class="language-js">const square = (x) =&gt; x * 2;
</code></pre>
<p>Indeed, the output of <code>square</code> depends only on its input and nothing else.
In addition, <code>square</code> doesn't produce any side effects.</p>
<p>Here is an example of a function that is <em>not</em> pure:</p>
<pre><code class="language-js">const x = 2;
const addImpure = (y) =&gt; x + y;
</code></pre>
<p>The output of this function doesn't depend just on its input variables, but also on a global variable <code>x</code>.</p>
<p>Here is another function that's not pure:</p>
<pre><code class="language-js">const hello = () =&gt; console.log('Hello, world!');
</code></pre>
<p>The <code>hello</code> function has a side effect - it outputs something to the console.</p>
<p>Why do we care about all of this?
The fundamental reason is that <em>pure functions are very easy to reason about</em>.
There is practically no room for suprising behaviour.</p>
<p>Consider the above <code>square</code> function.
It takes an input and produces an output that is dependent <em>only on the input</em>.
It doesn't matter what the rest of the program is doing - the function will always produce identical outputs for identical inputs.</p>
<blockquote>
<p>If you are mathematically inclined, pure functions are basically regular mathematical functions.
They take an input which is a member of some domain and produce an output which is a member of some codomain.
For example the <code>square</code> function is simply the function f: A → B, f(x) = x² where A and B are certain sets of numbers.
Note that A and B are emphatically <em>not</em> equal to the set of real numbers since of course JavaScript cannot represent every possible real number (due to underlying hardware limitatations - computers can't possibly store arbitrarily large numbers).</p>
</blockquote>
<p>All of the above is not true for the <code>addImpure</code> function.
This function can produce <em>different</em> outputs for identical inputs.
This makes it hard very hard to troubleshoot if there is an error.
After all you may not know what the (global) state of the program was when the error occured.</p>
<p>Closely related is another very nice property of pure functions - they are <em>easily testable</em>.
There is no need to fake some global state - as the function only takes an input and produces some output.
Therefore all you need to do is to call the function, pass some input and check whether the output matches the expected output.
We will return to this <em>extensively</em> when we cover testing.</p>
<h3 id="immutability"><a class="header" href="#immutability">Immutability</a></h3>
<p>A variable is <strong>immutable</strong> if it is unchangeable.
Otherwise we call it <strong>mutable</strong>.
The more mutability we have inside our program the more can go wrong since it's hard to reason about (global) state.</p>
<p>This is where the alert reader might interject - after all, isn't the purpose of a program to do something?
And how can we achieve that if we don't change state?</p>
<p>A fundamental correction is in order here - the purpose of every program is not <em>to do something</em>, but to <em>manipulate data</em>.
You can of course manipulate data directly by mutating global state.</p>
<p>Consider the following <code>task</code> object:</p>
<pre><code class="language-js">const task = {
  id: 1,
  summary: 'Read the Next.js book',
  description: 'Read and understand the Next.js book.',
};
</code></pre>
<p>Now let's say we want to change the summary:</p>
<pre><code class="language-js">task.summary = 'Next.js book';
</code></pre>
<p>This works for simple objects and changes.
But this will quickly become brittle with growing complexity.
<em>Reasoning about state and state changes is really hard.</em></p>
<p>Instead we can create copies of the objects which contain the changes we need:</p>
<pre><code class="language-js">const newTask = {
  ...task,
  summary: 'Next.js book',
};
</code></pre>
<p>Note that we didn't change the original object, but created a copy of the object with a different summary.</p>
<p>Immutability and pure functions are closely linked.
You want to have immutable datastructures which get passed through pure functions to compute results.</p>
<h3 id="higher-order-functions"><a class="header" href="#higher-order-functions">Higher-order functions</a></h3>
<p>We already talked about the fact that JavaScript functions are just objects.
We even showed an example of how you can assign a function to a variable:</p>
<pre><code class="language-js">const square = (num) =&gt; num * num;
</code></pre>
<p>However we can do much more. Since functions are just objects we can <em>pass them to other functions</em>.
For example let's define a function that repeats some action <code>n</code> times:</p>
<pre><code class="language-js">function repeat(fun, n) {
  for (let i = 0; i &lt; n; i++) {
    fun();
  }
}
</code></pre>
<p>We can use it like this:</p>
<pre><code class="language-js">const hello = () =&gt; console.log('Hello, world!');
repeat(hello, 4);
</code></pre>
<p>This will output:</p>
<pre><code>Hello, world!
Hello, world!
Hello, world!
Hello, world!
</code></pre>
<p>Note that the <code>repeat</code> function doesn't care what <code>fun</code> is - <code>fun</code> could be a simple <code>console.log</code> or a function which produces a simulated universe.
All the <code>repeat</code> function does is to simply repeat <code>fun</code> the specified number of times.</p>
<p>Functions which take (or return) functions are called <strong>higher-order functions</strong>.</p>
<h3 id="the-trinity-of-map-reduce-and-filter"><a class="header" href="#the-trinity-of-map-reduce-and-filter">The trinity of map, reduce and filter</a></h3>
<p>We now introduce the three most important higher-order functions - <code>map</code>, <code>reduce</code> and <code>filter</code>.
These functions allow you to perform an <em>incredibly</em> rich set of operations on arrays.</p>
<blockquote>
<p>We want to use this blockquote to emphasize <em>how often</em> you will be using <code>map</code>, <code>reduce</code> and <code>filter</code>.</p>
</blockquote>
<p>We will use two running examples throughout the section - an array of <code>numbers</code> and an array of <code>tasks</code>:</p>
<pre><code class="language-js">const numbers = [1, 2, 3, 4];
const tasks = [
  {
    id: 1,
    summary: 'Read the Next.js book',
    description: 'Read and understand the Next.js book.',
    timeLogged: 60,
    status: 'In progress',
  },
  {
    id: 2,
    summary: 'Write a task app',
    description: 'Write an awesome task app.',
    timeLogged: 0,
    status: 'Todo',
  },
  {
    id: 3,
    summary: 'Think of a funny joke',
    description: 'Come up with a funny joke to lighten the mood.',
    timeLogged: 120,
    status: 'In progress',
  },
];
</code></pre>
<p>The <code>map</code> function takes one argument - a function <code>f</code> to apply to every element of the array.
It returns the array resulting from applying <code>f</code> to every element of the original array.</p>
<p>Let's say we wanted to square all the elements of <code>numbers</code>.
We could write something like this:</p>
<pre><code class="language-js">const result = [];
for (const number of numbers) {
  result.push(number ** 2);
}
</code></pre>
<p>This is ugly and (you guessed it) <em>tedious</em>.
Instead we can (and should) use the <code>map</code> function:</p>
<pre><code class="language-js">const result = numbers.map((number) =&gt; number ** 2);
</code></pre>
<p>The <code>result</code> array has the following content:</p>
<pre><code class="language-js">[1, 4, 9, 16];
</code></pre>
<p>Consider another example.
Let's say we wanted to add a long description to all the <code>tasks</code> based on the summary and the description.
We can use the <code>map</code> function again:</p>
<pre><code class="language-js">const longTasks = tasks.map((task) =&gt; ({
  ...task,
  longDescription: `${task.summary}: ${task.description}`,
}));
</code></pre>
<blockquote>
<p>You can see why the spread syntax is so handy.
Thanks to this <em>incredible innovation</em>, you only need to explicitly specify the object parts where something interesting happens.</p>
</blockquote>
<p>The <code>longTasks</code> array will look like this:</p>
<pre><code class="language-js">[
  {
    id: 1,
    summary: 'Read the Next.js book',
    description: 'Read and understand the Next.js book.',
    timeLogged: 60,
    status: 'In progress',
    longDescription: 'Read the Next.js book: Read and understand the Next.js book.',
  },
  {
    id: 2,
    summary: 'Write a task app',
    description: 'Write an awesome task app.',
    timeLogged: 0,
    status: 'Todo',
    longDescription: 'Write a task app: Write an awesome task app.',
  },
  {
    id: 3,
    summary: 'Think of a funny joke',
    description: 'Come up with a funny joke to lighten the mood.',
    timeLogged: 120,
    status: 'In progress',
    longDescription: 'Think of a funny joke: Come up with a funny joke to lighten the mood.',
  },
];
</code></pre>
<p>The <code>filter</code> function allows you to select elements from an array based on some condition.
It takes a function <code>f</code> which returns <code>true</code> or <code>false</code> for some input(s).
All elements for which <code>f</code> returns <code>true</code> are kept, all elements for which <code>f</code> returns <code>false</code> are thrown away.</p>
<blockquote>
<p>A function which returns <code>true</code> or <code>false</code> is commonly referred to as a <em>predicate</em>.</p>
</blockquote>
<p>For example let's say we want to select all even elements from <code>numbers</code>.
Here is the non-functional way:</p>
<pre><code class="language-js">const result = [];
for (const number in numbers) {
  if (number % 2 === 0) {
    result.push(number ** 2);
  }
}
</code></pre>
<p>Ugh!
I don't even want to look at that.
For loops and if statements all over the place.
Let's rest our eyes and consider the <em>functional</em> approach:</p>
<pre><code class="language-js">const result = numbers.filter((number) =&gt; number % 2 === 0);
</code></pre>
<p>Consider another example - we might want to select all tasks from the <code>tasks</code> array which have the status 'Todo'.
Think for a moment what the appropriate predicate would be.</p>
<p>That's right, it looks like this:</p>
<pre><code class="language-js">const todoTasks = tasks.filter((task) =&gt; task.status === 'Todo');
</code></pre>
<p>Finally there is the <code>reduce</code> function which (you guessed it) <em>reduces</em> an array to a single value.
The <code>reduce</code> function moves over an array from left to right and keeps track of a value (a so called <em>accumulator</em>).
At every element of the array it recomputes the accumulator based on a function <code>f</code> (this function <code>f</code> is the first argument of the <code>reduce</code> function).
The second argument of the reduce function is the initial value.</p>
<p>Here is how we might compute the sum of an array:</p>
<pre><code class="language-js">const sum = numbers.reduce((acc, curr) =&gt; acc + curr, 0);
</code></pre>
<p>Basically this is what happens:
The <code>reduce</code> function looks at <code>acc</code> (which is the initial value, i.e. <code>0</code> at the beginning) and <code>curr</code> (which is <code>1</code>), produces <code>acc + curr</code>, and sets this as the new accumulator (i.e. the new accumulator is <code>1</code>).
Next the <code>reduce</code> function again looks at <code>acc</code> (which is now <code>1</code>) and <code>curr</code> (which is <code>2</code>), produces <code>acc + curr</code>, and sets this as the new accumulator (i.e. the new accumulator is <code>3</code>).
The next update results in the accumulator being <code>6</code> and the final update result in the accumulator being <code>10</code>.
Therefore <code>sum</code> will be <code>10</code>.</p>
<p>For another example, let's say we would like to compute the total logged time (i.e. the time logged for all the tasks combined).
This would look like this:</p>
<pre><code class="language-js">const totalTime = tasks.reduce((task, curr) =&gt; task.loggedTime + curr, 0);
</code></pre>
<blockquote>
<p>We recommend that you try to reason through this <code>reduce</code> for a deeper understanding of this topic.</p>
</blockquote>
<h3 id="more-higher-order-functions"><a class="header" href="#more-higher-order-functions">More Higher-Order Functions</a></h3>
<p>While <code>map</code>, <code>filter</code> and <code>reduce</code> are the best known higher-order functions, JavaScript defines many more.
It is worthwhile to get to know them since they will make a lot of tasks easier.</p>
<p>The <code>find</code> method returns the first element in an array that satisfies some predicate:</p>
<pre><code class="language-js">const numbers = [2, 8, 4, 12, 6, 10];
console.log(numbers.find((x) =&gt; x &gt; 9)); // 12
</code></pre>
<p>The <code>findIndex</code> method is similar, except that it returns the <em>index</em> of the first element in an array that satisfies some predicate:</p>
<pre><code class="language-js">const numbers = [2, 8, 4, 12, 6, 10];
console.log(numbers.findIndex((x) =&gt; x &gt; 9)); // 3
</code></pre>
<p>The <code>every</code> method checks whether all elements in an array satisfy a predicate:</p>
<pre><code class="language-js">const numbers = [2, 8, 4, 12, 6, 10];
console.log(numbers.every((x) =&gt; x % 2 === 0)); // true
console.log(numbers.every((x) =&gt; x &lt; 9)); // false
</code></pre>
<p>The <code>some</code> method checks whether there is at least one element in an array that satisfies a predicate:</p>
<pre><code class="language-js">const numbers = [2, 8, 4, 12, 6, 10];
console.log(numbers.some((x) =&gt; x &lt; 9)); // true
console.log(numbers.some((x) =&gt; x % 2 !== 0)); // false
</code></pre>
<p>The <code>forEach</code> method executes some function for every array element.
This is very similar to a for loop (hence the name):</p>
<pre><code class="language-js">const numbers = [2, 8, 4, 12, 6, 10];
numbers.forEach((x) =&gt; console.log(x));
</code></pre>
<p>This will log:</p>
<pre><code>2
8
4
12
6
10
</code></pre>
<h3 id="sorting-arrays"><a class="header" href="#sorting-arrays">Sorting Arrays</a></h3>
<p>The <code>sort</code> method can be used to sort the elements of an array:</p>
<pre><code class="language-js">const tasks = ['Task 2', 'Task 1', 'Task 3'];
tasks.sort();
console.log(tasks); // [ 'Task 1', 'Task 2', 'Task 3' ]
</code></pre>
<p>The default sort order is ascending and elements are sorted by converting them to strings and then sorting the strings lexicographically.
However this may not be what you want, especially when you're trying to sort numbers:</p>
<pre><code class="language-js">const numbers = [2, 8, 4, 12, 6, 10];
numbers.sort();
console.log(numbers); // [ 10, 12, 2, 4, 6, 8 ]
</code></pre>
<p>If you want to sort differently, you need to specify a comparison function:</p>
<pre><code class="language-js">const numbers = [2, 8, 4, 12, 6, 10];
numbers.sort((x, y) =&gt; x - y);
console.log(numbers); // [ 2, 4, 6, 8, 10, 12 ]
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="asynchronous-programming"><a class="header" href="#asynchronous-programming">Asynchronous Programming</a></h2>
<div style="text-align: right"> <i> - proverb Ancient Chinese <br> is hard Asynchronous programming </i> </div>
<h3 id="why-asynchronous-programming"><a class="header" href="#why-asynchronous-programming">Why Asynchronous Programming?</a></h3>
<p>We often need to execute long-running operations (especially in web development).
For example, we might need to fetch a resource from a server or request camera access from a user.
In the first case, we need to wait for all the network packets to arrive, which might take a long time depending on your network connectivity.
In the second case, we need to wait for the user to grant us access to the resource we require.</p>
<p>We want do be able to do this without &quot;blocking&quot;.
To accomplish this, we need to break with the &quot;synchronous&quot; programming model where statements are executed one after another.</p>
<p>Consider the following example:</p>
<pre><code class="language-js">function getTask(taskId) {
  return `Task with ID ${taskId}`;
}

const task = getTask(0);
console.log(task);
</code></pre>
<p>The <code>getTask</code> function is a <strong>synchronous function</strong>.
This means that the calling code (i.e. <code>const task = getTask(0)</code>) has to wait until <code>getTask</code> has finished its work to continue.
That is all fine and dandy here, given that <code>getTask</code> should (hopefully) complete its &quot;work&quot; very fast.</p>
<p>But what if <code>getTask</code> represents a long-running operation, like retrieving a task from a server?</p>
<pre><code class="language-js">function getTask(taskId) {
  return retrieveTaskFromServer(taskId);
}

const task = getTask(0);
console.log(task);
</code></pre>
<p>Now the calling code has to wait for the request to complete before it can do anything else.
This will become a huge problem in the browser environment, given that synchronous functions like <code>getTask</code> are &quot;blocking&quot;.
Therefore as long as <code>getTask</code> is executing, no other code will be able to run, including code that handles user events.
This means that the user will not be able to select text, click buttons or do anything else with the website, i.e. the website &quot;hangs&quot;.</p>
<p>Of course we want to avoid such a nuisance since this will result in the much dreaded <em>negative user experience</em>.</p>
<blockquote>
<p>If you ever clicked a button on a website and everything just freezes for three seconds, this often means that some developer wrote a synchronous function that handles a long-running task.</p>
</blockquote>
<p>We need a mechanism to start a (potentially) long-running task and still be able to do other things (like respond to user events) instead of blocking until the task is finished.
Once the task is completed, our program needs to be notified with result.</p>
<p>Here is a step-by-step breakdown of what we want to accomplish:</p>
<ol>
<li>Call a function that starts a long-running operation.</li>
<li>The function should return immediately, so that the &quot;main&quot; program is able to do something else.</li>
<li>Once the long-running operation is completed, the &quot;main&quot; program should be notified.</li>
</ol>
<blockquote>
<p>In case you think to yourself right now &quot;this all sounds very complicated and when do I need long-running tasks anyway, maybe I'll skip this section&quot; - don't.
Almost every project you'll write (essentially when doing web development) will contain asynchronous code.</p>
</blockquote>
<h3 id="promises"><a class="header" href="#promises">Promises</a></h3>
<p>The central object in asynchronous JavaScript is the <strong>promise</strong>.
A promise represents the eventual completion (or failure) of an asynchronous operation.
Now that you are sufficiently confused by this opaque definition, we can move on to an actually useful explanation.</p>
<p>Basically a promise is a like an IOU document - it &quot;promises&quot; you that it is currently working on some long-running operation and that it will eventually get back to you with the result of that long-running operation.</p>
<p>To give another metaphor, consider the process of ordering a hamburger at SyncMcBurgers.
For simplicity (and improved metaphormaking) we will pretend that SyncMcBurgers only has one counter.</p>
<p>In a perfect “synchronous” world, you would walk up, tell your order to the hardworking employee of the restaurant and then he would immediately create the hamburger right then and there.
However, unless SyncMcBurgers has rediscovered the ancient secret art of instant burgermaking using dark magic, the preparation of a hamburger does not happen immediately (it's a &quot;long-running operation&quot;).</p>
<p>Therefore, in reality the following process happen when you try to order something at SyncMcBurgers.
You walk up to the counter and the employee takes your order (a hamburger) and starts preparing the hamburger right there at the counter in front of you.
In the meantime, you have to wait at the counter until the hamburger is finished.</p>
<p>This process has an obvious problem - both you and the employee now block the entire restaurant from doing anything else (remember, there is only a single counter).
No other customer can try to order anything (because you are standing at the counter) and no other employee can take an order anyway (because the employee serving you is blocking the counter with his hamburger preparation).
This doesn't sound like a recipe for success.</p>
<p>Luckily, there is a change in management and SyncMcBurgers rebrands as AsyncMcBurgers.
The important difference between SyncMcBurgers and the new and improved AsyncMcBurgers is a change in the burger ordering process.</p>
<blockquote>
<p>There is still only one counter though.
After all the managers at AsyncMcBurgers want to respect our metaphor.</p>
</blockquote>
<p>The new process looks as follows.
You walk up to the counter, an employee takes your order and hands it to the kitchen.
Instead of the burger, he hands you receipt, which is a <em>promise</em> (get it?) that you will get your burger after some time.
Now you don't have to stand in front of the counter waiting for the employee to finish.
Instead you take your receipt, leave the counter and the next customer may order.</p>
<p>In case you missed it, this is how every normal fast food restaurant in the world operates - and for good reason (except that normal fast food restaurants usually have more than a single counter).</p>
<p>Armed with these examples, we can now actually understand the definition of a promise.
Remember, that a promise represents the eventual completion (or failure) of an asynchronous operation.</p>
<p>In this example, the asynchronous operation is the preparation of the hamburger.
This asynchronous operation will eventually complete (the hamburger will be prepared) or fail (there will a problem during the hamburger preparation).
The order receipt that you get represents the eventual (i.e. probably not immediate) completion of the burger prepartion.</p>
<p>Now that we made sense of the definition, we can introduce the three states of a promise:</p>
<p>We say that a promise is <strong>pending</strong> when it has been created, but the asynchronous operation it represents has not been completed yet.
This would be the case when you already received the order receipt but you're still waiting for the hamburger.</p>
<p>We say that a promise is <strong>fulfilled</strong> when the asynchronous operation it represents has been successfully completed.
This would be the case when the hamburger is successfully prepared and handed to you.</p>
<p>We say that a promise is <strong>rejected</strong> when the asynchronous operation it represents has failed.
This would be the case when (for example) the kitchen spontaneously combusts due to the ongoing AsyncMcBurger dark magic experiments in the backroom lab.</p>
<p>Finally a promise is <strong>settled</strong> when is either fulfilled or rejected, but not pending.</p>
<p>Promises also allow us to associate <strong>handlers</strong> (also called handler functions) with the eventual success or failure.
For example, we could say that when the hamburger is prepared, we want to eat it (or throw it in the trash, which might actually be the preferrable alternative in some cases).</p>
<h3 id="working-with-promises-in-javascript"><a class="header" href="#working-with-promises-in-javascript">Working with Promises in JavaScript</a></h3>
<p>Let's work through an example - fetching a resource from a server via HTTP.
The HTTP protocol will be discussed in more detail later, but basically it enables us to send a request to a server and get a response.
Since network packets don't arrive immediately, this can take a while, so we are dealing with a &quot;long-running operation&quot;.</p>
<p>Both the browser as well as Node.js allow us to retrieve a resource from the network via the asynchronous <code>fetch</code> function.
Consider this example:</p>
<pre><code class="language-js">const url = 'https://jsonplaceholder.typicode.com/todos/1';
fetch(url).then((response) =&gt; console.log(response));
</code></pre>
<p>This will log the response object we get from <code>https://jsonplaceholder.typicode.com/todos/1</code> to the console (we will learn how to deal with this response object in a second).</p>
<p>We can rewrite the above example in a more explicit manner:</p>
<pre><code class="language-js">const url = 'https://jsonplaceholder.typicode.com/todos/1';
const fetchPromise = fetch(url);
fetchPromise.then((response) =&gt; console.log(response));
console.log(fetchPromise);
</code></pre>
<p>This is what happens:</p>
<ol>
<li>We call <code>fetch</code> which <em>immediately</em> returns a <em>pending</em> promise.</li>
<li>We pass a handler function into the <code>then</code> method.
The handler function will be called when the <code>fetch</code> succeeds (i.e. the promise returned by <code>fetch</code> is fulfilled).</li>
<li>After a while the <code>fetch</code> succeeds, <code>fetchPromise</code> is fulfilled and the <code>response</code> object is logged.</li>
</ol>
<p>It is important to note <code>fetch</code> returns immediately.
The return value of <code>fetch</code> is a pending promise (that will eventually settle with either a response value or some kind of error).</p>
<p>This is why <code>console.log(fetchPromise)</code> is executed before <code>console.log(response)</code> and you see the following output in the console:</p>
<pre><code>Promise { &lt;pending&gt; }
Response {
    ...
}
</code></pre>
<p>Additionally the <code>then</code> method <em>also</em> returns immediately, after it has attached the handler function to the <code>fetchPromise</code>.
However the execution of the <em>handler function</em> happens only after the promise returned by fetch is fulfilled.</p>
<p>On one hand this is what we want - while we are waiting for the network request to complete, we can do other stuff (like logging <code>fetchPromise</code>).</p>
<p>On the other hand this is the reason why asynchronous programming is often so confusing to beginners - it &quot;breaks&quot; the regular programming model.
When we write synchronous code, we just execute statements one after another.
With asynchronous code this is no longer the case - here we &quot;register&quot; a function to be executed later, do something else, and then at some point the registered function is executed.</p>
<h3 id="chaining-promises"><a class="header" href="#chaining-promises">Chaining Promises</a></h3>
<p>The <code>response</code> object is not terribly useful by itself.
Let's retrieve the &quot;actual&quot; response which is a JSON object.
JSON is a data format for data exchange (e.g. on a network) and can basically store arbitrary JavaScript objects.
Here is how the JSON we get from <code>https://jsonplaceholder.typicode.com/todos/1</code> looks like:</p>
<pre><code class="language-json">{
  &quot;userId&quot;: 1,
  &quot;id&quot;: 1,
  &quot;title&quot;: &quot;delectus aut autem&quot;,
  &quot;completed&quot;: false
}
</code></pre>
<p>The <code>response</code> object has a <code>json</code> method to retrieve the JSON contained in a response.
However, the <code>json</code> method is also asynchronous, so we are again dealing with promises.</p>
<p>Your first instinct might be to write something like this:</p>
<pre><code class="language-js">const url = 'https://jsonplaceholder.typicode.com/todos/1';
const fetchPromise = fetch(url);
const jsonPromise = fetchPromise.then((response) =&gt; {
  const jsonPromise = response.json();
  jsonPromise.then((json) =&gt; console.log(json));
});
</code></pre>
<p>This is <em>technically</em> not wrong, but it's ugly.
Basically every time we need to add an asynchronous operation to our code that depends on the result of a previous asynchronous operation, we would need to add one level of nesting which will quickly become unreadable.</p>
<p>Luckily for us, the benevolent god-emperors of JavaScript have eliminated this problem by making <code>then</code> return a promise that &quot;resolves&quot; to the result of the handler function.
Therefore instead of nesting promises, we can <strong>chain</strong> promises:</p>
<pre><code class="language-js">const url = 'https://jsonplaceholder.typicode.com/todos/1';
const fetchPromise = fetch(url);
const jsonPromise = fetchPromise.then((response) =&gt; response.json());
jsonPromise.then((json) =&gt; console.log(json));
</code></pre>
<p>This is (quite appropriately) called <strong>promise chaining</strong>.</p>
<p>Here is what happens, when we call this code:</p>
<ol>
<li>The <code>fetch</code> method immediately returns a pending promise <code>fetchPromise</code>.</li>
<li>The <code>then</code> method of <code>fetchPromise</code> attaches the handler function <code>(response) =&gt; response.json()</code> to the <code>fetchPromise</code> and also immediately returns.
This time the return value is the pending promise <code>jsonPromise</code>.</li>
<li>The <code>then</code> method of <code>jsonPromise</code> attaches the handler function <code>(json) =&gt; console.log(json)</code> and also immediately returns another pending promise (which we ignore here).</li>
<li>The network request initiated by <code>fetch</code> finishes and <code>fetchPromise</code> is fulfilled (with a <code>Response</code> object as its fulfillment value).</li>
<li>Now that <code>fetchPromise</code> is fulfilled the handler function <code>(response) =&gt; response.json()</code> is kicked off and attempts to parse the response as a JSON object.</li>
<li>At some point the JSON parsing is finished and <code>jsonPromise</code> is fulfilled.</li>
<li>Now that <code>jsonPromise</code> is fulfilled the handler function <code>(json) =&gt; console.log(json)</code> is kicked off and the JSON object is logged to the console.</li>
</ol>
<p>You can basically think of a chain as being executed in two stages.
In the first stage the promises are set up and the handler functions are attached using the <code>then</code> method.
This stage happens immediately.
In the second stage the promises are settled and the attached handler functions are actually executed.
This stage can take quite some time, depending on how long the tasks we want to accomplish take.</p>
<blockquote>
<p>This explanation is the most important part of this entire section.
You should pause and think about this promise chain for a second (or maybe even multiple seconds).
If you understand this point, you (mostly) understand asynchronous programming.</p>
</blockquote>
<p>Note that we can rewrite our promise chain to be a bit more elegant:</p>
<pre><code class="language-js">const url = 'https://jsonplaceholder.typicode.com/todos/1';
fetch(url)
  .then((response) =&gt; response.json())
  .then((json) =&gt; console.log(json));
</code></pre>
<h3 id="handling-errors"><a class="header" href="#handling-errors">Handling Errors</a></h3>
<p>The above code is completely missing one very important point - error handling.
Most long-running operations (especially those that involve external resources like a network or a file system) can fail.
For example <code>fetch</code> will fail (and <code>fetchPromise</code> will thus be rejected) if your network is down.</p>
<p>You can test this - turn off your network and execute the above code again.
You will get a weird error that looks approximately like this:</p>
<pre><code>TypeError: fetch failed
    at Object.fetch (node:internal/deps/undici/undici:11457:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
  cause: Error: getaddrinfo EAI_AGAIN jsonplaceholder.typicode.com
      at GetAddrInfoReqWrap.onlookup [as oncomplete] (node:dns:107:26) {
    errno: -3001,
    code: 'EAI_AGAIN',
    syscall: 'getaddrinfo',
    hostname: 'jsonplaceholder.typicode.com'
  }
}
</code></pre>
<p>Additionally, we will usually want to throw an error if <code>fetch</code> itself succeeds, but the status of the response is &quot;not ok&quot; (we will return to this in more detail in the section about HTTP):</p>
<pre><code class="language-js">const url = 'https://jsonplaceholder.typicode.com/todos/1';
fetch(url)
  .then((response) =&gt; {
    if (!response.ok) {
      throw new Error(`Request failed with status ${response.status}`);
    }
    return response.json();
  })
  .then((json) =&gt; console.log(json));
</code></pre>
<p>We want to be able to catch all the errors that can happen and log an error message to the console.
The Promise API gives us the appropriately named <code>catch</code> method to accomplish this.
We simply add a catch handler to the end of our promise chain - it will be called when any of the asynchronous operations fail:</p>
<pre><code class="language-js">const url = 'https://jsonplaceholder.typicode.com/todos/1';
fetch(url)
  .then((response) =&gt; {
    if (!response.ok) {
      throw new Error(`Request failed with status ${response.status}`);
    }
    return response.json();
  })
  .then((json) =&gt; console.log(json))
  .catch((error) =&gt; console.error(error));
</code></pre>
<p>Turn off your network and try running the <code>fetch</code> again.
You will now see an appropriately logged error.
Instead of just crashing, you program can now do something else (like showing an error modal to the user and informing him that something went wrong).</p>
<h3 id="async-and-await"><a class="header" href="#async-and-await">Async and Await</a></h3>
<p>Promises are great, but as discussed, the are not completely intuitive.
We can use <code>async</code> and <code>await</code> keywords to simplify asynchronous code and make it look more like synchronous code.
To this end, we can declare an <code>async</code> function and then use the <code>await</code> keyword to wait for a promise and get its fulfillment value:</p>
<pre><code class="language-js">async function fetchTask(url) {
  try {
    const response = await fetch(url);
    if (!response.ok) {
      throw new Error(`Request failed with status ${response.status}`);
    }
    const json = await response.json();
    return json;
  } catch (error) {
    console.error(`Could not fetch URL ${url}`);
  }
}

const url = 'https://jsonplaceholder.typicode.com/todos/1';
fetchTask(url).then((json) =&gt; console.log(json));
</code></pre>
<p>Note that for some runtimes you can only use <code>await</code> inside an <code>async</code> function.
This is why we use <code>then</code> with <code>fetchTask</code> instead of <code>await</code>ing the promise returned by <code>fetchTask</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="modules"><a class="header" href="#modules">Modules</a></h2>
<div style="text-align: right"> <i> He who writes with clarity, simplicity, and purpose will find his modules cherished by many. <br> — Ancient Chinese proverb </i> </div>
<h3 id="module-system"><a class="header" href="#module-system">Module System</a></h3>
<p>At the moment, the scripts we write are not large and easily fit into a single file.
However, as we begin writing our task application, we will run into the problem that if we try to fit our project into a single file, that file will quickly become unreadable and unmaintainable.</p>
<p>Additionally, we might often want to use third-party libraries (i.e. libraries written by someone else) in our project.
Copy and pasting the code from a third-party library seems like an obviously bad idea.
First, this would make our scripts even less readable.
Second, what do we do if the library receives an update?</p>
<p>Luckily, JavaScript provides us with a mechanism to use code from one file in another file - <strong>modules</strong>.</p>
<blockquote>
<p>Note that we will only discuss ECMAScript modules.
There are other module systems, but we won't cover them right now.</p>
</blockquote>
<h3 id="the-import-and-export-keywords"><a class="header" href="#the-import-and-export-keywords">The Import and Export Keywords</a></h3>
<p>Let's start our module discussion with a very simple example.
We will create a file containing a function and then try to use that function in another file.</p>
<p>Create a file <code>greeter.js</code> containing the following code:</p>
<pre><code class="language-js">export function greet(name) {
  return `Hello, ${name}`;
}
</code></pre>
<p>Note the <code>export</code> keyword here.
This <strong>exports</strong> the <code>greet</code> function, i.e. it tells JavaScript to make this function available to other files.</p>
<p>We can now <strong>import</strong> the <code>greet</code> function in another file.
Create a file <code>main.js</code> in which we try to use the <code>greet</code> function:</p>
<pre><code class="language-js">import { greet } from './greeter.js';

console.log(greet('John Doe'));
</code></pre>
<p>This is the basic setup, but in order to execute this in the browser or in Node.js we need to make some more adjustments.</p>
<h3 id="esm-in-the-browser"><a class="header" href="#esm-in-the-browser">ESM in the Browser</a></h3>
<p>Let's create a file named <code>index.html</code> in which we use <code>main.js</code> as a JavaScript module:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;title&gt;ESM Demo&lt;/title&gt;
  &lt;/head&gt;

  &lt;body&gt;
    &lt;script type=&quot;module&quot; src=&quot;main.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>If you just try to open <code>index.html</code> in the browser you will a CORS Error:</p>
<pre><code>Access to script at 'file:///.../main.js' from origin 'null' has been blocked by
CORS policy: Cross origin requests are only supported for protocol schemes:
http, data, isolated-app, chrome-extension, chrome, https, chrome-untrusted.
</code></pre>
<p>We will dive into CORS later, but basically this error happens because ECMAScript modules are subject to the same-origin policy.
We therefore need to serve our files over a server instead of just trying to open them in our browser.</p>
<p>Let's install the <code>http-server</code> package:</p>
<pre><code class="language-sh">npm install -g http-server
</code></pre>
<p>Now enter the directory where you stored <code>index.html</code>, <code>main.js</code> and <code>greeter.js</code> and execute the following command:</p>
<pre><code class="language-sh">http-server .
</code></pre>
<p>Go to <code>http://localhost:8080</code>, open the console and you should see <code>Hello, John Doe</code> in your console.</p>
<h3 id="esm-in-nodejs"><a class="header" href="#esm-in-nodejs">ESM in Node.js</a></h3>
<p>To use <code>main.js</code> and <code>greeter.js</code> in Node.js create the following <code>package.json</code> file in the same directory as <code>main.js</code> and <code>greeter.js</code>:</p>
<pre><code>{
  &quot;name&quot;: &quot;projectname&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;main&quot;: &quot;main.js&quot;,
  &quot;type&quot;: &quot;module&quot;
}
</code></pre>
<blockquote>
<p>Note that it is very important that you specify <code>type</code> as <code>module</code>.
This tells node to interpret JavaScript files as using ES module syntax (which is what we use in this section).</p>
</blockquote>
<p>This <code>package.json</code> file specifies that the directory is now a <strong>node project</strong>.</p>
<p>You can then execute <code>main.js</code> by running:</p>
<pre><code class="language-sh">node main.js
</code></pre>
<h3 id="named-exports-and-imports"><a class="header" href="#named-exports-and-imports">Named Exports and Imports</a></h3>
<p>The example above showcased the use of <strong>named exports</strong>.
Here each function is referred by its name when exporting and the same name is used when importing.
You can export multiple functions when performing named exports.</p>
<p>You can create a named export by prefixing a function with the <code>export</code> keyword:</p>
<pre><code class="language-js">export function getGreeting(name) {
  return `Hello ${name}`;
}

export function greet(name) {
  return `Hello ${name}`;
}
</code></pre>
<p>Alternatively you can use an <strong>export list</strong>:</p>
<pre><code class="language-js">function getGreeting(name) {
  return `Hello ${name}`;
}

function greet(name) {
  console.log(getGreeting(name));
}

export { getGreeting, greet };
</code></pre>
<blockquote>
<p>You should use named exports if you need to export several values.</p>
</blockquote>
<p>Note that you can rename exports in an export list:</p>
<pre><code class="language-js">function getImportantGreeting(name) {
  return `Hello ${name}!`;
}

export { getImportantGreeting as getGreeting };
</code></pre>
<p>If you need to import multiple functions, you can do that as well:</p>
<pre><code class="language-js">import { getGreeting, greet } from './greet.js';
</code></pre>
<p>You can also rename imports:</p>
<pre><code class="language-js">import { getGreeting, greet as sayHello } from './greet.js';
</code></pre>
<p>This is useful if you have several modules that export functions with a same name.
For example if you had a module <code>greet</code> that exports the function <code>greet</code> and a module <code>other-greet</code> that exports the function <code>greet</code> as well, you would run into problems if you just tried to import <code>greet</code>:</p>
<pre><code class="language-js">import { greet } from './greet.js';
import { greet } from './other-greet.js';
</code></pre>
<p>Instead you could rename one or both greet functions:</p>
<pre><code class="language-js">import { greet } from './greet.js';
import { greet as otherGreet } from './other-greet.js';
</code></pre>
<h3 id="default-exports-and-imports"><a class="header" href="#default-exports-and-imports">Default Exports and Imports</a></h3>
<p>If you want to have a default function provided by your module, you can use a <strong>default export</strong>:</p>
<pre><code class="language-js">export default getGreeting;
</code></pre>
<p>This is equivalent to:</p>
<pre><code class="language-js">export { getGreeting as default };
</code></pre>
<p>Note that you can't have more than one default export.</p>
<p>You import the default export like this:</p>
<pre><code class="language-js">import getGreeting from './greet.js';
</code></pre>
<p>Alternatively you could use <code>default as</code>:</p>
<pre><code class="language-js">import { default as getGreeting } from './greet.js';
</code></pre>
<p>Note that you can import the default export using any name you like:</p>
<pre><code class="language-js">import thingy from './greet.js';
</code></pre>
<h3 id="namespace-imports"><a class="header" href="#namespace-imports">Namespace Imports</a></h3>
<p>If you wish to avoid name conflicts (like the <code>greet</code> situation presented above) you can do even better with namespace imports:</p>
<pre><code class="language-js">import * as greet from './greet.js';

greet.getGreeting('Hello');
</code></pre>
<p>The <code>import * as</code> syntax retrieves all exports available in <code>greet.js</code>, creates a <strong>namespace object</strong> <code>greet</code> and makes all the exports available as a member of that object.
This means that the <code>greet</code> conflict can be resolved like this:</p>
<pre><code class="language-js">import * as greetModule from './greet.js';
import * as otherGreetModule from './other-greet.js';

greetModule.greet('John');
otherGreeetModule.greet('John');
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="writing-decent-code"><a class="header" href="#writing-decent-code">Writing Decent Code</a></h2>
<div style="text-align: right"> <i>He who writes JavaScript with simplicity, rides the dragon of efficiency; he who writes in confusion, invites the monkeys of bugs into his code. <br> — Ancient Chinese proverb </i> </div>
<h3 id="it-just-works"><a class="header" href="#it-just-works">It Just Works</a></h3>
<p>A common misunderstanding among beginner programmers is that if the program runs correctly, then the code must automatically be fine.
While a correctly running program is indeed better than a crashing program (a truly shocking insight for some developers), code should not only work, but also be maintainable.</p>
<p>This <strong>maintainability</strong> has to aspects:</p>
<ol>
<li>It should be maintainable by future you in (let's say) six months.</li>
<li>It should be maintanable by other people that are not you.</li>
</ol>
<blockquote>
<p>We wish to reiterate that there are indeed people that are not you in the world.
Some programmers tend to forget that.</p>
</blockquote>
<p>This section is aimed at giving you a few practical tips to achieve these goals.
It won't make you a great programmer, but it will help you to make your teammates hate you slightly less (which is why the section is called &quot;writing decent code&quot; and not &quot;writing the greatest code of all time&quot;).</p>
<h3 id="naming-all-the-things-sensibly"><a class="header" href="#naming-all-the-things-sensibly">Naming All The Things (Sensibly)</a></h3>
<p>The ultimate number one tip for writing better code is as obvious in theory, as it is complicated in practice:</p>
<p><strong>Your variables and functions should have sensible names that describe their purpose.</strong></p>
<p>Consider this simple example:</p>
<pre><code class="language-js">function f(a, s) {
  const r = [];
  for (const i of a) {
    if (i.st === s) {
      r.push(i.su);
    }
  }
  return r;
}
</code></pre>
<p>Well, this code clearly sucks.
It's absolutely unreadable and the unreadability is solely down to really terrible variable names.</p>
<p>Let's rewrite it:</p>
<pre><code class="language-js">function getTaskTitlesByStatus(tasks, status) {
  const taskTitles = [];
  for (const task of tasks) {
    if (task.status === status) {
      taskTitles.push(task.title);
    }
  }
  return taskTitles;
}
</code></pre>
<p>And suddenly the purpose of the code is clear as day.</p>
<p>The function <code>getTaskTitlesByStatus</code> gets all the titles of the tasks that have a certain status.
And we know that, because it is literally in the name of the function!</p>
<p>Not only does the function have a good name (which is important when trying to use this function), but so do the variables (which is important when we need to fix possible mistakes in this function).</p>
<p>Of course, this is a very extreme example (on purpose), but it's really incredible how often programmers give really terrible names to functions and variables (even developers that should really know better).</p>
<p>We will note, that naming things is usually not as easy as in this example.
There are many legitime cases where giving something a good name is not trivial, but you should at least always try to have sensible names.
Your colleagues will really appreciate it.</p>
<h3 id="be-functional"><a class="header" href="#be-functional">Be Functional</a></h3>
<p>The function has a descriptive name now, but it can still be simplified by writing in a more functional style:</p>
<pre><code class="language-js">function getTaskTitlesByStatus(tasks, status) {
  return tasks.filter((task) =&gt; task.status === status).map((task) =&gt; task.title);
}
</code></pre>
<p>Whoa, suddenly this function is only one line and, even better, the code basically looks like natural language:
We <code>filter</code> all the <code>tasks</code> by their <code>status</code> and then <code>map</code> them to their <code>title</code>s.</p>
<p>We already touched on the benefits of the functional style in the section on functional programming, but it's worth repeating:</p>
<p><strong>Writing in a functional style can often drastically simplify your code.</strong></p>
<p>Of course you shouldn't overdo it - especially with functions like <code>reduce</code> it is possible to write completely unreadable code even in a functional style.
In the end there is no silver bullet programming paradigm.</p>
<h3 id="write-small-helper-functions"><a class="header" href="#write-small-helper-functions">Write Small Helper Functions</a></h3>
<p>Well, we know how to write good functions, right?
Just give everything descriptive names and use a functional style.</p>
<p>Unfortunately this won't always help because some functions have to do complicated things.
Consider a function that takes an array of tasks and returns an array of generated notifications to be shown to the user.</p>
<p>The notifications are generated for urgent tasks (i.e. tasks where the deadline is in the next two days).
Additionally, we want to to generate a notification with the number of uncompleted tasks.</p>
<pre><code class="language-js">function generateNotifications(tasks) {
  const urgentTasks = [];

  let uncompletedTaskCount = 0;

  tasks.forEach((task) =&gt; {
    const today = new Date();
    const twoDaysLater = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 2);

    if (task.deadline &lt;= twoDaysLater) {
      urgentTasks.push(task);
    }

    if (task.status === 'todo' || task.status === 'inprogress') {
      uncompletedTaskCount++;
    }
  });

  const notifications = [];
  if (urgentTasks.length &gt; 0) {
    notifications.push(
      `You have ${urgentTasks.length} urgent tasks. Here they are: ${urgentTasks}.`,
    );
  }

  if (uncompletedTaskCount &gt; 0) {
    notifications.push(`You have ${uncompletedTaskCount} uncompleted tasks.`);
  }

  return notifications;
}
</code></pre>
<p>Try to read this function and understand it.
This probably takes some time, especially if you are a beginner who is not used to digesting large chunk of code quickly.</p>
<p>We can partially alleviate this problem by splitting the function into small helper functions:</p>
<pre><code class="language-js">function findUrgentTasks(tasks) {
  const urgentTasks = [];

  const today = new Date();
  const twoDaysLater = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 2);

  tasks.forEach((task) =&gt; {
    if (task.deadline &lt;= twoDaysLater) {
      urgentTasks.push(task);
    }
  });

  return urgentTasks;
}

function countUncompletedTasks(tasks) {
  let uncompletedTaskCount = 0;
  tasks.forEach((task) =&gt; {
    if (task.status === 'todo' || task.status === 'inprogress') {
      uncompletedTaskCount++;
    }
  });
  return uncompletedTaskCount;
}

function generateNotifications(tasks) {
  const urgentTasks = findUrgentTasks(tasks);
  const uncompletedTaskCount = countUncompletedTasks(tasks);

  const notifications = [];
  if (urgentTasks.length &gt; 0) {
    notifications.push(
      `You have ${urgentTasks.length} urgent tasks. Here they are: ${urgentTasks}.`,
    );
  }

  if (uncompletedTaskCount &gt; 0) {
    notifications.push(`You have ${uncompletedTaskCount} uncompleted tasks.`);
  }

  return notifications;
}
</code></pre>
<p>This is much simpler to read.
Additionally, if you look carefully at the code, you should realize that we can rewrite <code>findUrgentTasks</code> and <code>countUncompletedTasks</code> can be rewritten in a functional style (try to do this yourself).</p>
<p>This is a common occurrence when improving your code - one improvement often leads to another.</p>
<h3 id="avoid-deep-nesting"><a class="header" href="#avoid-deep-nesting">Avoid Deep Nesting</a></h3>
<p>Consider a function that filters tasks based on their status, user ID and days until deadline.
We could write it like this:</p>
<pre><code class="language-js">function filterTasks(tasks, status, userId, daysUntilDeadline) {
  const filteredTasks = [];

  for (let i = 0; i &lt; tasks.length; i++) {
    if (tasks[i].status === status) {
      if (tasks[i].assignee === userId) {
        const deadline = new Date(tasks[i].deadline);
        const today = new Date();
        const futureDate = new Date(
          today.getFullYear(),
          today.getMonth(),
          today.getDate() + daysUntilDeadline,
        );

        if (deadline &lt;= futureDate) {
          filteredTasks.push(tasks[i]);
        }
      }
    }
  }

  return filteredTasks;
}
</code></pre>
<p>This looks supremely ugly and hard to read due to the deep nesting of the code.
Luckily, this is pretty easy to fix using two very specific tricks:</p>
<p>First, we can extract the body of the for loop into a helper function:</p>
<pre><code class="language-js">function taskMatchesCriteria(task, status, userId, daysUntilDeadline) {
  if (task.status === status) {
    if (task.assignee === userId) {
      const today = new Date();
      const futureDate = new Date(
        today.getFullYear(),
        today.getMonth(),
        today.getDate() + daysUntilDeadline,
      );

      if (task.deadline &lt;= futureDate) {
        return true;
      }
    }
  }

  return false;
}

function filterTasks(tasks, status, userId, daysUntilDeadline) {
  return tasks.filter((task) =&gt; taskMatchesCriteria(task, status, userId, daysUntilDeadline));
}
</code></pre>
<p>One level of nesting gone already.</p>
<p>For the second trick, we can simplify the <code>taskMatchesCriteria</code> by either flattening the conditions or using early exits.</p>
<p>Flattening the condition is simple:</p>
<pre><code class="language-js">function taskMatchesCriteria(task, status, userId, daysUntilDeadline) {
  const today = new Date();
  const futureDate = new Date(
    today.getFullYear(),
    today.getMonth(),
    today.getDate() + daysUntilDeadline,
  );

  return task.status === status &amp;&amp; task.assignee === userId &amp;&amp; task.deadline &lt;= futureDate;
}
</code></pre>
<p>However sometimes this is not possible or leads to a very complex logical expression.
In this case we can check the &quot;inverted&quot; conditions one by one and &quot;early exit&quot; if something doesn't match:</p>
<pre><code class="language-js">function taskMatchesCriteria(task, status, userId, daysUntilDeadline) {
  // Early exit number 1
  if (task.status !== status) {
    return false;
  }

  // Early exit number 2
  if (task.assignee !== userId) {
    return false;
  }

  const today = new Date();
  const futureDate = new Date(
    today.getFullYear(),
    today.getMonth(),
    today.getDate() + daysUntilDeadline,
  );

  return task.deadline &lt;= futureDate;
}
</code></pre>
<h3 id="additional-tips"><a class="header" href="#additional-tips">Additional Tips</a></h3>
<p>There are couple of additional tips:</p>
<ul>
<li>don't repeat yourself</li>
<li>use temporary variables</li>
<li>think about edge cases</li>
<li>use well structured modules</li>
<li>write comments and docstrings</li>
<li>format and style your code consistenly</li>
<li>don't forget to handle errors</li>
<li>don't try to outsmart yourself</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-2-leveling-up-with-typescript"><a class="header" href="#chapter-2-leveling-up-with-typescript">Chapter 2: Leveling Up with TypeScript</a></h1>
<div style="text-align: right"> <i> To employ TypeScript is to light a lantern on the dim path of JavaScript, revealing the stones upon which one may trip. <br> - Ancient Chinese proverb </i> </div>
<p>Now that we learned the basics of JavaScript, we could theoretically dive right into writing our application.
However, JavaScript as a language has a central problem - it does not come with type checking.
For example, there is nothing preventing you from trying to add two objects except the fact that you will get a runtime error.</p>
<p>We would like to be able to see this during development.
Enter TypeScript which allows us to annotate our objects and functions.
If we make a mistake, we will see it immediately.</p>
<p>The most common kinds of errors that programmers write can be described as type errors: a certain kind of value was used where a different kind of value was expected. This could be due to simple typos, a failure to understand the API surface of a library, incorrect assumptions about runtime behavior, or other errors. The goal of TypeScript is to be a static typechecker for JavaScript programs - in other words, a tool that runs before your code runs (static) and ensures that the types of the program are correct (typechecked).</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="why-typescript"><a class="header" href="#why-typescript">Why TypeScript?</a></h2>
<div style="text-align: right"> <i> Better to wrangle with TypeScript's compiler today, than to wrestle with JavaScript bugs tomorrow. <br> - Ancient Chinese proverb </i> </div>
<h3 id="a-little-story"><a class="header" href="#a-little-story">A Little Story</a></h3>
<p>Consider the following scenario.
You have a JavaScript function <code>showTask(task)</code> which takes a <code>task</code> object and displays the task in a UI (or in the console).
Whenever you want to use this function you need to find out if the object you are dealing with can be passed to the function.</p>
<p>Let's say you have the following task object:</p>
<pre><code class="language-js">const task = {
  id: 1,
  summary: 'Read the Next.js book',
  description: 'Read and understand the Next.js book.',
};
</code></pre>
<p>Can you pass this object to <code>showTask</code>?
Well, you can't tell because maybe the <code>showTask</code> function expects an object that has <code>id</code>, <code>summary</code>, <code>description</code> <em>and</em> <code>status</code> fields.
The only way to find out if your <code>task</code> object is a valid input for <code>showTask</code> is to - well - actually pass it and find out.
This is obviously not the ideal workflow (especially if you happen to find out that your object lacked some important properties <em>in production</em>).</p>
<p>Additionally, if the author of the <code>showTask</code> function changes his function to expect additional properties on the <code>task</code> object, he would now have to check all the invocations of <code>showTask</code> to verify that he didn't accidentally break something.</p>
<p>This is where TypeScript comes in.
With TypeScript we would be able to <em>statically type</em> the function by adding <em>type annotations</em> like so:</p>
<pre><code class="language-ts">type Task = {
  id: number;
  summary: string;
  description: string;
};

function showTask(task: Task) {
  // Implementation here
}
</code></pre>
<p>Now we know <em>exactly</em> what kind of object <code>showTask</code> expects.
If we pass an object that lacks some of the expected properties and run <em>type checks</em> (more on that later) we will get an error long before the bad code can make it anywhere near production.
Even better - your editor will be able to show you that you might have a problem during development:</p>
<pre><code class="language-ts">showTask({
  id: 1,
  summary: 'Read the Next.js book',
});
// Most editors will now show a squiggly red line somewhere around here and inform you that you
// that the object is missing a description property.
</code></pre>
<p>Better still, you now get <em>autocompletion</em> - editors will show possible suggestions for the property names your object should have while you type.
This saves an enormous amount of time and effort when writing code.</p>
<p>To summarize, using TypeScript massively enhances your developer workflow which is why nowadays most large projects no longer use vanilla JavaScript, but TypeScript instead.</p>
<h3 id="installing-typescript"><a class="header" href="#installing-typescript">Installing TypeScript</a></h3>
<p>Install TypeScript by running the following command:</p>
<pre><code class="language-sh">npm install -g typescript
</code></pre>
<p>This installs the TypeScript compiler <code>tsc</code> - the <code>-g</code> flag tells <code>npm</code> to install it globally.</p>
<p>Let's see how we can use it - create a file <code>index.ts</code>:</p>
<pre><code class="language-ts">type Task = {
  id: number;
  summary: string;
  description: string;
};

function showTask(task: Task) {
  console.log(
    `Task with ID=${task.id} has the summary ${task.summary} and description ${task.description}`,
  );
}

showTask({
  id: 1,
  summary: 'Read the Next.js book',
  description: 'Read and understand the Next.js book.',
});
</code></pre>
<p>We can't execute TypeScript files in the browser or in Node.js directly.
Instead we need to first <em>compile</em> the TypeScript code to JavaScript and then run the resulting JavaScript code.
Here is how we can compile the <code>index.ts</code> file:</p>
<pre><code class="language-sh">tsc index.ts
</code></pre>
<p>Since there were no type errors, nothing is logged on the console and we get a file <code>index.js</code> which looks (approximately) as follows:</p>
<pre><code class="language-js">function showTask(task) {
  console.log(
    'Task with ID='
      .concat(task.id, ' has the summary ')
      .concat(task.summary, ' and description ')
      .concat(task.description),
  );
}
showTask({
  id: 1,
  summary: 'Read the Next.js book',
  description: 'Read and understand the Next.js book.',
});
</code></pre>
<p>Note that all the type annotations are gone and all we get is vanilla JavaScript that we can execute.
Additionally the TypeScript compiler <em>downleved</em> our code so that it can be executed by older platforms.
Here the template string syntax (which is not supported by very old browser) was replaced by a series of <code>concat</code> calls.</p>
<p>What if there is an error in <code>index.ts</code>?</p>
<pre><code class="language-ts">type Task = {
  id: number;
  summary: string;
  description: string;
};

function showTask(task: Task) {
  console.log(
    `Task with ID=${task.id} has the summary ${task.summary} and description ${task.description}`,
  );
}

showTask({
  id: 1,
  summary: 'Read the Next.js book',
});
</code></pre>
<p>Now we get an error if we try to run <code>tsc index.ts</code>:</p>
<pre><code>index.ts:13:10 - error TS2345: Argument of type '{ id: number; summary: string; }' is not assignable to parameter of type 'Task'.
  Property 'description' is missing in type '{ id: number; summary: string; }' but required in type 'Task'.
13 showTask({
            ~
14   id: 1,
   ~~~~~~~~
15   summary: 'Read the Next.js book',
   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
16 });
   ~
  index.ts:4:3
    4   description: string;
        ~~~~~~~~~~~
    'description' is declared here.
Found 1 error in index.ts:13
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="basic-types"><a class="header" href="#basic-types">Basic Types</a></h2>
<div style="text-align: right"> <i> Use TypeScript, find enlightenment. Ignore TypeScript, trip over undefined. <br> - Ancient Chinese proverb </i> </div>
<h3 id="annotating-variables"><a class="header" href="#annotating-variables">Annotating Variables</a></h3>
<p>You can annotate variables by adding a type annotation:</p>
<pre><code class="language-ts">let task: string = 'Read the Next.js book';
</code></pre>
<p>You can annotate constants in a similar fashion:</p>
<pre><code class="language-ts">const name: string = 'Read the Next.js book';
</code></pre>
<p>Note that this usually is not needed, since TypeScript can automatically perform <em>type inference</em> and infer the type of a variable or a constant:</p>
<pre><code class="language-ts">let name = 'Read the Next.js book';
</code></pre>
<p>We will very rarely write explicit type annotations (only if we really need them) and instead let TypeScript infer as much as it can.
You be suprised by how few type annotations you need to get completely type checked code!</p>
<h3 id="primitive-types"><a class="header" href="#primitive-types">Primitive Types</a></h3>
<p>The primitive types that are present in TypeScript should already be familiar to you from the chapter on JavaScript.
TypeScript has the <code>number</code> type:</p>
<pre><code class="language-ts">const id: number = 1;
</code></pre>
<p>TypeScript also has the <code>string</code> type:</p>
<pre><code class="language-ts">const task: string = 'Read the Next.js book';
</code></pre>
<p>Additionally TypeScript has the <code>null</code> and <code>undefined</code> types:</p>
<pre><code class="language-ts">const undefinedTask: undefined = undefined;
const nullTask: null = null;
</code></pre>
<p>Remember that in a real codebase we would let TypeScript infer the variables:</p>
<pre><code class="language-ts">const id = 1;
const task = 'Read the Next.js book';
const undefinedTask = undefined;
const nullTask = null;
</code></pre>
<h3 id="the-any-and-unknown-types"><a class="header" href="#the-any-and-unknown-types">The Any and Unknown Types</a></h3>
<p>TypeScript also has the <code>any</code> type.
When a value is of &quot;any&quot; type, you can access its properties, call it, or assign it freely, and basically do anything (get it?) that's syntactically correct.</p>
<p>Let's say you have a <code>task</code> variable of type <code>any</code> - then these are all legal:</p>
<pre><code class="language-ts">console.log(task.summary);
task();
const otherTask = task;
</code></pre>
<p>Basically <code>any</code> is way to tell the compiler to &quot;shut up&quot; and skip type checking.
This is also the reason why using <code>any</code> is generally a terrible idea since it defeats the purpose of using TypeScript in the first place!</p>
<p>However sometimes you do find yourself in a situation where you don't know much about a variable type.
In this case it's better to use <code>unknown</code>.
If you have a <code>task</code> variable of type <code>unknown</code>, then these are all no longer legal:</p>
<pre><code class="language-ts">console.log(task.summary);
task();
const otherTask = task;
</code></pre>
<h3 id="typing-arrays"><a class="header" href="#typing-arrays">Typing Arrays</a></h3>
<p>You can type arrays as <code>T[]</code> where <code>T</code> is the type of the elements of the array.
For example here is how you could type an array of numbers:</p>
<pre><code class="language-ts">const evenNumbers: number[] = [1, 2, 3, 4];
</code></pre>
<p>Here is how you would an array of strings:</p>
<pre><code class="language-ts">const tasks: string[] = ['First task', 'Second task', 'Third task'];
</code></pre>
<p>Note that for these simple example we could again infer the types.</p>
<h3 id="typing-objects"><a class="header" href="#typing-objects">Typing Objects</a></h3>
<p>You can type an object by writing the property names and types of its properties inside curly braces <code>{}</code>.
For example here how you could declare an object that has the properties <code>id</code> of type <code>number</code>, <code>summary</code> of type <code>string</code> and <code>description</code> of type <code>string</code>:</p>
<pre><code class="language-ts">const task: { id: number; summary: string; description: string } = {
  id: 1,
  summary: 'Read the Next.js book',
  description: 'Read and understand the Next.js book.',
};
</code></pre>
<p>You can mark properties as <em>optional</em> by using the question mark <code>?</code>.
If a property is marked as optional, you don't need to specify it.
For example this is valid:</p>
<pre><code class="language-ts">const task: { id: number; summary: string; description?: string } = {
  id: 1,
  summary: 'Read the Next.js book',
};
</code></pre>
<h3 id="type-alias"><a class="header" href="#type-alias">Type Alias</a></h3>
<p>The object syntax we just introduced is not particulary readable.
This is why TypeScript gives you the possibility to specify a <strong>type alias</strong> (i.e. another name) for an object type:</p>
<pre><code class="language-ts">type Task = {
  id: number;
  summary: string;
  description: string;
};
</code></pre>
<p>Note that you can specify type aliases for more than just object types sind type aliases are basically just different names for types.
For example we could specify a type alias for the primitive type <code>string</code>:</p>
<pre><code class="language-ts">type ID = string;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="annotating-functions"><a class="header" href="#annotating-functions">Annotating Functions</a></h2>
<div style="text-align: right"> <i> The function without types is like a river without banks: boundless, yet directionless. <br> - Ancient Chinese proverb </i> </div>
<h3 id="annotating-parameters"><a class="header" href="#annotating-parameters">Annotating Parameters</a></h3>
<p>We can annotate functions in TypeScript by annotating their parameters.
Consider a function <code>greet</code> that takes a parameter <code>name</code> of type <code>string</code> and simply logs a greeting to the console.
Here is how we would annotate the function:</p>
<pre><code class="language-ts">function greet(name: string) {
  console.log(`Hello, ${name}`);
}
</code></pre>
<p>Now arguments to the function are checked:</p>
<pre><code class="language-ts">greet(false);
// This will result in an error
</code></pre>
<p>You can also annotate functions if they take array and object by simply using the syntax you learned in the previous section:</p>
<pre><code class="language-ts">function showTask(task: { id: number; summary: string; description: string }) {
  console.log(
    `Task with ID=${task.id} has the summary ${task.summary} and description ${task.description}`,
  );
}
</code></pre>
<p>This is not particularly readable, so normally we would use a type alias:</p>
<pre><code class="language-ts">type Task = {
  id: number;
  summary: string;
  description: string;
};

function showTask(task: Task) {
  console.log(
    `Task with ID=${task.id} has the summary ${task.summary} and description ${task.description}`,
  );
}
</code></pre>
<p>Note that TypeScript will not just check that the passed arguments have the correct types, but also check that the correct number of argument was passed.
This has an interesting side effect - namely that introducing the TypeScript compiler in a JavaScript codebase can already find potential bugs:</p>
<pre><code class="language-js">function showTask(task) {
  console.log(
    `Task with ID=${task.id} has the summary ${task.summary} and description ${task.description}`,
  );
}

// Uh-oh, we are passing multiple variables instead of a single object!
showTask(1, 'Read the Next.js book', 'Read and understand the Next.js book.');
</code></pre>
<p>If we run <code>tsc</code> on this code, we will get the following error:</p>
<pre><code>index.ts:8:13 - error TS2554: Expected 1 arguments, but got 3.

8 showTask(1, 'Read the Next.js book', 'Read and understand the Next.js book.');
</code></pre>
<p>TypeScript is useful indeed!</p>
<h3 id="return-type-annotations"><a class="header" href="#return-type-annotations">Return Type Annotations</a></h3>
<p>We can also type the return types of our functions:</p>
<pre><code class="language-ts">function getGreeting(name: string): string {
  return `Hello, ${name}`;
}
</code></pre>
<p>Note that you usually don't need a return type annotation because TypeScript can do type inference for them:</p>
<pre><code class="language-ts">function getGreeting(name: string) {
  return `Hello, ${name}`;
}
</code></pre>
<p>Nevertheless, return types are often typed explicitly to avoid accidentally returning a type you didn't want to return or to prevent accidental changes to the return type.</p>
<h3 id="optional-parameters"><a class="header" href="#optional-parameters">Optional Parameters</a></h3>
<p>Similar to object properties, function parameters can be marked as <em>optional</em>.
In this case we can, but don't need to pass the corresponding argument to the function:</p>
<pre><code class="language-ts">function getGreeting(name: string, message?: string): string {
  return `${message !== undefined ? message : 'Hello'}, ${name}`;
}

// These are both valid
getGreeting('John Doe', 'Welcome');
getGreeting('John Doe');
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="union-types"><a class="header" href="#union-types">Union Types</a></h2>
<h3 id="literal-types"><a class="header" href="#literal-types">Literal Types</a></h3>
<p>A literal type is a type whose only value is a literal.
Here is how we could define a literal type <code>&quot;Todo&quot;</code>:</p>
<pre><code class="language-ts">type TodoType = 'Todo';
</code></pre>
<p>Here is how we can use it:</p>
<pre><code class="language-ts">let todo: TodoType = 'Todo';
</code></pre>
<p>Note that we can't assign any other value to <code>todo</code> including other strings.
For example this is not possible:</p>
<pre><code class="language-ts">let todo: TodoType = 'Done';
</code></pre>
<p>We could also skip declaring the type alias and just use the literal type directly:</p>
<pre><code class="language-ts">let todo: 'Todo' = 'Todo';
</code></pre>
<p>While literal types by themselves are not very useful, they are extremely useful in the context of union types.</p>
<h3 id="unions-of-literal-types"><a class="header" href="#unions-of-literal-types">Unions of Literal Types</a></h3>
<p>A union type is a type that represents a value which may be one of multiple values.
Consider the type <code>TaskState</code> which represents one of the following states:</p>
<ul>
<li>Todo</li>
<li>InProgress</li>
<li>Done</li>
</ul>
<p>Here is how we would defined the <code>TaskState</code> type:</p>
<pre><code class="language-ts">type TaskState = 'Todo' | 'InProgress' | 'Done';
</code></pre>
<p>The <code>TaskState</code> type is a union type and each of the literal types <code>'Todo'</code>, <code>'InProgress'</code> and <code>'Done'</code> is a member of the union.
A variable of type <code>TaskState</code> can only be of one of these literal types, i.e. it can only have one of the respective values.
For example these are all valid:</p>
<pre><code class="language-ts">const state: TaskState = 'Todo';
const state2: TaskState = 'InProgress';
const state3: TaskState = 'Done';
</code></pre>
<p>But this is not:</p>
<pre><code class="language-ts">const invalidState: TaskState = 'Dropped';
</code></pre>
<h3 id="other-union-types"><a class="header" href="#other-union-types">Other Union Types</a></h3>
<p>We can also declare unions of arbitrary types.
One particulary useful union type is <code>T | undefined</code>, for example:</p>
<pre><code class="language-ts">function getTaskId(taskName: string): string | undefined {
  // Implementation here
}
</code></pre>
<p>This function takes a <code>taskName</code> and returns the corresponding ID.
However since it might be the case that no task with the given name is present, we return either a <code>string</code> or <code>undefined</code>.</p>
<h3 id="working-with-a-union-type"><a class="header" href="#working-with-a-union-type">Working with a Union Type</a></h3>
<p>It's relatively clear how to define a union type, but how can we work with a union type?
Consider the following function:</p>
<pre><code class="language-ts">function logTaskName(taskName: string | undefined) {
  console.log({
    taskName,
    taskNameLength: taskName.length,
  });
}
</code></pre>
<p>This will result in the following error:</p>
<pre><code>index.ts:4:21 - error TS18048: 'taskName' is possibly 'undefined'.
4     taskNameLength: taskName.length,
                      ~~~~~~~~
Found 1 error in index.ts:4
</code></pre>
<p>TypeScript will only allow to do something with the value of a union type if that something is valid for every member of the union.
Since <code>taskName</code> can be either a <code>string</code> or <code>undefined</code>, we can't call <code>.length</code> on it!</p>
<p>Instead we need to <em>narrow</em> the type:</p>
<pre><code class="language-ts">function logTaskName(taskName: string | undefined) {
  if (taskName !== undefined) {
    console.log({
      taskName,
      taskNameLength: taskName.length,
    });
  } else {
    console.log('the task is not defined');
  }
}
</code></pre>
<p>We narrow the type of <code>taskName</code> in the <code>taskName !== undefined</code> branch.
TypeScript can inspect the control flow and realize that since <code>taskName</code> had the <code>string | undefined</code> type and <code>taskName !== undefined</code> in the truthy branch of the if statement, <code>taskName</code> must be of type <code>string</code> inside that branch.</p>
<p>Narrowing can be done by using <code>typeof</code>, checking truthiness of values or with equality checks <code>x === y</code>.</p>
<h3 id="discriminated-unions"><a class="header" href="#discriminated-unions">Discriminated Unions</a></h3>
<p>A particularly important union type is the <strong>discriminated union</strong>.
This is a union where a property is used to discriminate between union members.
Consider the following classical example:</p>
<pre><code class="language-ts">type Square = {
  kind: 'square';
  size: number;
};

type Rectangle = {
  kind: 'rectangle';
  width: number;
  height: number;
};

type Shape = Square | Rectangle;
</code></pre>
<p>We can now narrow values of the discriminated union based on the <strong>discriminant property</strong> (which in this case is <code>kind</code>):</p>
<pre><code class="language-ts">function getArea(shape: Shape) {
  if (shape.kind === 'square') {
    return shape.size * shape.size;
  } else {
    return shape.width * shape.height;
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="generics"><a class="header" href="#generics">Generics</a></h2>
<div style="text-align: right"> <i> Generics are the invisible hat of the TypeScript sage, fitting the heads of both the giant and the dwarf. <br> - Ancient Chinese proverb </i> </div>
<h3 id="why-generics"><a class="header" href="#why-generics">Why Generics?</a></h3>
<p>Generics allow us to write code that is independent of specific types.
Consider the example of retrieving the first element of an array:</p>
<pre><code class="language-js">function getFirstElement(arr) {
  return arr[0];
}
</code></pre>
<p>How would we type this?
We could use <code>any</code>:</p>
<pre><code class="language-ts">function getFirstElement(arr: any): any {
  return arr[0];
}
</code></pre>
<p>However using <code>any</code> is bad since we lose all the type information even if we pass in an array of a known type.</p>
<p>We could also make use of <em>function overloads</em> and write something like this:</p>
<pre><code class="language-ts">function getFirstElement(arr: number[]): number;
function getFirstElement(arr: string[]): string;
function getFirstElement(arr: undefined[]): undefined;
// More overloads and implementation here
</code></pre>
<p>But this obviously gets very tedious and error-prone the more we do it.
Instead TypeScript allows us to use <em>generics</em> to specify that we don't really care about a type.</p>
<h3 id="generic-functions"><a class="header" href="#generic-functions">Generic Functions</a></h3>
<p>Consider the identity function that simply takes an argument <code>arg</code> and returns it unchanged.
We can use a type variable <code>Type</code> and type it like this:</p>
<pre><code class="language-ts">function identity&lt;Type&gt;(arg: Type): Type {
  return arg;
}
</code></pre>
<p>This basically says that the <code>identity</code> function takes an argument of type <code>Type</code> and that its return type is of the same type as the argument.
Now we get proper type inference:</p>
<pre><code class="language-ts">let val = 'Hello, world!';
let val2 = identity&lt;string&gt;(val); // val2 is of type string
</code></pre>
<p>We dont actually have to manually specify the type <code>string</code> when calling the function and can instead rely on TypeScripts inference:</p>
<pre><code class="language-ts">let val = 'Hello, world!';
let val2 = identity(val); // val2 is of type string
</code></pre>
<blockquote>
<p>There is no single convention for naming type parameters.
Common names includew <code>T</code>, <code>Type</code> and <code>TType</code>.</p>
</blockquote>
<h3 id="generic-object-types"><a class="header" href="#generic-object-types">Generic Object Types</a></h3>
<p>Just like with functions, we can use type parameters with objects:</p>
<pre><code class="language-ts">type Box&lt;Type&gt; = {
  content: Type;
};
</code></pre>
<p>Now we can use the <code>Box</code> type with any type:</p>
<pre><code class="language-ts">// box has the type Box&lt;number&gt;
const box = {
  content: 0,
};

// box2 has the type Box&lt;string&gt;
const box2 = {
  content: 'Hello, world!',
};
</code></pre>
<h3 id="important-builtin-generics"><a class="header" href="#important-builtin-generics">Important Builtin Generics</a></h3>
<p>Generic object types can function as versatile containers, unaffected by the specific types of items they hold.
Such flexibility in data structures is preferred, allowing them to be applied across various data kinds.</p>
<p>Examples of generic object types are:</p>
<ul>
<li><code>Array&lt;Type&gt;</code></li>
<li><code>Map&lt;Key, Value&gt;</code></li>
<li><code>Set&lt;Type&gt;</code></li>
<li><code>Record&lt;Key, Value&gt;</code></li>
</ul>
<p>One other very important generic type is the <code>Promise</code> type which can be used to annotate asynchronous functions.
For example, if we have an asynchronous function <code>f</code> that returns a promise with a string, we would annotate it like this:</p>
<pre><code class="language-ts">async function f(): Promise&lt;string&gt; {
  // Implementation here
}
</code></pre>
<h3 id="generic-constraints"><a class="header" href="#generic-constraints">Generic Constraints</a></h3>
<p>Often, we don't want to pass <em>completely arbitrary</em> type parameters.
For example we might want to ensure that the variable we pass has the <code>length</code> property.
We can't just use it though, since this will lead to an error.
Consider this example:</p>
<pre><code class="language-ts">function printLength&lt;Type&gt;(arg: Type): number {
  return arg.length;
}
</code></pre>
<p>This will throw the following error:</p>
<pre><code>index.ts:2:14 - error TS2339: Property 'length' does not exist on type 'Type'.
2   return arg.length;
               ~~~~~~
Found 1 error in index.ts:2
</code></pre>
<p>This makes sense since <code>arg</code> can be of literally any type and there is no guarantee that <code>arg</code> will actually have the property <code>length</code>.
To change this, we need to constrain the type <code>Type</code>:</p>
<pre><code class="language-ts">function printLength&lt;Type extends { length: number }&gt;(arg: Type): number {
  return arg.length;
}
</code></pre>
<p>As usual, we can use a type alias here:</p>
<pre><code class="language-ts">type HasLength = {
  length: number;
};

function printLength&lt;Type extends HasLength&gt;(arg: Type): number {
  return arg.length;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="the-keyof-and-typeof-type-operators"><a class="header" href="#the-keyof-and-typeof-type-operators">The keyof and typeof Type Operators</a></h2>
<div style="text-align: right"> <i> He who understands the keyof can unlock the mysteries of the object, and with typeof, discern its essence. <br> - Ancient Chinese proverb </i> </div>
<h3 id="the-keyof-type-operator"><a class="header" href="#the-keyof-type-operator">The keyof Type Operator</a></h3>
<p>The <code>keyof</code> type operator takes an object type and produces a literal union of its keys.
For example:</p>
<pre><code class="language-ts">type User = { name: string; email: string; age: number };
type UserKeys = keyof User;

// UserKeys is equivalent to &quot;name&quot; | &quot;email&quot; | &quot;age&quot;
</code></pre>
<p>The <code>keyof</code> type operator is particularly useful with generics.
Consider the following example:</p>
<pre><code class="language-ts">function getProperty&lt;Type, Key&gt;(obj: Type, key: Key) {
  return obj[key];
}
</code></pre>
<p>This will <em>not</em> compile because we have no idea if <code>key</code> can be used to index into <code>obj</code> so you will get the following error:</p>
<pre><code>index.ts:2:10 - error TS2536: Type 'Key' cannot be used to index type 'Type'.
2   return obj[key];
           ~~~~~~~~
Found 1 error in index.ts:2
</code></pre>
<p>Therefore we need to specify that <code>Key</code> should be of a type that can be used to index into an object of type <code>Type</code>.
In other words, <code>Key</code> should extend <code>keyof Type</code>:</p>
<pre><code class="language-ts">function getProperty&lt;Type, Key extends keyof Type&gt;(obj: Type, key: Key) {
  return obj[key];
}
</code></pre>
<h3 id="the-typeof-type-operator"><a class="header" href="#the-typeof-type-operator">The typeof Type Operator</a></h3>
<p>The <code>typeof</code> type operator can be used to refer to the type of a variable:</p>
<pre><code class="language-ts">let str = 'Hello, world!';
let str2: typeof str; // str2 is a string
</code></pre>
<p>An example where this is useful is when you want to create a type that is equivalent to the return type of a function.
You can use the generic type <code>ReturnType&lt;T&gt;</code> - the type parameter <code>T</code> is a function type and <code>ReturnType&lt;T&gt;</code> is then the return type of the function.</p>
<p>Consider a function <code>getTask(...)</code> which returns an object of some type.
Then you could get the return type like this:</p>
<pre><code class="language-ts">type MyReturnType = ReturnType&lt;typeof getTask&gt;;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-3-a-vanilla-client"><a class="header" href="#chapter-3-a-vanilla-client">Chapter 3: A Vanilla Client</a></h1>
<div style="text-align: right"> <i> Whenever you write a web app in vanilla JavaScript, you end up creating your own framework. <br> And who in their right mind wants another JavaScript framework? <br> - Common programmer idiom </i> </div>
<p>In this chapter we will write a client a in <em>vanilla</em> HTML and JavaScript (i.e. without using any frameworks).
Then we will realize why this is not such a great idea and why we might want to consider using a library (spoiler: it's going to be React) to help us out.</p>
<p>If this sounds like a pointless exercise - it's not.
You need to know the basics of HTML anyway (even if you will use React for everything later).
Additionally, web development shouldn't consists of stapling a bunch of magic together and praying that it works.
In order to accomplish this, you will need a solid foundation to build on.</p>
<p>This chapter presents that solid foundation.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="hypertext-markup-language"><a class="header" href="#hypertext-markup-language">Hypertext Markup Language</a></h2>
<div style="text-align: right"> <i> Hey guys, how do I parse HTML with a regular expression? <br> - Seconds before disaster </i> </div>
<h3 id="a-minimal-html-file"><a class="header" href="#a-minimal-html-file">A Minimal HTML File</a></h3>
<p>Create a project directory (<em>easy-opus</em> for example).
From here on, all work will be done within the <em>easy-opus</em> directory.</p>
<p>Now, let's create a webpage using <strong>HTML</strong>, a markup language designed for defining documents to be displayed in a browser.
We briefly touched on HTML in section 1.1, but now we will look at HTML a bit more detail.</p>
<blockquote>
<p>Markup languages provide rules for defining the type of information contained in a document.
Markup languages differ from programming languages - while markup languages enable the creation of displayable documents, programming languages offer much more powerful capabilities.
Therefore HTML is a markup language and JavaScript is a programming language.</p>
</blockquote>
<p>Create a file named <code>index.html</code> in the project directory.
Now write some minimal useful HTML to display two hardcoded tasks:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;title&gt;Easy Opus&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;app&quot;&gt;
      &lt;div&gt;
        &lt;h1&gt;My tasks&lt;/h1&gt;
        &lt;div id=&quot;taskList&quot;&gt;
          &lt;p&gt;Read the Next.js book&lt;/p&gt;
          &lt;p&gt;Write a website&lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>When you open the HTML file in your browser you should see a heading and two tasks.</p>
<p>Hooray, you've created a simple HTML document!
Now you can close this book and go procrastinate.</p>
<p>What's that?
You're not budging?
Hm, that's weird.
Oh we see, you've <em>unfortunately</em> been <em>forced</em> to read this book (blink <em>once</em> for help).</p>
<p>Well, since we both have to be here anyway, let's march onwards and dissect the masterpiece you've just created!</p>
<h3 id="html-elements"><a class="header" href="#html-elements">HTML Elements</a></h3>
<p>HTML is comprised of <strong>HTML elements</strong> used to specify the type of content you want to render.
For example, the <code>p</code> element represents a paragraph:</p>
<pre><code class="language-html">&lt;p&gt;Read the Next.js book&lt;/p&gt;
</code></pre>
<p>An HTML element usually has some <strong>content</strong> between an <strong>opening tag</strong> and a <strong>closing tag</strong>.
The opening tag is the name of the element wrapped in angle brackets (like <code>&lt;p&gt;</code>).
The closing tag is the name of the element wrapped in angle brackets with a <em>forward slash before the element name</em> (like <code>&lt;/p&gt;</code>).</p>
<p>There are various HTML elements, such as <code>p</code> for paragraphs and <code>div</code> for generic containers.
We will discuss more elements later.</p>
<p>HTML's power lies in the fact that most elements can be nested.
For example, you could nest paragraphs within a generic container:</p>
<pre><code class="language-html">&lt;div&gt;
  &lt;p&gt;Read the Next.js book&lt;/p&gt;
  &lt;p&gt;Create a website&lt;/p&gt;
  &lt;p&gt;???&lt;/p&gt;
  &lt;p&gt;Profit!&lt;/p&gt;
&lt;/div&gt;
</code></pre>
<p>The nesting can go as many levels as you want.
For example, we could use the <code>&lt;em&gt;</code> element to emphasize some of the words in the previous example:</p>
<pre><code class="language-html">&lt;div&gt;
  &lt;p&gt;Read the &lt;em&gt;Next.js&lt;/em&gt; book&lt;/p&gt;
  &lt;p&gt;Create a &lt;em&gt;website&lt;/em&gt;&lt;/p&gt;
  &lt;p&gt;???&lt;/p&gt;
  &lt;p&gt;Profit!&lt;/p&gt;
&lt;/div&gt;
</code></pre>
<p>Note that to do nesting correctly, the tags of the element being nested must be inside the tags of the element it is being nested in.
For example the tags of the element <code>&lt;em&gt;Next.js&lt;/em&gt;</code> are inside the element <code>&lt;p&gt;Read the &lt;em&gt;Next.js&lt;/em&gt; book&lt;/p&gt;</code>.</p>
<h3 id="html-attributes"><a class="header" href="#html-attributes">HTML Attributes</a></h3>
<p>Elements can also have <strong>HTML attributes</strong>.
Attributes contain further information about the element.
Two particularly important attributes are <code>id</code> and <code>class</code>.</p>
<p>The <code>id</code> attribute is used to specify a <strong>unique identity</strong> for an HTML element.
You can use that attribute to - well - uniquely identify an element.
This allows us to reference that element using JavaScript or CSS.</p>
<p>Here is how we can create an element with an <code>id</code> attribute:</p>
<pre><code class="language-html">&lt;p id=&quot;readBook&quot;&gt;Read the Next.js book&lt;/p&gt;
</code></pre>
<p>Generally speaking, you can specify attributes by writing the attribute name, followed by an equal sign, followed by the attribute value (which is wrapped inside double quotes).</p>
<p>The <code>class</code> attribute is used to specify a <strong>class</strong> for an HTML element.
Unlike unique identifiers, multiple HTML elements can share the same class, which is useful for applying consistent styles to multiple elements.
For example you could color all HTML elements of class <code>blue-text</code> blue.</p>
<p>There are many more attributes and different HTML elements often have different attributes.</p>
<p>We will cover some of the most important elements together with their attributes in the next section.</p>
<h3 id="structure-of-an-html-document"><a class="header" href="#structure-of-an-html-document">Structure of an HTML Document</a></h3>
<p>Let's have a look at <code>index.html</code> again:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;title&gt;Easy Opus&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;app&quot;&gt;
      &lt;div&gt;
        &lt;h1&gt;My tasks&lt;/h1&gt;
        &lt;div id=&quot;taskList&quot;&gt;
          &lt;p&gt;Read the Next.js book&lt;/p&gt;
          &lt;p&gt;Write a website&lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>The document begins with <code>&lt;!DOCTYPE html&gt;</code> which is a <em>document type declaration</em>.
It is there mainly for historical reasons - in the <em>olden days</em> of HTML the doctype specified which rules the HTML page followed.
Nowadays, we just use the shortest valid doctype which happens to be <code>&lt;!DOCTYPE html&gt;</code>.</p>
<p>The doctype is followed by an <code>&lt;html&gt;</code> element which contains all the content of the document.
This element is usually called the <strong>root element</strong>.</p>
<p>The <code>&lt;head&gt;</code> element includes important information about the page.
Here is where we could specify how our page would appear in search results, which character encoding our website uses and more.</p>
<p>In our example the <code>&lt;head&gt;</code> element includes a <code>&lt;meta&gt;</code> element with a <code>charset</code> attribute and a <code>&lt;title&gt;</code> element.
This particular <code>&lt;meta&gt;</code> element describes the character encoding for the HTML document (we will return to this later in more detail) and the <code>&lt;title&gt;</code> element sets the title of the page (i.e. the title that will appear in the browser tab).</p>
<p>Finally the <code>&lt;body&gt;</code> element contains all the content that will actually be rendered on the page.
In our example, the heading and the task list are within the <code>&lt;body&gt;</code> element.</p>
<blockquote>
<p>We will discuss character encodings in greater detail later.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="marking-up-text"><a class="header" href="#marking-up-text">Marking Up Text</a></h2>
<div style="text-align: right"> <i> Who needs semantic HTML anyway? <br> - Seconds before disaster </i> </div>
<h3 id="the-paragraph-element"><a class="header" href="#the-paragraph-element">The Paragraph Element</a></h3>
<p>The most basic element for marking up text is the paragraph element <code>&lt;p&gt;</code>:</p>
<pre><code class="language-html">&lt;p&gt;This is the first paragraph of many, many paragraphs.&lt;/p&gt;
&lt;p&gt;This is the second paragraph of many, many paragraphs.&lt;/p&gt;
&lt;p&gt;This is the third paragraph of many, many paragraphs.&lt;/p&gt;
</code></pre>
<p>Visually paragraphs are represented as text blocks separated from surrounding content by blank lines.
Paragraphs are commonly used to group related text.</p>
<h3 id="breaking-up-text"><a class="header" href="#breaking-up-text">Breaking Up Text</a></h3>
<p>You can break up text with the line break element <code>&lt;br&gt;</code>:</p>
<pre><code class="language-html">There is a line break here. &lt;br /&gt;
This is some text after the line break.
</code></pre>
<p>Additionally you can use the <code>&lt;hr&gt;</code> element for a thematic break of some text.
It will usually be visually presented as a horizontal line.</p>
<pre><code class="language-html">Here is some text. &lt;hr /&gt; Here some text about something totally different.
</code></pre>
<p>Often the <code>&lt;hr /&gt;</code> element is used to introduce thematic breaks between paragraphs.</p>
<h3 id="heading-elements"><a class="header" href="#heading-elements">Heading Elements</a></h3>
<p>There are six heading elements <code>&lt;h1&gt;</code> to <code>&lt;h6&gt;</code>.
The different heading elements represent different &quot;heading levels&quot;, e.g. <code>&lt;h1&gt;</code> is the main heading, <code>&lt;h2&gt;</code> a subheading and so on:</p>
<pre><code class="language-html">&lt;h1&gt;Main heading&lt;/h1&gt;

&lt;h2&gt;Subheading 1&lt;/h2&gt;
&lt;h3&gt;Subsubheading 1.1&lt;/h3&gt;
&lt;p&gt;Some content related to subheading 1.1&lt;/p&gt;
&lt;h3&gt;Subsubheading 1.2&lt;/h3&gt;
&lt;p&gt;Some content related to subheading 1.2&lt;/p&gt;

&lt;h2&gt;Subheading 2&lt;/h2&gt;

&lt;h3&gt;Subsubheading 2.1&lt;/h3&gt;
&lt;p&gt;Some content related to subheading 2.1&lt;/p&gt;
&lt;h3&gt;Subsubheading 2.2&lt;/h3&gt;
&lt;p&gt;Some content related to subheading 2.2&lt;/p&gt;
</code></pre>
<p>You will rarely need <code>&lt;h4&gt;</code> to <code>&lt;h6&gt;</code> - very few documents require such an amount of heading levels.</p>
<blockquote>
<p>Always try to use a single <code>&lt;h1&gt;</code> per page since this is the top level heading.</p>
</blockquote>
<h3 id="emphasis-and-importance"><a class="header" href="#emphasis-and-importance">Emphasis and Importance</a></h3>
<p>If we want to emphasize a part of a text (like an important word) we can use the <code>&lt;em&gt;</code> and <code>&lt;strong&gt;</code> elements.
The <code>&lt;em&gt;</code> element marks that a text should be emphasized, for example:</p>
<pre><code class="language-html">The weather today is &lt;em&gt;very&lt;/em&gt; hot.
</code></pre>
<p>The <code>&lt;strong&gt;</code> element marks that a text has strong importance, for example:</p>
<pre><code class="language-html">The weather today is not just hot, it's &lt;strong&gt;scorching&lt;/strong&gt;.
</code></pre>
<p>As you probably guessed, deciding which of these two elements is appropriate is largely on you.
If you want to emphasize some part of a text, but it doesn't have strong urgency you should use <code>&lt;em&gt;</code>.
If a text is very important, you should use <code>&lt;strong&gt;</code></p>
<blockquote>
<p>There are also <code>&lt;i&gt;</code> and <code>&lt;b&gt;</code>, however we will rarely use them, since <code>&lt;em&gt;</code> and <code>&lt;strong&gt;</code> have a semantic meaning (see below for what this means).</p>
</blockquote>
<h3 id="other-text-elements"><a class="header" href="#other-text-elements">Other Text Elements</a></h3>
<p>We only scratched the surface of the kind of text markup you can perform with HTML.
There are many, many other elements you can use.
For example, you can mark up subscripts and superscripts with <code>&lt;sub&gt;</code> and <code>&lt;sup&gt;</code> respectively:</p>
<pre><code class="language-html">The chemical formula for water is H&lt;sub&gt;2&lt;/sub&gt;O.
&lt;p&gt;The equation for energy is E = mc&lt;sup&gt;2&lt;/sup&gt;.&lt;/p&gt;
</code></pre>
<p>You can add quotes - both blockquotes (with <code>&lt;blockquote&gt;</code>) and inline quotes (with <code>&lt;q&gt;</code>):</p>
<pre><code class="language-html">&lt;p&gt;As the famous physicist once said:&lt;/p&gt;

&lt;blockquote cite=&quot;https://some-random-quotes.com/&quot;&gt;
  &quot;Stop believing quotes you found on the internet&quot;
&lt;/blockquote&gt;

&lt;p&gt;
  As Einstein once said,
  &lt;q&gt;people who build their lifes around random internet quotes are stupid.&lt;/q&gt;
&lt;/p&gt;
</code></pre>
<p>The point here is not to learn everything single HTML element for marking up text, but to be aware that when it comes to marking up text there might be an HTML element for your usecase.</p>
<h3 id="semantic-html"><a class="header" href="#semantic-html">Semantic HTML</a></h3>
<p>In a few chapters, we will introduce you to CSS, which will allow you to style your HTML elements however you like.
At this point most people forget that there are any elements besides the generic containers <code>&lt;div&gt;</code> and <code>&lt;span&gt;</code> since they can now just <em>style</em> a <code>&lt;span&gt;</code> to look like an <code>&lt;h1&gt;</code>.</p>
<p>This is bad.</p>
<p>The reason this is bad is that <em>looking</em> at a page is not the only way to browse the web.</p>
<p>First of, there are a lot of visually impaired people in the world who use screen readers to navigate the internet.
Screen readers tend to focus on the HTML elements and not the styles (which makes sense, since reading out styles is not really something you want to do).</p>
<p>If you write a heading as a styled <code>&lt;span&gt;</code> instead of an <code>&lt;h1&gt;</code> you are not only doing more (unneccessary) work, you also give visually impaired people a worse experience.
Screen readers often interpret headings in a special way - for example you can ask most screen readers to read all headings on a page out loud and then jump to some heading you care about.
This is of course not possible with <code>&lt;span&gt;</code>s.</p>
<p>Second, your page will also be consumed by programs responsible for indexing and ranking.
If your website contains generic containers only, it will usually be downgraded resulting in (shock and horror) <em>bad Search Engine Optimization</em>.</p>
<p>Therefore you should <em>absolutely not</em> forget about the <em>semantically correct</em> HTML element we presented in this section.</p>
<blockquote>
<p>Also, if you don't use semantically correct HTML, your fellow developers will let you know about this in the <em>smuggest</em> way possible which will feel bad for you.
After all, <em>you</em> want to be one smuggly telling your collegue - &quot;you know, I don't think that this is semantically correct&quot;.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h2 id="hyperlinks-and-images"><a class="header" href="#hyperlinks-and-images">Hyperlinks and Images</a></h2>
<div style="text-align: right"> <i> Who uses `alt` tags on images? They're just decorations, right? <br> - Seconds before disaster </i> </div>
<h3 id="hyperlinks"><a class="header" href="#hyperlinks">Hyperlinks</a></h3>
<p>One of the most important HTML elements is the <strong>hyperlink</strong>.
You are probably already familiar with hyperlinks - they allow you to link web pages, documents or other resources from your page.
If the link is clicked, the linked page is typically opened in your browser for you to see.</p>
<p>Here is how you can create a hyperlink:</p>
<pre><code class="language-html">&lt;a href=&quot;https://example.com&quot;&gt;Example&lt;/a&gt;
</code></pre>
<p>This creates a link with the text &quot;Example&quot; that links the resource mentioned in the <code>href</code> attribute (which in this case is <code>&quot;https://example.com&quot;</code>).
By default the text becomes blue and is underlined.
If you click the text, the web browser opens the page located at <code>https://example.com</code>.</p>
<p>Note that HTML elements can also be made into links, for example:</p>
<pre><code class="language-html">&lt;a href=&quot;https://example.com&quot;&gt;
  &lt;h1&gt;Example&lt;/h1&gt;
&lt;/a&gt;
</code></pre>
<h3 id="images"><a class="header" href="#images">Images</a></h3>
<p>To show an image, you can use the <code>&lt;img&gt;</code> element:</p>
<pre><code class="language-html">&lt;img src=&quot;cat.jpg&quot; alt=&quot;A cute cat&quot; /&gt;
</code></pre>
<p>The <code>src</code> attribute contains the path to the image you want to show.
The <code>alt</code> attribute holds a textual replacement for the image and is necessary in case the image can't be shown.
Try misspelling the filename on purpose an you will see the textual replacement.</p>
<p>In practice the textual replacement is useful if, for example:</p>
<ul>
<li>there is a network error and the image can't be fetched</li>
<li>the user is using a screen reader (in this case the textual replacement is read out loud to him)</li>
<li>the browser doesn't support the image type</li>
<li>the user has turned off images to reduce data transfer</li>
</ul>
<p>Additionally search engines will usually look at the <code>alt</code> attributes of images when processing your web page.</p>
<p>You should therefore <em>always</em> include the <code>alt</code> attribute for every image you serve.</p>
<blockquote>
<p>The <code>alt</code> attribute is a typical example of semantically correct HTML.
Sure, you page will usually look right even if you don't use it, but the user experience for some users will be much worse.</p>
</blockquote>
<h3 id="image-links"><a class="header" href="#image-links">Image Links</a></h3>
<p>You can use the fact that HTML elements can be made into links to create image links:</p>
<pre><code class="language-html">&lt;a href=&quot;https://example.com&quot;&gt;
  &lt;img src=&quot;example.png&quot; alt=&quot;An example image&quot; /&gt;
&lt;/a&gt;
</code></pre>
<p>This will show a clickable image - if the image is clicked, the browser will open <code>https://example.com</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="the-document-object-model"><a class="header" href="#the-document-object-model">The Document Object Model</a></h2>
<div style="text-align: right"> <i> Well, DOM and HTML are baaaasically the same thing. <br> - Seconds before disaster </i> </div>
<h3 id="html-and-dom"><a class="header" href="#html-and-dom">HTML and DOM</a></h3>
<p>When you open an HTML document in a browser, it is represented by the <strong>Document Object Model</strong> (DOM for short).
Essentially, the DOM is a model for documents which represent <em>editable logical trees</em>.
This sounds <em>way</em> scarier than it really is, so let's consider the following example:</p>
<pre><code class="language-html">&lt;div id=&quot;taskList&quot;&gt;
  &lt;p&gt; Read the Next.js book: Read and understand the Next.js book. &lt;/p&gt;
  &lt;p&gt; Write a website: Create a new and cool website. &lt;/p&gt;
&lt;/div&gt;
</code></pre>
<p>Here we have a <code>&lt;div&gt;</code> element (the generic container) and two <code>&lt;p&gt;</code> (paragraph) elements inside it.
The <code>&lt;div&gt;</code> element is the <em>parent</em> of the <code>&lt;p&gt;</code> elements and the <code>&lt;p&gt;</code> elements are the <em>children</em> of the <code>&lt;div&gt;</code> element.
The elements form a (very small) <em>tree</em>:</p>
<p><img src="chapter3/images/small_tree.png" alt="" /></p>
<p>Let's take a bigger document:</p>
<pre><code class="language-html">&lt;div id=&quot;app&quot;&gt;
  &lt;h1&gt;My tasks&lt;/h1&gt;
  &lt;div id=&quot;taskList&quot;&gt;
    &lt;p&gt; Read the Next.js book: Read and understand the Next.js book. &lt;/p&gt;
    &lt;p&gt; Write a website: Create a new and cool website. &lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>You can visualize it like this:</p>
<p><img src="chapter3/images/tree.png" alt="" /></p>
<p>It's crucial to distinguish between HTML and the DOM, as they are <em>absolutely</em> not the same thing.
The DOM is a <em>language-agnostic model</em> that represents the structure of a document.
On the other hand, HTML is a <em>specific language</em> that encodes a particular kind of DOM into text usable by web browsers.</p>
<h2 id="manipulating-the-dom-using-javascript"><a class="header" href="#manipulating-the-dom-using-javascript">Manipulating the DOM using JavaScript</a></h2>
<p>Whenever you write applications which have a lot of logic in the client, you will need to manipulate the DOM (i.e. add, remove or change items).
For example, if we add a task, we might need to add some elements to the current tree representing the task.
This is how the corresponding JavaScript™ code would look like:</p>
<pre><code class="language-javascript">const paragraph = document.createElement('p');
paragraph.innerHTML = 'New task';
const taskList = document.querySelector('#taskList');
taskList.appendChild(paragraph);
</code></pre>
<p>We could now add a button and execute this code whenever the button is clicked by registering a <code>click</code> event listener on the button:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;title&gt;Easy Opus&lt;/title&gt;
    &lt;script&gt;
      function addTask() {
        const paragraph = document.createElement('p');
        paragraph.innerHTML = 'New task';
        const taskList = document.querySelector('#taskList');
        taskList.appendChild(paragraph);
      }
    &lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;taskList&quot;&gt;
      &lt;button id=&quot;addTask&quot; onclick=&quot;addTask()&quot;&gt;Add a task&lt;/button&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="web-forms"><a class="header" href="#web-forms">Web Forms</a></h2>
<div style="text-align: right"> <i> A 10-page registration form seems reasonable, right? <br> - Seconds before disaster </i> </div>
<h3 id="why-web-forms"><a class="header" href="#why-web-forms">Why Web Forms?</a></h3>
<p><strong>Web forms</strong> (or just <strong>forms</strong> for short) provide a tool for accepting user input.
They are one of the key components that make your pages interactive.
A web form contains one or more <strong>form controls</strong> which are usually paired with text labels that describe the purpose of the control.
For example a textual form control for providing a message might be paired with a label explaining that the textual form control represents a message.</p>
<p>Consider a very common example - the contact form.</p>
<p>Such a contact form should probably have:</p>
<ul>
<li>a text input for the name of the user submitting the form</li>
<li>a text input for the email of the user submitting the form</li>
<li>a multiline text input for the message to submit</li>
<li>a submit button</li>
</ul>
<h3 id="creating-a-form"><a class="header" href="#creating-a-form">Creating a Form</a></h3>
<p>Forms can be created using the <code>&lt;form&gt;</code> element:</p>
<pre><code class="language-html">&lt;form&gt; ... &lt;/form&gt;
</code></pre>
<blockquote>
<p>Note that usually <code>&lt;form&gt;</code> elements contain an <code>action</code> attribute which defines the URL where the form's data should be submitted.
However in this book we will handle form submissions manually, so we won't go in detail on the <code>action</code> attribute.</p>
</blockquote>
<p>Let's now add the form control for the username along with a label (note that the elements should go in between the <code>&lt;form&gt;&lt;/form&gt;</code> tags):</p>
<pre><code class="language-html">&lt;!-- The label --&gt;
&lt;label for=&quot;name&quot;&gt;Name:&lt;/label&gt;
&lt;!-- The form control--&gt;
&lt;input type=&quot;text&quot; id=&quot;name&quot; name=&quot;name&quot; /&gt;
</code></pre>
<p>There are two HTML elements at play here - <code>&lt;input&gt;</code> and <code>&lt;label&gt;</code>.</p>
<p>The form control is represented by the <code>&lt;input&gt;</code> element.
It has a lot of various attributes, but the two most important ones (apart from the <code>id</code> attribute) are the <code>type</code> and <code>name</code> attribute.
The <code>type</code> attribute represents the type of the form control.
For example a plaintext input field would have the type <code>text</code> while a checkbox would have the type <code>checkbox</code>.
The <code>name</code> attribute specifies a name for the form control.
This attribute is important when submitting the form (usually by clicking the submit button) as it will identify the submitted value.</p>
<p>The label is represented by the <code>&lt;label&gt;</code> element.
The <code>for</code> attribute of the label must be an ID for a form control.
In this case the ID of the <code>&lt;input&gt;</code> element is <code>name</code> and therefore the <code>for</code> attribute of the <code>&lt;label&gt;</code> element has <code>name</code> as its value.</p>
<p>Now let's add the form control for the email.
We could theoretically use the <code>text</code> type again, however HTML provides us a custom email type called <code>email</code>.
This field looks a like a regular text input, but has a few additional nice properties - for example the email is validated on submission:</p>
<pre><code class="language-html">&lt;!-- The label --&gt;
&lt;label for=&quot;email&quot;&gt;Email:&lt;/label&gt;
&lt;!-- The form control--&gt;
&lt;input type=&quot;email&quot; id=&quot;email&quot; name=&quot;email&quot; /&gt;
</code></pre>
<p>Finally for the multiline text we will use the <code>&lt;textarea&gt;</code> element:</p>
<pre><code class="language-html">&lt;!-- The label --&gt;
&lt;label for=&quot;message&quot;&gt;Message:&lt;/label&gt;
&lt;!-- The form control--&gt;
&lt;textarea id=&quot;message&quot; name=&quot;message&quot;&gt;&lt;/textarea&gt;
</code></pre>
<p>The last element we need is the submit button:</p>
<pre><code class="language-html">&lt;button type=&quot;submit&quot;&gt;Send&lt;/button&gt;
</code></pre>
<p>Here is how the final form will look like:</p>
<pre><code class="language-html">&lt;form&gt;
  &lt;label for=&quot;name&quot;&gt;Name:&lt;/label&gt;
  &lt;input type=&quot;text&quot; id=&quot;name&quot; name=&quot;name&quot; /&gt;
  &lt;label for=&quot;email&quot;&gt;Name:&lt;/label&gt;
  &lt;input type=&quot;email&quot; id=&quot;email&quot; name=&quot;email&quot; /&gt;
  &lt;label for=&quot;message&quot;&gt;Message:&lt;/label&gt;
  &lt;textarea id=&quot;message&quot; name=&quot;message&quot;&gt;&lt;/textarea&gt;
  &lt;button type=&quot;submit&quot;&gt;Send&lt;/button&gt;
&lt;/form&gt;
</code></pre>
<h3 id="structuring-forms-with-fieldset-and-legend"><a class="header" href="#structuring-forms-with-fieldset-and-legend">Structuring Forms with <code>&lt;fieldset&gt;</code> and <code>&lt;legend&gt;</code></a></h3>
<p>We can use the <code>&lt;fieldset&gt;</code> and <code>&lt;legend&gt;</code> attrributes to further improve our form:</p>
<pre><code class="language-html">&lt;form&gt;
  &lt;fieldset&gt;
    &lt;legend&gt;Message Form&lt;/legend&gt;
    &lt;label for=&quot;name&quot;&gt;Name:&lt;/label&gt;
    &lt;input type=&quot;text&quot; id=&quot;name&quot; name=&quot;name&quot; /&gt;
    &lt;label for=&quot;email&quot;&gt;Name:&lt;/label&gt;
    &lt;input type=&quot;email&quot; id=&quot;email&quot; name=&quot;email&quot; /&gt;
    &lt;label for=&quot;message&quot;&gt;Message:&lt;/label&gt;
    &lt;textarea id=&quot;message&quot; name=&quot;message&quot;&gt;&lt;/textarea&gt;
    &lt;button type=&quot;submit&quot;&gt;Send&lt;/button&gt;
  &lt;/fieldset&gt;
&lt;/form&gt;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h2 id="a-simple-client"><a class="header" href="#a-simple-client">A Simple Client</a></h2>
<div style="text-align: right"> <i> Why use a framework? I'll just write my own in a weekend. <br> - Seconds before disaster </i> </div>
<h3 id="the-requirements"><a class="header" href="#the-requirements">The Requirements</a></h3>
<p>One day you sit around and dream about some sunshine as suddently the dreaded <em>Project Manager</em> approaches you and asks you to build a small task application.
The application should consist of a list showing the current tasks.
Additionally, a web form should allow the user to create a new task (which should then be displayed in the list of current tasks).</p>
<h3 id="the-initial-html"><a class="header" href="#the-initial-html">The Initial HTML</a></h3>
<p>You get to work and quickly come up with the initial document:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;title&gt;Task List App&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;Task List&lt;/h1&gt;

    &lt;!-- Task List --&gt;
    &lt;ul id=&quot;taskList&quot;&gt; &lt;/ul&gt;

    &lt;!-- Form to Add Tasks --&gt;
    &lt;h2&gt;Add a Task&lt;/h2&gt;
    &lt;form id=&quot;taskForm&quot;&gt;
      &lt;label for=&quot;taskInput&quot;&gt;Task:&lt;/label&gt;
      &lt;input type=&quot;text&quot; id=&quot;taskInput&quot; placeholder=&quot;Enter your task&quot; /&gt;
      &lt;button type=&quot;submit&quot;&gt;Add Task&lt;/button&gt;
    &lt;/form&gt;

    &lt;!-- JavaScript will go here --&gt;
    &lt;script&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>You now have a heading, a list and a form.
However if you click the submit button, not a whole lot happens - this is because we haven't added any submit logic to the form yet.</p>
<h3 id="grabbing-the-items"><a class="header" href="#grabbing-the-items">Grabbing the Items</a></h3>
<p>Lets first grab the relevant items (the code goes between the <code>&lt;script&gt;&lt;/script&gt;</code> tags).
This can be done using the <code>querySelector</code> method.
In this case we want to select by ID, so we use the <code>#</code> selector:</p>
<pre><code class="language-js">const taskList = document.querySelector('#taskList');
const taskForm = document.querySelector('#taskForm');
</code></pre>
<h3 id="adding-an-event-listener"><a class="header" href="#adding-an-event-listener">Adding an Event Listener</a></h3>
<p>Next, we need to add an event listener to <code>taskForm</code>.
This can be done via the <code>addEventListener</code> function which takes two arguments.
The first argument is the event to listen to (which is <code>'submit'</code> in this case).
The second argument is a function that takes the specific event and handles it.
Note that <code>addEventListener</code> is a typical example of a higher-order function since it takes a function as one of its arguments.</p>
<p>Let's just log the <code>currentTarget</code> of the event for now.
This property identifies the element to which the event handler has been attached (in this case it's the task form).</p>
<pre><code class="language-js">taskForm.addEventListener('submit', function (event) {
  // Prevent default form submission
  event.preventDefault();

  console.log({ currentTarget: event.currentTarget });
});
</code></pre>
<p>The currentTarget has the proeprty <code>elements</code> which contains <code>taskInput</code> and that has a value:</p>
<pre><code class="language-js">taskForm.addEventListener('submit', function (event) {
  // Prevent default form submission
  event.preventDefault();

  console.log({ inputValue: event.currentTarget.taskInput.value });
});
</code></pre>
<p>This should log the input.</p>
<p>Lets now store it in a variable and use <code>trim</code> to remove whitespace:</p>
<pre><code class="language-js">taskForm.addEventListener('submit', function (event) {
  // Prevent default form submission
  event.preventDefault();

  const task = event.currentTarget.taskInput.value.trim();
});
</code></pre>
<p>Finally we will use the <code>createElement</code> method to create a new <code>li</code> element and the <code>appendChild</code> method to add the newly created element to our task list:</p>
<pre><code class="language-js">taskForm.addEventListener('submit', function (event) {
  // Prevent default form submission
  event.preventDefault();

  const task = event.currentTarget.taskInput.value.trim();

  const li = document.createElement('li');
  li.textContent = task;
  taskList.appendChild(li);

  // Clear the input field
  event.currentTarget.taskInput.value = '';
});
</code></pre>
<p>Now you click the button, you will see that a task will be added.</p>
<h3 id="adding-a-delete-button"><a class="header" href="#adding-a-delete-button">Adding a Delete Button</a></h3>
<p>As you complete the project, the <em>Project Manager</em> once again walks up to you and remembers that it might be a good idea to allow the user to delete tasks.
So now you need to add a delete button.</p>
<p>This means that whenever you create a new element, you need to add a delete button to it.
To accomplish this we first need to create the delete button:</p>
<pre><code class="language-js">const li = document.createElement('li');
li.textContent = task;

// New code starts here

const deleteButton = document.createElement('button');
deleteButton.textContent = 'Delete';
</code></pre>
<p>Then we need to attach an event listener to the delete button:</p>
<pre><code class="language-js">deleteButton.addEventListener('click', function () {
  taskList.removeChild(li);
});
</code></pre>
<p>Finally we need to add the delete button to the task item:</p>
<pre><code class="language-js">li.appendChild(deleteButton);
</code></pre>
<p>Quite a lot of work to just add a little delete button.
Additionally our code is now all over the place and not really reusable.
This doesn't seem like it will scale to a larger application.</p>
<p>To simplify our lives, we will use a library called <strong>React</strong>.
The idea behind React is to create declarative UIs with nicely separated components.
Basically we only define how the application should look like (hence the <em>declarative</em> aspect) and React takes care of the rest, such as determining the necessary DOM manipulations.
As you will see soon, this is an incredibly useful feature.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-2-the-client"><a class="header" href="#chapter-2-the-client">Chapter 2: The client</a></h1>
<div style="text-align: right"> <i> This website needs to work on Internet Explorer 6.0 <br> - Famous last words </i> </div>
<p>In this chapter we will create a simple (website) client. This client will allow us to add and delete tasks. Each task will have a summary and a description.</p>
<p>Create a directory which will contain your project. We called that directory <em>easy-opus</em> (it is common to name your project directory after the project). Of course, feel free to give your directory any <em>meaningful</em> name.</p>
<p>Let's begin.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="first-steps-in-react"><a class="header" href="#first-steps-in-react">First steps in React</a></h2>
<div style="text-align: right"> <i> The last thing the world needs is another JavaScript library. <br> - Ancient Chinese proverb </i> </div>
<h3 id="rendering-a-react-element"><a class="header" href="#rendering-a-react-element">Rendering a React element</a></h3>
<p>Let us import React using a <strong>content delivery network</strong> (CDN for short). Open <code>client/index.html</code> and insert the following <code>&lt;script&gt;</code> between the <code>&lt;head&gt;</code> tags:</p>
<pre><code class="language-html">&lt;head&gt;
  ...
  &lt;script src=&quot;https://unpkg.com/react@18/umd/react.development.js&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;https://unpkg.com/react-dom@18/umd/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
</code></pre>
<p>This instructs our browser to obtain and execute the respective JavaScript files enabling us to use React.</p>
<p>Now we remove the <code>&lt;h1&gt;</code> in the <code>&lt;div&gt;</code> element (since we are about to insert it dynamically). We also add a pair of <code>&lt;script&gt;</code> tags - all the JavaScript we are about to write will go between those <code>&lt;script&gt;</code> tags. The body now looks like this:</p>
<pre><code class="language-html">&lt;body&gt;
  &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
  &lt;script&gt;&lt;/script&gt;
&lt;/body&gt;
</code></pre>
<p>First we need to create a React <strong>root</strong>. This is the container in which we will render all our fancy UI elements. React DOM provides a <code>createRoot</code> function to accomplish that. The function takes a container, creates a React root for the container and returns the root:</p>
<pre><code class="language-javascript">const root = ReactDOM.createRoot(document.querySelector('#root'));
</code></pre>
<p>Next we want to actually create our React elements using the <code>React.createElement</code> function. A <strong>React element</strong> is essentially a building block describing some part of your UI. For example we could create a heading containing the text &quot;Tasks&quot; like this:</p>
<pre><code class="language-javascript">const element = React.createElement('h1', undefined, 'Tasks');
</code></pre>
<p>Let's have a look at the arguments here. The first argument is the <em>type</em> of the element. This can for example be the name of a regular HTML tag - however other types are possible and will in fact become very important soon. The second argument describes the <em>props</em> of the element. Here we could e.g. pass the ID of the element - if we need one. If we don't want to pass any props, we simply pass <code>undefined</code>. The third argument contains the <em>children</em> of the element. In this case we only have one child which is the text inside the heading.</p>
<blockquote>
<p>Note that quite often you will see people passing <code>null</code> as the second argument if no props are present. This goes back to our discussion regarding <code>null</code> and <code>undefined</code> - in this book we always use <code>undefined</code> to indicate value absence.</p>
</blockquote>
<p>Now that we have created a root and an element, we can render the element inside the root by using the conveniently named <code>render</code> function:</p>
<pre><code class="language-javascript">root.render(element);
</code></pre>
<p>This is how it all looks together (remember that this code should be between the <code>&lt;script&gt;</code> tags):</p>
<pre><code class="language-javascript">const element = React.createElement('h1', undefined, 'Tasks');
const root = ReactDOM.createRoot(document.querySelector('#root'));
root.render(element);
</code></pre>
<p>This is how the entire HTML file should look like:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;title&gt;Easy Opus&lt;/title&gt;
    &lt;script src=&quot;https://unpkg.com/react@18/umd/react.development.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://unpkg.com/react-dom@18/umd/react-dom.development.js&quot;&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
    &lt;script&gt;
      const element = React.createElement('h1', undefined, 'Tasks');
      const root = ReactDOM.createRoot(document.querySelector('#root'));
      root.render(element);
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Now open the HTML file in your browser. You should see a heading &quot;Tasks&quot;. Let us now inspect the resulting HTML using the browser inspector (press <kbd>F12</kbd> and open the tab labeled &quot;Inspector&quot; <em>or</em> &quot;Elements&quot;). This is how the HTML inside the body looks like:</p>
<pre><code class="language-html">&lt;div id=&quot;root&quot;&gt;
  &lt;h1&gt;Tasks&lt;/h1&gt;
&lt;/div&gt;
</code></pre>
<p>As you can see our element has been rendered inside the root. Great! Now you know how to manipulate the DOM with React. Go head and add React to your resume (unless of course you actually want to <em>learn</em> it which we <em>highly disapprove of</em>)!</p>
<h3 id="add-children-to-react-elements"><a class="header" href="#add-children-to-react-elements">Add children to React elements</a></h3>
<p>Let us now add some tasks and render them just like we did in the previous section. Every member of the list will in turn be a child of the list itself. This looks as following:</p>
<pre><code class="language-javascript">const task1 = React.createElement(
  'p',
  undefined,
  'Read the MERN book: Read and understand the MERN book.',
);
const task2 = React.createElement(
  'p',
  undefined,
  'Write a website: Create a new and cool website.',
);
const taskList = React.createElement('div', { id: 'taskList' }, task1, task2);
const heading = React.createElement('h1', undefined, 'Tasks');
const app = React.createElement('div', { id: 'app' }, heading, taskList);
const root = ReactDOM.createRoot(document.querySelector('#root'));
root.render(app);
</code></pre>
<p>Here we create two tasks (<code>task1</code> and <code>task2</code>). Then we create a <code>&lt;div&gt;</code> (<code>taskList</code>) containing those tasks. Then we create a heading element (<code>heading</code>). Finally we create a div containing the list of tasks and the heading (<code>app</code>) and render that element inside the root.</p>
<p>At this point you are probably asking yourself: <em>Didn't you just promise me that manipulating the DOM in React will be simple, you liars? This looks just like regular Javascript™®℠.</em> You have a point (the one after the trademark symbols) and we will indeed vastly simplify this code in the next section via black magic called <strong>JSX</strong>.</p>
<h3 id="summary"><a class="header" href="#summary">Summary</a></h3>
<p>Now you know how to import React using a CDN and how to dynamically manipulate the DOM using <code>React.createElement</code> and <code>ReactDOM.createRoot</code>. You also know you shouldn't actually do this.</p>
<h2 id="further-reading"><a class="header" href="#further-reading">Further reading</a></h2>
<p>There is no further reading for this section.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="introducing-jsx"><a class="header" href="#introducing-jsx">Introducing JSX</a></h2>
<div style="text-align: right"> <i> So, JSX is basically HTML... <br> - Famous last words </i> </div>
<h3 id="add-jsx"><a class="header" href="#add-jsx">Add JSX</a></h3>
<p>Instead of writing increasingly convoluted <code>React.createElement</code> calls until we lose the last scraps of our sanity, we would like to use syntax that looks like HTML. For example we would <em>really like</em> to be able to write stuff like this:</p>
<pre><code class="language-javascript">const element = &lt;li id=&quot;task1&quot;&gt;Task 1&lt;/li&gt;;
</code></pre>
<p>Unfortunately this is not possible as the above is not valid JavaScript (no trademarks this time, we promise). Feel free to try it out and add the above JavaScript to your <code>&lt;script&gt;</code> tags inside <code>client/index.html</code>. When you open the page you will see the following error in your console:</p>
<pre><code class="language-shell">Uncaught SyntaxError: expected expression, got '&lt;'
</code></pre>
<p><strong>Babel</strong> to the rescue! This tool allows us to <em>transpile</em> <strong>JSX</strong> (which looks like HTML) to JavaScript.</p>
<p>First we need to import Babel. We will use a CDN for now (like we did with React). Add this below the React script tags:</p>
<pre><code class="language-html">&lt;script src=&quot;https://unpkg.com/@babel/standalone/babel.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>Next set the <code>type</code> <em>attribute</em> of the <code>&lt;script&gt;</code> tag inside the body to &quot;text/babel&quot; and replace the calls to <code>React.createElement</code> with JSX:</p>
<pre><code class="language-html">&lt;script type=&quot;text/babel&quot;&gt;
  const task1 = &lt;p&gt;Task 1&lt;/p&gt;;
  const task2 = &lt;p&gt;Task 2&lt;/p&gt;;
  const taskList = &lt;div id=&quot;taskList&quot; children={[task1, task2]} /&gt;;
  const heading = &lt;h1&gt;Tasks&lt;/h1&gt;;
  const app = &lt;div id=&quot;app&quot; children={[heading, taskList]} /&gt;;
  const root = ReactDOM.createRoot(document.querySelector('#root'));
  root.render(app);
&lt;/script&gt;
</code></pre>
<p>Now open the <code>index.html</code> in your browser. Incredibly enough, it <em>just works</em>™.</p>
<p>But why does it work? Let us again open the browser inspector and look inside the head element of the document. We will see that Babel <em>sneakily</em> added another script tag below the title. If we take a look inside, we will see that this script tag just contains a bunch of <code>React.createElement</code> calls.</p>
<p>Babel <em>transpiled</em> our JSX into <code>React.createElement</code> calls. Sneaky indeed! But this is <em>the good kind of sneaky</em> as it allows us to write <em>more readable code</em>. And as we all know - writing readable code makes you both a better programmer and a better person.</p>
<h3 id="inline-jsx"><a class="header" href="#inline-jsx">Inline JSX</a></h3>
<p>The new code looks much better, but is still a bit ugly. Luckily, we can inline the JSX. This simply means that we can nest JSX elements inside each other (similar to HTML). This is how the new JavaScript inside our script tag looks like:</p>
<pre><code class="language-javascript">const app = (
  &lt;div id=&quot;app&quot;&gt;
    &lt;h1&gt;Tasks&lt;/h1&gt;
    &lt;div id=&quot;taskList&quot;&gt;
      &lt;p&gt;Task 1&lt;/p&gt;
      &lt;p&gt;Item 2&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
);
const root = ReactDOM.createRoot(document.querySelector('#root'));
root.render(app);
</code></pre>
<p>This looks pretty much exactly like regular HTML. However, it is important to remember that JSX is <em>emphatically not</em> HTML. Instead it is a <strong>syntax extension</strong> to JavaScript that can be transpiled to <em>normal</em> JavaScript. This will lead to a number of important consequences down the road (namely that JSX can express things HTML can not).</p>
<p>Right now you are probably wondering why we are bothering with React at all. We took perfectly fine HTML and for some reason insisted on doing a bunch of complex things just to get essentially the same HTML, but dynamically. However, this setup will now payoff in a <em>huge</em> way, as we introduce React components.</p>
<h3 id="summary-1"><a class="header" href="#summary-1">Summary</a></h3>
<p>You know how to dynamically manipulate the DOM using JSX and that you should write JSX instead of <code>React.createElement</code> calls.</p>
<h3 id="further-reading-1"><a class="header" href="#further-reading-1">Further reading</a></h3>
<ul>
<li><a href="https://reactjs.org/docs/introducing-jsx.html">React docs - Introducing JSX</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="react-components"><a class="header" href="#react-components">React components</a></h2>
<div style="text-align: right"> <i> Why do React components have great self-esteem? <br> Because they keep getting props. <br> - From "1000 programming dad-jokes" </i> </div>
<h3 id="create-your-first-react-component"><a class="header" href="#create-your-first-react-component">Create your first React component</a></h3>
<p>Conceptually, a component is an independent and reusable piece of the UI. By thinking about an HTML page in terms of isolated components you can easily create well-designed pages.</p>
<p>Consider the first version of the easy-opus app. We will need to display a bunch of tasks. Every task should be its own component containing the task summary, description and a button to delete the task. These tasks are grouped in a task list component. In addition to the tasks, the task list component has a button to add a new task.</p>
<p>This is how it would look like in an image:</p>
<p><img src="chapter4/images/components.png" alt="" /></p>
<p>In terms of implementation, a component is just a JavaScript function that takes the data it should render as input and returns the UI representation of the data as output. It will probably not come as a surprise to you at this point that the returned UI representation is given by JSX.</p>
<blockquote>
<p>Do note that all the code we are about to write goes between the <code>&lt;script&gt;</code> tags. We will fix this in the next section.</p>
</blockquote>
<p>Let us move the task list into its own component:</p>
<pre><code class="language-javascript">const TaskList = () =&gt; {
  return (
    &lt;div id=&quot;taskList&quot;&gt;
      &lt;p&gt;Read the MERN book: Read and understand the MERN book.&lt;/p&gt;
      &lt;p&gt;Write a website: Create a new and cool website.&lt;/p&gt;
    &lt;/div&gt;
  );
};
</code></pre>
<p>Hooray! You created your first React component. Ok, now you can <em>definitely</em> add React to your resume. No? Well, apparently you are really one of those weird people who actually learn things before putting them on their resume...</p>
<p>We could now call the TaskList component the same way we would call a regular JavaScript function. We could also wrap it in a <code>React.createElement</code> call. However thanks to the power of JSX we can just do this:</p>
<pre><code class="language-javascript">const app = (
  &lt;div id=&quot;app&quot;&gt;
    &lt;h1&gt;Tasks&lt;/h1&gt;
    &lt;TaskList /&gt;
  &lt;/div&gt;
);
</code></pre>
<p>This looks just as if <code>&lt;TaskList&gt;</code> is a regular HTML tag! This means that we can use and nest our own components exactly like we would use and nest HTML elements. This leads to very simple code that is describing our UI in a very concise and straightforward manner.</p>
<p>This is why you should not confuse HTML and JSX. It's much more complicated (and relatively rare) to add your own custom tags in HTML. In comparison - creating custom components in JSX is easy and you will do so often. Isn't that great? Hint: <em>It totally is</em>.</p>
<h3 id="add-props-to-a-react-component"><a class="header" href="#add-props-to-a-react-component">Add props to a React component</a></h3>
<p>JSX is great, but the above code snippet is not. The main problem is that the data it represents is hardcoded into the component.</p>
<p>Let us fix that by passing properties (<code>props</code>) into the component. This is simply a JavaScript object containing the data the component should render. In our case we will simply pass an array of strings named <code>tasks</code> containing our - well - tasks. We can then use <code>map</code> to create a list of p elements from that array:</p>
<pre><code class="language-javascript">const TaskList = (props) =&gt; {
  return (
    &lt;div id=&quot;taskList&quot;&gt;
      {props.tasks.map((task) =&gt; (
        &lt;p id={task.id}&gt;{`${task.summary}: ${task.description}`}&lt;/p&gt;
      ))}
    &lt;/div&gt;
  );
};
</code></pre>
<p>This is already not too bad, but of course we want to take advantage of the latest and greatest JavaScript syntax there is. Writing <code>props.tasks</code> or <code>task.summary</code> is annoying. This will become even more annoying when we have a lot of props. We can use object destructuring to alleviate this:</p>
<pre><code class="language-javascript">const TaskList = ({ tasks }) =&gt; {
  return (
    &lt;div id=&quot;taskList&quot;&gt;
      {tasks.map(({ id, summary, description }) =&gt; (
        &lt;p&gt;{`${summary}: ${description}`}&lt;/p&gt;
      ))}
    &lt;/div&gt;
  );
};
</code></pre>
<blockquote>
<p>You can hopefully see how the concepts from chapter 1 all come together quite nicely.</p>
</blockquote>
<p>Excellent! We can use the new component like this:</p>
<pre><code class="language-javascript">const tasks = [
  {
    id: 'TSK-1',
    summary: 'Read the MERN book',
    description: 'Read and understand the MERN book.',
  },
  {
    id: 'TSK-2',
    summary: 'Write a website',
    description: 'Create a new and cool website.',
  },
];

const app = (
  &lt;div id=&quot;app&quot;&gt;
    &lt;h1&gt;TODOs&lt;/h1&gt;
    &lt;TaskList tasks={tasks} /&gt;
  &lt;/div&gt;
);
</code></pre>
<p>While we're at it, let's also make our app an actual component.</p>
<pre><code class="language-javascript">const App = () =&gt; {
  return (
    &lt;div id=&quot;app&quot;&gt;
      &lt;h1 id=&quot;headline&quot;&gt;Tasks&lt;/h1&gt;
      &lt;TaskList tasks={tasks} /&gt;
    &lt;/div&gt;
  );
};

root.render(&lt;App /&gt;);
</code></pre>
<p>Quite nice. Note that there is a problem with the current implementation of our component. You can see this by opening your browser console. An error &quot;Warning: Each child in a list should have a unique &quot;key&quot; prop.&quot; will appear.</p>
<p>The reason for that is that React needs a way to identify which items in a list have changed or have been added or removed. It does that by looking at the keys of the items. These basically give the elements a stable identity.</p>
<p>Simply add a key to every <code>&lt;p&gt;</code> in the task list:</p>
<pre><code class="language-javascript">const TaskList = ({ tasks }) =&gt; {
  return (
    &lt;div id=&quot;taskList&quot;&gt;
      {tasks.map(({ id, summary, description }) =&gt; (
        &lt;p key={id}&gt;{`${summary}: ${description}`}&lt;/p&gt;
      ))}
    &lt;/div&gt;
  );
};
</code></pre>
<h2 id="summary-2"><a class="header" href="#summary-2">Summary</a></h2>
<p>You learned how to create React components and how to pass properties to components.</p>
<h2 id="further-reading-2"><a class="header" href="#further-reading-2">Further reading</a></h2>
<ul>
<li><a href="https://reactjs.org/docs/components-and-props.html">React docs - Components and props</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="structuring-a-react-project"><a class="header" href="#structuring-a-react-project">Structuring a React Project</a></h2>
<h3 id="splitting-files"><a class="header" href="#splitting-files">Splitting files</a></h3>
<p>All this time we were working inside a single index.html. This is bad for three main reasons:</p>
<ol>
<li>We want to split the HTML and JavaScript (and later the CSS) into separate files. This will improve the maintainability of the project.</li>
<li>We want to split the JavaScript files as well. For example it is very common to have a component per JavaScript file.</li>
<li>We want to avoid loading the scripts from a CDN and performing the Babel transpilation at run time. Instead we want to put everything into a <em>bundle</em> and then simply use that bundle.</li>
</ol>
<p>In order to be able to do all of this we need a <em>build toolchain</em>. Let us begin the setup of the toolchain by creating a directory public/ and moving the index.html file into public/. You can do this using your file explorer or using the command line:</p>
<pre><code class="language-shell">mkdir public
mv index.html public/
</code></pre>
<p>The public/ directory will mostly just contain your index.html file and things like the favicon. We now create a src/ directory.</p>
<pre><code>mkdir src
</code></pre>
<p>This is where all the JavaScript <em>source</em> files (i.e. the files you use for development) will live.</p>
<p>Next we move the Javascript from <code>public/index.html</code> into <code>src/index.js</code>.</p>
<p>The <code>public/index.html</code> should therefore now look like this:</p>
<pre><code class="language-html">&lt;!doctype html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;title&gt;Easy Opus&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;root&quot;&gt; &lt;/div&gt;
    &lt;script src=&quot;../dist/bundle.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Note that we include a file called <code>dist/bundle.js</code> and not <code>src/index.js</code>. We will return to this in a second.</p>
<p>The <code>src/index.js</code> file should look like this:</p>
<pre><code class="language-javascript">const TaskList = ({ tasks }) =&gt; {
  return (
    &lt;div id=&quot;taskList&quot;&gt;
      {tasks.map(({ summary, description }) =&gt; (
        &lt;p&gt;{`${summary}: ${description}`}&lt;/p&gt;
      ))}
    &lt;/div&gt;
  );
};

const tasks = [
  {
    summary: 'Read the MERN book',
    description: 'Read and understand the MERN book.',
  },
  {
    summary: 'Write a website',
    description: 'Create a new and cool website.',
  },
];

const app = (
  &lt;div id=&quot;app&quot;&gt;
    &lt;h1&gt;Tasks&lt;/h1&gt;
    &lt;TaskList tasks={tasks} /&gt;
  &lt;/div&gt;
);
const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(app);
</code></pre>
<p>Your folder structure should look as follows:</p>
<pre><code>easy-opus/
└── client/
    ├── public/
    │   └── index.html
    └── src/
        └── index.js
</code></pre>
<h3 id="initialize-a-nodejs-project"><a class="header" href="#initialize-a-nodejs-project">Initialize a node.js project</a></h3>
<p>In chapter 1 we always worked with either individual code snippets or JavaScript files. However now we want to create a Node.js project.</p>
<p>Initialize a Node.js project by running:</p>
<pre><code class="language-shell">npm init -y
</code></pre>
<p>We pass the -y flag to avoid all kinds of annoying questions about things we currently don't care about.</p>
<p>If you inspect your root directory you will now see a package.json which looks approximately like this:</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;client&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;keywords&quot;: [],
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;
}
</code></pre>
<p>We already met babel. Instead of serving it from a CDN we now install it as a development dependency. In addition we install the react-preset to allow the transpilation of JSX:</p>
<pre><code class="language-shell">npm install --save-dev @babel/cli @babel/core @babel/preset-react babel-loader
</code></pre>
<p>Next we install webpack and the webpack development server as a dev dependency:</p>
<pre><code class="language-shell">npm install --save-dev webpack webpack-cli webpack-dev-server
</code></pre>
<p>If you look inside the project you will see that there are two new things. The first thing is a directory called node<em>modules. This contains the newly installed dependencies. The second thing is a file called package-lock.json which contains all the dependencies (include the dependencies of the dependencies) with their exact version. This file allows other developers to reconstruct your _exact dependencies</em> - especially in large projects this can become extremely important. Hunting down errors that stem from dependendency problems is some of the worst pastime you can think of in software development.</p>
<blockquote>
<p>As a side note, the node<em>modules directory already contains approximately 45MB. Nothing to see here... This is an unfortunate artifact of JavaScript developers generally using _a lot</em> of dependencies (not all of which are always necessary).</p>
</blockquote>
<p>Next we create the webpack configuration in a file called <em>webpack.config.js</em>:</p>
<pre><code class="language-javascript">const path = require('path');

module.exports = {
  entry: './src/index.js',
  output: {
    path: path.join(__dirname, 'dist'),
    filename: 'bundle.js',
    publicPath: '/dist/',
  },
  mode: 'development',
  module: {
    rules: [
      {
        test: /\.js$/,
        exclude: /node_modules/,
        use: [
          {
            loader: 'babel-loader',
            options: {
              presets: ['@babel/preset-react'],
            },
          },
        ],
      },
    ],
  },
};
</code></pre>
<p>Now we can build the project:</p>
<pre><code class="language-shell">npx webpack build
</code></pre>
<p>This builds the project into <code>dist/bundle.js</code>. Remember that this is the file we are including in our <code>index.html</code>. Your project structure should look like this:</p>
<pre><code>todo-app
├── node_modules
├── dist
│   └── bundle.js
├── public
│   └── index.html
├── src
│   └── index.js
├── package.json
├── package-lock.json
└── webpack.config.js
</code></pre>
<p>Open <code>index.html</code> in your browser and you will see a list of tasks.</p>
<h3 id="add-npm-scripts"><a class="header" href="#add-npm-scripts">Add npm scripts</a></h3>
<p>Instead of running command like <code>npx webpack serve</code> all the time, we can tell npm to map commands:</p>
<pre><code class="language-shell">&quot;scripts&quot;: {
  &quot;build&quot;: &quot;webpack build&quot;,
  &quot;serve&quot;: &quot;webpack serve&quot;
}
</code></pre>
<p>Now instead of executing <code>npx webpack build</code> and <code>npx webpack serve</code> we simply do <code>npm run build</code> and <code>npm run serve</code> respectively. This will become especially important when we will migrate from webpack to other bundlers since we can then simply edit the package.json and the commands will not change.</p>
<p>Let us now further improve the project structure.</p>
<h3 id="splitting-the-javascript"><a class="header" href="#splitting-the-javascript">Splitting the JavaScript</a></h3>
<p>Instead of having a single JavaScript file for the entire application, we want to split the JavaScript code as well. It is common practice to put every JavaScript component into its own file.</p>
<p>We now move Task into a separate component and put that component into a file called <em>src/task.js</em>:</p>
<pre><code class="language-javascript">const Task = ({ summary, description }) =&gt; {
  return &lt;p&gt;{`${summary}: ${description}`}&lt;/p&gt;;
};

export default Task;
</code></pre>
<p>This looks like overkill at first glance. However the tasks will inevitably become more complicated (this is a task management application after all). It is therefore already clear that the task should be its own component. Don't just blindly implement the current requirements, think about probable scenarios for the future and what they mean for your code.</p>
<p>Next we move the TaskList component to src/task-list.js:</p>
<pre><code class="language-javascript">import Task from './task';

const TaskList = ({ tasks }) =&gt; {
  return (
    &lt;div id=&quot;taskList&quot;&gt;
      {tasks.map(({ summary, description }, index) =&gt; (
        &lt;Task key={index} summary={summary} description={description} /&gt;
      ))}
    &lt;/div&gt;
  );
};

export default TaskList;
</code></pre>
<p>By now you know the drill. The App component goes into src/app.js:</p>
<pre><code class="language-javascript">import TaskList from './task-list';

const App = () =&gt; {
  const tasks = [
    {
      summary: 'Item 1',
      description: 'Description of item 1',
    },
    {
      summary: 'Item 2',
      description: 'Description of item 2',
    },
  ];

  return (
    &lt;div id=&quot;app&quot;&gt;
      &lt;h1&gt;Tasks&lt;/h1&gt;
      &lt;TaskList tasks={tasks} /&gt;
    &lt;/div&gt;
  );
};

export default App;
</code></pre>
<p>Finally our src/index.js becomes really simple:</p>
<pre><code class="language-javascript">import App from './app';
import ReactDOM from 'react-dom/client';

const root = ReactDOM.createRoot(document.querySelector('#root'));
root.render(&lt;App /&gt;);
</code></pre>
<h3 id="install-react-as-a-dependency-instead-of-serving-from-cdn"><a class="header" href="#install-react-as-a-dependency-instead-of-serving-from-cdn">Install React as a dependency instead of serving from CDN</a></h3>
<p>We no longer want to serve React from CDN, but install it as a dependency instead.</p>
<p>Run:</p>
<pre><code class="language-shell">npm install react react-dom
</code></pre>
<p>We also need to change the webconfig:</p>
<pre><code class="language-javascript">options: {
  presets: [
    [
      &quot;@babel/preset-react&quot;,
      {
        runtime: &quot;automatic&quot;,
      },
    ],
  ],
}
</code></pre>
<p>Run the webpack build again (<code>npx webpack build</code>) and open <code>index.html</code> in a browser. You will again see the same task list. Note that not much has changed in terms of <em>features</em>, however the structure of our project is now <em>much</em> cleaner. We will make some minor improvements later on (like using a <em>development server</em>), however all in all this is the project structure we will stick to for now.</p>
<h3 id="summary-3"><a class="header" href="#summary-3">Summary</a></h3>
<p>You learned about webpack and how to structure a JavaScript project.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="react-state"><a class="header" href="#react-state">React State</a></h2>
<h3 id="forms"><a class="header" href="#forms">Forms</a></h3>
<p>Let us now add the form for creating a new task. Before you continue reading, here is a mental exercise - <em>which component should contain this form</em>?</p>
<p>If you thought &quot;obviously, it's the TaskList component&quot;, you are right! Let's enter src/task-list.js and import React at the top:</p>
<pre><code class="language-javascript">import * as React from 'react';
</code></pre>
<p>Next we add the form inside the div (below all the p elements representing the tasks):</p>
<pre><code class="language-html">&lt;form onSubmit=&quot;{handleSubmit}&quot;&gt;
  &lt;label htmlFor=&quot;summary&quot;&gt;Summary:&lt;/label&gt;
  &lt;input type=&quot;text&quot; id=&quot;summary&quot; /&gt;
  &lt;br /&gt;
  &lt;label htmlFor=&quot;description&quot;&gt;Description:&lt;/label&gt;
  &lt;textarea id=&quot;description&quot; /&gt;
  &lt;br /&gt;
  &lt;button type=&quot;submit&quot;&gt;Add task&lt;/button&gt;
&lt;/form&gt;
</code></pre>
<p>This form contains the summary, the description and the &quot;Add task&quot; button. Try clicking the button - it won't do much. The reason for that is that we haven't yet told the button what to do on submit. Let's change that now.</p>
<p>We create a handleSubmit function, which simply logs something to the console. Note that the default behaviour of a form submission includes a browser refresh, which we don't want. To prevent the default behaviour, we have to call (surprise) the preventDefault function of the event:</p>
<pre><code class="language-javascript">function handleSubmit(event) {
  event.preventDefault();
  console.log('Submit');
}
</code></pre>
<p>Next we make sure that the onSubmit function is called when the button is clicked. To accomplish that, we set the onSubmit property of the button to the <code>handleSubmit</code> function:</p>
<pre><code class="language-html">&lt;button type=&quot;submit&quot; onSubmit=&quot;{handleSubmit}&quot;&gt;Add task&lt;/button&gt;
</code></pre>
<p>If you click the button, you should now see &quot;Submit&quot; logged to the console.</p>
<h3 id="use-react-state-to-create-new-items"><a class="header" href="#use-react-state-to-create-new-items">Use React state to create new items</a></h3>
<p>Now that we can add new tasks, our components needs to track <strong>state</strong> (the list of tasks in this case). React has the useState hook for this purpose. A <strong>hook</strong> is nothing more than a (special) function. This particular hook is a function that allows you to add state to a component:</p>
<pre><code class="language-javascript">const [tasks, setTasks] = React.useState([]);
</code></pre>
<p>The <code>useState</code> hook declares a &quot;state variable&quot;. The argument to the hook is the initial state. In this case, we begin with an empty list, since we have no tasks in the beginning. The hook returns a pair of values. The first element is the current state and the second element is a function for updating state. <em>You should never set the first element directly and only use the updating function. Otherwise React will get confused since it won't realize that your state has changed and will not update the DOM correctly.</em></p>
<p>The updater function takes the previous state and returns the next state. Here we take the list of previous tasks (i.e. the tasks that were present before the button click) and return the new tasks (i.e. the tasks that should be present after the button click). In this case we simply add the task to the end:</p>
<pre><code class="language-javascript">function handleSubmit(event) {
  event.preventDefault();
  const [{ value: summary }, { value: description }] = event.target.elements;
  setTasks((previousTasks) =&gt; [
    ...previousTasks,
    {
      summary,
      description,
    },
  ]);
}
</code></pre>
<p>Try clicking the button - a new task should appear.</p>
<div style="break-before: page; page-break-before: always;"></div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
