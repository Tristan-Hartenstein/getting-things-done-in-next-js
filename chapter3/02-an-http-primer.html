<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>An HTTP Primer</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../title-page.html">Getting Things Done in Next.js</a></li><li class="chapter-item expanded affix "><a href="../introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="../acknowledgments.html">Acknowledgments</a></li><li class="chapter-item expanded "><a href="../chapter1/index.html"><strong aria-hidden="true">1.</strong> A Brief Introduction to JavaScript</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter1/01-hello-world.html"><strong aria-hidden="true">1.1.</strong> Hello World</a></li><li class="chapter-item expanded "><a href="../chapter1/02-primitive-data-types.html"><strong aria-hidden="true">1.2.</strong> Primitive Data Types</a></li><li class="chapter-item expanded "><a href="../chapter1/03-arrays-and-objects.html"><strong aria-hidden="true">1.3.</strong> Arrays and Objects</a></li><li class="chapter-item expanded "><a href="../chapter1/04-control-flow.html"><strong aria-hidden="true">1.4.</strong> Control Flow</a></li><li class="chapter-item expanded "><a href="../chapter1/05-functions.html"><strong aria-hidden="true">1.5.</strong> Functions</a></li><li class="chapter-item expanded "><a href="../chapter1/06-error-handling.html"><strong aria-hidden="true">1.6.</strong> Error Handling</a></li><li class="chapter-item expanded "><a href="../chapter1/07-basic-datastructures.html"><strong aria-hidden="true">1.7.</strong> Basic Data Structures</a></li><li class="chapter-item expanded "><a href="../chapter1/08-functional-thinking.html"><strong aria-hidden="true">1.8.</strong> Functional Thinking</a></li><li class="chapter-item expanded "><a href="../chapter1/09-asynchronous-programming.html"><strong aria-hidden="true">1.9.</strong> Asynchronous Programming</a></li><li class="chapter-item expanded "><a href="../chapter1/10-modules.html"><strong aria-hidden="true">1.10.</strong> Modules</a></li><li class="chapter-item expanded "><a href="../chapter1/11-writing-decent-code.html"><strong aria-hidden="true">1.11.</strong> Writing Decent Code</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter2/index.html"><strong aria-hidden="true">2.</strong> Leveling Up with TypeScript</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter2/01-why-typescript.html"><strong aria-hidden="true">2.1.</strong> Why TypeScript?</a></li><li class="chapter-item expanded "><a href="../chapter2/02-basic-types.html"><strong aria-hidden="true">2.2.</strong> Basic Types</a></li><li class="chapter-item expanded "><a href="../chapter2/03-annotating-functions.html"><strong aria-hidden="true">2.3.</strong> Annotating Functions</a></li><li class="chapter-item expanded "><a href="../chapter2/04-union-types.html"><strong aria-hidden="true">2.4.</strong> Union Types</a></li><li class="chapter-item expanded "><a href="../chapter2/05-generics.html"><strong aria-hidden="true">2.5.</strong> Generics</a></li><li class="chapter-item expanded "><a href="../chapter2/06-configuring-typescript.html"><strong aria-hidden="true">2.6.</strong> Configuring TypeScript</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter3/index.html"><strong aria-hidden="true">3.</strong> Networking Fundamentals</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter3/01-ips-ports-and-domains.html"><strong aria-hidden="true">3.1.</strong> IPs, Ports and Domains</a></li><li class="chapter-item expanded "><a href="../chapter3/02-an-http-primer.html" class="active"><strong aria-hidden="true">3.2.</strong> An HTTP Primer</a></li><li class="chapter-item expanded "><a href="../chapter3/03-more-on-http.html"><strong aria-hidden="true">3.3.</strong> More on HTTP</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter4/index.html"><strong aria-hidden="true">4.</strong> A Vanilla Client</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter4/01-hypertext-markup-language.html"><strong aria-hidden="true">4.1.</strong> Hypertext Markup Language</a></li><li class="chapter-item expanded "><a href="../chapter4/02-marking-up-text.html"><strong aria-hidden="true">4.2.</strong> Marking Up Text</a></li><li class="chapter-item expanded "><a href="../chapter4/03-hyperlinks-and-images.html"><strong aria-hidden="true">4.3.</strong> Hyperlinks and Images</a></li><li class="chapter-item expanded "><a href="../chapter4/04-the-document-object-model.html"><strong aria-hidden="true">4.4.</strong> The Document Object Model</a></li><li class="chapter-item expanded "><a href="../chapter4/05-web-forms.html"><strong aria-hidden="true">4.5.</strong> Web Forms</a></li><li class="chapter-item expanded "><a href="../chapter4/06-a-simple-client.html"><strong aria-hidden="true">4.6.</strong> A Simple Client</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter5/index.html"><strong aria-hidden="true">5.</strong> Adding Spice with React</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter5/01-react-components.html"><strong aria-hidden="true">5.1.</strong> React Components</a></li><li class="chapter-item expanded "><a href="../chapter5/02-react-state.html"><strong aria-hidden="true">5.2.</strong> React State</a></li><li class="chapter-item expanded "><a href="../chapter5/03-react-effects.html"><strong aria-hidden="true">5.3.</strong> React Effects</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter6/index.html"><strong aria-hidden="true">6.</strong> Moving to the Server with Next.js</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter6/01-setup.html"><strong aria-hidden="true">6.1.</strong> Setup</a></li><li class="chapter-item expanded "><a href="../chapter6/02-pages-and-layouts.html"><strong aria-hidden="true">6.2.</strong> Pages and Layouts</a></li><li class="chapter-item expanded "><a href="../chapter6/03-more-on-routes.html"><strong aria-hidden="true">6.3.</strong> More on Routes</a></li><li class="chapter-item expanded "><a href="../chapter6/04-server-and-client-components.html"><strong aria-hidden="true">6.4.</strong> Server and Client Components</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="an-http-primer"><a class="header" href="#an-http-primer">An HTTP Primer</a></h2>
<h3 id="http-and-express"><a class="header" href="#http-and-express">HTTP and Express</a></h3>
<p>When writing a web application, the most common way to get data from a server to a client is via the HTTP procotol (usually augmented by SSL resulting in the HTTPS procotol).
HTTP is a <strong>request/response protocol</strong>, i.e. HTTP clients send requests to an HTTP server and receive a response in return.
You have in fact already used the HTTP protocol.
Every time you browse the internet, HTTP requests are sent under the hood.</p>
<p>We could use the built-in HTTP module of Node.js, but this is not terribly convenient.
Instead we will use an extremely popular framework called <strong>Express</strong>.
While Express builds on top of the HTTP module, it provides a lot of additional useful functionality.</p>
<p>Create a new Node.js project inside some directory:</p>
<pre><code class="language-shell">npm init -y
</code></pre>
<p>Install Express:</p>
<pre><code class="language-shell">npm install express
</code></pre>
<p>Now create a file named <code>app.js</code> inside the directory.
As usual the name of the file is up to you, but it should be something meaningful.
In the file we will create an Express application and then make that application listen for connections on a specified host and port.</p>
<p>This is how you can create an Express application and make it listen on port <code>3000</code>:</p>
<pre><code class="language-javascript">const express = require('express');
const app = express();
const PORT = 3000;

app.listen(PORT, () =&gt; {
  console.log(`Server listening on port ${PORT}...`);
});
</code></pre>
<p>This application is not very useful, so let's add a <strong>route</strong> to it.
Add this above the call to <code>listen</code>:</p>
<pre><code class="language-javascript">app.get('/', (req, res) =&gt; {
  res.send('Hello, world!');
});
</code></pre>
<p>If you open a browser and navigate to <code>http://localhost:3000</code> you will see</p>
<pre><code>Hello, world!
</code></pre>
<p>You can also use cURL, which includes a command-line tool for transferring data on a network.
Among other things it supports HTTP and is available on both Windows and most Linux distributions.
Open a command line and run:</p>
<pre><code class="language-shell">curl http://localhost:3000/
</code></pre>
<p>The will output the following:</p>
<pre><code>Hello, world!
</code></pre>
<h3 id="http-urls"><a class="header" href="#http-urls">HTTP URLs</a></h3>
<p>The string <code>http://localhost:3000/</code> is a so called URL.
You have probably seen URLs before.
Navigate to Google and search for &quot;Next.js&quot; - you will notice that the URL in your browser looks like this:</p>
<pre><code>https://www.google.com/search?q=nextjs
</code></pre>
<p>For didactic reasons we will include the port:</p>
<pre><code>https://www.google.com:443/search?q=nextjs
</code></pre>
<p>Generally speaking, a typical HTTP(s) URL has the following form:</p>
<pre><code>scheme://host:port/path?key1=value1&amp;key2=value2#fragment
</code></pre>
<blockquote>
<p>Note the word <em>typical</em> here.
HTTP URLs (and especially more general URLs) can become <em>much more</em> complicated, but we will not cover all the little details in this book.
In fact the complexity of URLs is often a source of subtle bugs and browser crashes.
For example - at some point Android Chrome would <a href="https://news.ycombinator.com/item?id=28639708">crash</a> when trying to open <code>http://../foo</code>.</p>
</blockquote>
<p>The <strong>scheme</strong> usually indicates the protocol which describes how information should be transmitted.
We will almost exclusively use HTTP or HTTPS (which is just secure HTTP) in this book.
Therefore the scheme will almost always either be <code>http</code> or <code>https</code>.
In the above Google URL the scheme is clearly <code>https</code>.</p>
<p>You already learned about the <strong>host</strong> and the <strong>port</strong> - the host identifies the device you wish to connect to and the port is the communication endpoint on that device.
Note that the host could be a domain name (like <code>www.google.com</code>) or an IP address (like <code>142.251.36.238</code>).
Usually we will work with domain names since they are stable (unlike a lot of IP addresses).
Together the host and the port make up the <strong>authority</strong>.</p>
<blockquote>
<p>At the time of this writing 142.251.36.238 is one of Google's IP addresses.
This may of course change by the time you are reading this book.</p>
</blockquote>
<p>The next part is the <strong>path</strong>.
Assuming it is not empty, the path begins with a forward slash (&quot;/&quot;) and uniquely identifies the resource we want to query.
In the Google URL the path is &quot;/search&quot;.
Often paths will be hierarchical.
In this case the different components of the hierarchy are generally separated by slashes - for example &quot;/path/to/resource&quot;.</p>
<p>The path can be followed by a <strong>query</strong>.
The query begins with a question mark and is followed by key-value pairs.
In the Google URL this is &quot;?q=mern+stack&quot;.
Here the query provides information about your search.
If there are multiple key-value pairs, they are separated by ampersands (&quot;&amp;&quot;).
For example the query could be &quot;?key1=value1&amp;key2=value2&quot;.</p>
<p>The query can be followed by a <strong>fragment</strong>.
This is used for navigation by the client and is not sent to server.</p>
<h3 id="get-and-post-requests"><a class="header" href="#get-and-post-requests">GET and POST requests</a></h3>
<p>HTTP knows multiple <strong>request methods</strong>.
We primarily care about two request methods for now - namely <strong>GET</strong> and <strong>POST</strong>.
GET requests are generally used to retrieve data.</p>
<p>Recall out route from above:</p>
<pre><code class="language-javascript">app.get('/', (req, res) =&gt; {
  res.send('Hello world!');
});
</code></pre>
<p>This indicates that if a GET request is sent to the path '/', we would like to return 'Hello, world!' to the client.
The <code>req</code> variable represents the <strong>request object</strong> and <code>res</code> represents the <strong>respose object</strong>.
If we want to send a HTTP response to the client we therefore use <code>res.send</code>.</p>
<p>POST requests are generally used to send information to the server that tell it to update some information.
For example a login request will generally be a POST request since it tells the server that a user has logged in to the application.
Similary, if you submit a web form, there will usually be a POST request attached to that, since form submissions carry new information.</p>
<p>With POST requests we are less interested in the data the server returns us and more in telling the server that something happened.</p>
<p>Note that we need to enable some middleware (we will return to the concept of middleware in a second):</p>
<pre><code class="language-javascript">app.use(express.text());
</code></pre>
<p>Consider the following route which simply returns the request body back to the client:</p>
<pre><code class="language-javascript">app.post('/post-example', (req, res) =&gt; {
  res.send(req.body);
});
</code></pre>
<p>How do we test this?
You cannot simply send a POST request in a browser the way you would send a GET request.
This is where <code>curl</code> comes in really handy.
We need to specify that we want to send a POST request using the <code>-X</code> flag.
In addition we specify the data that we want to send in the <em>body</em> of the POST request using the <code>-d</code> flag.
Finally we specify a header called <code>Content-Type</code> and set it to <code>text/plain</code>.
This indicates that the data we want to send is plain text.</p>
<p>The final command looks like this:</p>
<pre><code>curl -X POST -H &quot;Content-Type: text/plain&quot; -d 'haha' http://localhost:3000/post-example
</code></pre>
<p>Generally speaking GET requests transmit information using the querystring, while POST requests transmit information in the request body.</p>
<p>Note that we will rarely send plain text in the request.
Instead we will use a special format called JSON.
This is a file format that supports a bunch of primitive values, arrays and dictionaries.
A typical JSON could look like this:</p>
<pre><code class="language-json">{
  &quot;tasks&quot;: [&quot;Task 1&quot;, &quot;Task 2&quot;, &quot;Task 3&quot;],
  &quot;date&quot;: {
    &quot;year&quot;: 2022,
    &quot;month&quot;: 06,
    &quot;date&quot;: 18
  }
}
</code></pre>
<p>In order to accept JSON requests, we need to replace the <code>express.text</code> middleware with the <code>express.json</code> middleware:</p>
<pre><code class="language-json">app.use(express.json());
</code></pre>
<p>Now we can curl the same path like this:</p>
<pre><code>curl -X POST -H &quot;Content-Type: application/json&quot; -d '{ &quot;key&quot;: &quot;value&quot; }' http://localhost:3000/post-example
</code></pre>
<p>Note that here we specify the <code>application/json</code> content type.</p>
<blockquote>
<p>This is all fine and dandy, but how do client and server know how to interpret all these things?
The answer to that question is the IETF (short for Internet Engineering Task Force).
This is an organization that sets standards for the Internet (hence the name).
Among other things it is responsible for creating the various RFCs (Request for Comments) that outline the workings of HTTP.
For example HTTP 1.1 (which is the most common HTTP version you will encounter at the time of this writing) is outlined in RFCs 7230-7235.
URIs on the other hand are outlined in RFC 3986.
We encourage you to have a quick look at the respective RFCs.
You should <em>definitely not</em> read them all at this stage, but just understand the sheer complexity of the things we are discussing here.
We are really just scratching a very tiny part of the surface of it all.
Lucky for you, most of the RFCs will probably not be terribly relevant in your day-to-day life.</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../chapter3/01-ips-ports-and-domains.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../chapter3/03-more-on-http.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../chapter3/01-ips-ports-and-domains.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../chapter3/03-more-on-http.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
